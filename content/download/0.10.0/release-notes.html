<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>0.10.0 Release Notes โก The Zig Programming Language</title>
    <link rel="icon" href="https://ziglang.org/favicon.png">
    <style>
      :root{
         --nav-width: 24em;
         --nav-margin-l: 1em;
      }
      body{
        font-family: system-ui, -apple-system, Roboto, "Segoe UI", sans-serif;
        margin: 0;
        line-height: 1.5;
      }
      header {
        padding: 0 1em;
      }
      h1, h2, h3, h4, h5 {
        margin: 0.5em 0 0.5em;
        line-height: 1.2;
        font-weight: bold;
        clear: both;
      }
      h1, h2 { font-size: 2.0em; }
      h3 { font-size: 1.5em; }
      h4 { font-size: 1.25em; }
      h5 { font-size: 1.0em; }
      #contents {
        max-width: 60em;
        margin: auto;
        padding: 0 1em;
      }
      #navigation {
        padding: 0 1em;
      }

      @media screen and (min-width: 1025px) {
        header {
          margin-left: calc(var(--nav-width) + var(--nav-margin-l));
        }
        header h1 {
          margin: auto;
          max-width: 30em;
        }
        #navigation {
          overflow: auto;
          width: var(--nav-width);
          height: 100vh;
          position: fixed;
          top:0;
          left:0;
          bottom:0;
          padding: unset;
          margin-left: var(--nav-margin-l);
        }
        #navigation nav ul {
          padding-left: 1em;
        }
        #contents-wrapper {
          margin-left: calc(var(--nav-width) + var(--nav-margin-l));
        }
    }

    a:hover,a:focus {
      background: #fff2a8;
    }
    dt {
      font-weight: bold;
    }
    th, td {
      padding: 0.6em;
    }
    tr:nth-child(even) {
      background: #f2f3f3;
    }
    .t0_1, .t37, .t37_1 {
      font-weight: bold;
    }
    .t2_0 {
      color: #575757;
    }
    .t31_1 {
      color: #b40000;
    }
    .t32_1 {
      color: green;
    }
    .t36_1 {
      color: #005C7A;
    }
    .file {
      font-weight: bold;
      border: unset;
    }
    code {
      background: #f8f8f8;
      border: 1px dotted silver;
      padding-left: 0.3em;
      padding-right: 0.3em;
    }
    pre > code {
      display: block;
      overflow: auto;
      padding: 0.5em;
      border: 1px solid #eee;
      line-height: normal;
    }
    samp {
      background: #fafafa;
    }
    pre > samp {
      display: block;
      overflow: auto;
      padding: 0.5em;
      border: 1px solid #eee;
      line-height: normal;
    }
    kbd {
      font-weight: bold;
    }
    .table-wrapper {
      width: 100%;
      overflow-x: auto;
    }

    .tok-kw {
        color: #333;
        font-weight: bold;
    }
    .tok-str {
        color: #d14;
    }
    .tok-builtin {
        color: #005C7A;
    }
    .tok-comment {
        color: #545454;
        font-style: italic;
    }
    .tok-fn {
        color: #900;
        font-weight: bold;
    }
    .tok-null {
        color: #005C5C;
    }
    .tok-number {
        color: #005C5C;
    }
    .tok-type {
        color: #458;
        font-weight: bold;
    }

    figure {
      margin: auto 0;
    }
    figure pre {
      margin-top: 0;
    }

    figcaption {
      padding-left: 0.5em;
      font-size: small;
      border-top-left-radius: 5px;
      border-top-right-radius: 5px;
    }
    figcaption.zig-cap {
      background: #fcdba5;
    }
    figcaption.c-cap {
      background: #a8b9cc;
      color: #000;
    }
    figcaption.peg-cap {
      background: #fcdba5;
    }
    figcaption.javascript-cap {
      background: #365d95;
      color: #fff;
    }
    figcaption.shell-cap {
      background: #ccc;
      color: #000;
    }

    aside {
      border-left: 0.25em solid #f7a41d;
      padding: 0 1em 0 1em;
    }

    h1 a, h2 a, h3 a, h4 a, h5 a {
      text-decoration: none;
      color: #333;
    }

    a.hdr {
      visibility: hidden;
    }
    h1:hover > a.hdr, h2:hover > a.hdr, h3:hover > a.hdr, h4:hover > a.hdr, h5:hover > a.hdr {
      visibility: visible;
    }

    pre {
      counter-reset: line;
    }
    pre .line:before {
      counter-increment: line;
      content: counter(line);
      display: inline-block;
      padding-right: 1em;
      width: 2em;
      text-align: right;
      color: #999;
    }
    th pre code {
        background: none;
    }
    th .line:before {
        display: none;
    }

    #logo {
      width: 100%;
      height: 7em;
      display: block;
      background-image: url(https://ziglang.org/img/zig-logo-dark.svg);
      background-repeat: no-repeat;
    }

    #stage2-progress-dark {
      display: none;
    }

    @media (prefers-color-scheme: dark) {
      body{
          background:#121212;
          color: #ccc;
      }
      a {
          color: #88f;
      }
      a:hover,a:focus {
          color: #000;
      }
      tr:nth-child(even) {
        background: #1e1e1e;
      }
      .t2_0 {
          color: grey;
      }
      .t31_1 {
          color: red;
      }
      .t32_1 {
          color: #00B800;
      }
      .t36_1 {
          color: #0086b3;
      }
      code {
        background: #222;
        border-color: #444;
      }
      pre > code {
          color: #ccc;
          background: #222;
          border: unset;
      }
      samp {
        background: #000;
        color: #ccc;
      }
      pre > samp {
        border: unset;
      }
      .tok-kw {
          color: #eee;
      }
      .tok-str {
          color: #2e5;
      }
      .tok-builtin {
          color: #ff894c;
      }
      .tok-comment {
          color: #aa7;
      }
      .tok-fn {
          color: #B1A0F8;
      }
      .tok-null {
          color: #ff8080;
      }
      .tok-number {
          color: #ff8080;
      }
      .tok-type {
          color: #68f;
      }
      h1 a, h2 a, h3 a, h4 a, h5 a {
          color: #aaa;
      }
      figcaption.zig-cap {
          background-color: #b27306;
          color: #000;
      }
      figcaption.peg-cap {
          background-color: #b27306;
          color: #000;
      }
      figcaption.shell-cap {
        background: #2a2a2a;
        color: #fff;
      }
      #logo {
        background-image: url(https://ziglang.org/img/zig-logo-light.svg);
      }
      #stage2-progress-dark {
        display: block;
      }
      #stage2-progress-light {
        display: none;
      }
    }
  </style>
  </head><!--
              o
               \
                \         o         __  _       _        _
                 \mmm    /         (_, (_)     /-\ \/\/ /-\ \/ ,
            o    (' ')  /               ___  _   __         /
             \  __\^/__/                 |  |_) |  | |   |
              \/       \-----o           |  | \ |__| |__ |__
              //|     |\\
             (( |  \  | ))
              \\|___\_|//
               W(    o)W
               /|  |  |
              / | / \ |\
             /  ( ) ( ) \
            o   | | | |  \
                |_| |_|   o
                (_) (_)
David Riley
  --><body>
    <div id="contents">
    <a href="https://ziglang.org/"><span id="logo"></span></a>
    <h1>0.10.0 Release Notes</h1>
    <img alt="Zero the Ziguana" src="https://ziglang.org/img/Zero_1.svg" style="height: 18em; float: right">
    <p>
    <a href="https://ziglang.org/download/#release-0.10.0">Download &amp; Documentation</a>
    </p>
    <p>
    Zig is a general-purpose programming language and toolchain for maintaining
    <strong>robust</strong>, <strong>optimal</strong>, and <strong>reusable</strong> software.
    </p>
    <p>
    Backed by the <a href="/zsf/">Zig Software Foundation</a>,
    the project is <strong>financially sustainable</strong>. These core team members
    work on Zig full-time:
    </p>
    <ul style="columns: 3">
      <li><a href="https://andrewkelley.me/">Andrew Kelley</a></li>
      <li><a href="https://kristoff.it/">Loris Cro</a></li>
      <li><a href="http://www.jakubkonka.com/">Jakub Konka</a></li>
      <li><a href="https://vexu.eu/">Veikka Tuominen</a></li>
    </ul>
    <p>
    Please consider a <a href="/zsf/">recurring donation to the ZSF</a>
    to help us pay more contributors!
    </p>
    <p>
    This release features <strong>10 months of work</strong>:
    changes from <strong>290 different contributors</strong>, spread among
    <strong>4560 commits</strong>.</p>
    <h2 id="Table-of-Contents"><a href="#toc-Table-of-Contents">Table of Contents</a> <a class="hdr" href="#Table-of-Contents">ยง</a></h2>

    

    <ul>
        <li><a id="toc-Table-of-Contents" href="#Table-of-Contents">Table of Contents</a></li>
        <li><a id="toc-Cody-Tapscott-Joins-the-Core-Zig-Team" href="#Cody-Tapscott-Joins-the-Core-Zig-Team">Cody Tapscott Joins the Core Zig Team</a></li>
        <li><a id="toc-Support-Table" href="#Support-Table">Support Table</a>
        <ul>
            <li><a id="toc-Tier-System" href="#Tier-System">Tier System</a>
            <ul>
                <li><a id="toc-Tier-1-Support" href="#Tier-1-Support">Tier 1 Support</a></li>
                <li><a id="toc-Tier-2-Support" href="#Tier-2-Support">Tier 2 Support</a></li>
                <li><a id="toc-Tier-3-Support" href="#Tier-3-Support">Tier 3 Support</a></li>
                <li><a id="toc-Tier-4-Support" href="#Tier-4-Support">Tier 4 Support</a></li>
            </ul></li>
            <li><a id="toc-WebAssembly" href="#WebAssembly">WebAssembly</a></li>
            <li><a id="toc-Windows" href="#Windows">Windows</a></li>
            <li><a id="toc-Linux" href="#Linux">Linux</a></li>
            <li><a id="toc-macOS" href="#macOS">macOS</a>
            <ul>
                <li><a id="toc-Default-C-ABI-changed-from-gnu-to-none" href="#Default-C-ABI-changed-from-gnu-to-none">Default C ABI changed from gnu to none</a></li>
            </ul></li>
            <li><a id="toc-OpenBSD" href="#OpenBSD">OpenBSD</a></li>
            <li><a id="toc-SPARC" href="#SPARC">SPARC</a></li>
            <li><a id="toc-PowerPC" href="#PowerPC">PowerPC</a></li>
            <li><a id="toc-WASI" href="#WASI">WASI</a></li>
            <li><a id="toc-UEFI" href="#UEFI">UEFI</a></li>
            <li><a id="toc-GPU-Programming" href="#GPU-Programming">GPU Programming</a></li>
        </ul></li>
        <li><a id="toc-Documentation" href="#Documentation">Documentation</a>
        <ul>
            <li><a id="toc-Language-Reference" href="#Language-Reference">Language Reference</a></li>
            <li><a id="toc-Autodoc" href="#Autodoc">Autodoc</a></li>
        </ul></li>
        <li><a id="toc-Language-Changes" href="#Language-Changes">Language Changes</a>
        <ul>
            <li><a id="toc-Function-Pointers" href="#Function-Pointers">Function Pointers</a></li>
            <li><a id="toc-Packed-Structs" href="#Packed-Structs">Packed Structs</a></li>
            <li><a id="toc-Inline-Switch-Cases" href="#Inline-Switch-Cases">Inline Switch Cases</a></li>
            <li><a id="toc-Equality-Testing-of-Error-Unions" href="#Equality-Testing-of-Error-Unions">Equality Testing of Error Unions</a></li>
            <li><a id="toc-Pointers-to-Zero-Bit-Types" href="#Pointers-to-Zero-Bit-Types">Pointers to Zero-Bit Types</a></li>
            <li><a id="toc-minimum-and-maximum-renamed-to-min-and-max" href="#minimum-and-maximum-renamed-to-min-and-max">@minimum and @maximum renamed to @min and @max</a></li>
            <li><a id="toc-Removed-Type-Parameter-from-Bit-Builtins" href="#Removed-Type-Parameter-from-Bit-Builtins">Removed Type Parameter from Bit Builtins</a></li>
            <li><a id="toc-Runtime-Array-Concatenation--Multiplication" href="#Runtime-Array-Concatenation--Multiplication">Runtime Array Concatenation & Multiplication</a></li>
            <li><a id="toc-Address-of-Temporaries-Now-Produces-Const-Pointers" href="#Address-of-Temporaries-Now-Produces-Const-Pointers">Address-of Temporaries Now Produces Const Pointers</a></li>
            <li><a id="toc-stdbuiltinCompilerBackend" href="#stdbuiltinCompilerBackend">std.builtin.CompilerBackend</a></li>
            <li><a id="toc-f80" href="#f80">f80</a></li>
            <li><a id="toc-TypeInfoDeclaration-no-longer-has-a-data-field" href="#TypeInfoDeclaration-no-longer-has-a-data-field">TypeInfo.Declaration no longer has a data field</a></li>
            <li><a id="toc-Removed-anytype-fields" href="#Removed-anytype-fields">Removed anytype fields</a></li>
            <li><a id="toc-Address-Spaces" href="#Address-Spaces">Address Spaces</a></li>
            <li><a id="toc-Compile-Error-for-Misleading-Whitespace" href="#Compile-Error-for-Misleading-Whitespace">Compile Error for Misleading Whitespace</a></li>
            <li><a id="toc-Compile-Error-for-Pointless-Discards" href="#Compile-Error-for-Pointless-Discards">Compile Error for Pointless Discards</a></li>
            <li><a id="toc-Disallow-Leading-Zeroes-in-Literals" href="#Disallow-Leading-Zeroes-in-Literals">Disallow Leading Zeroes in Literals</a></li>
            <li><a id="toc-More-Calling-Conventions" href="#More-Calling-Conventions">More Calling Conventions</a></li>
            <li><a id="toc-Inline-Assembly" href="#Inline-Assembly">Inline Assembly</a></li>
        </ul></li>
        <li><a id="toc-Bootstrap-Compiler" href="#Bootstrap-Compiler">Bootstrap Compiler</a></li>
        <li><a id="toc-Self-Hosted-Compiler" href="#Self-Hosted-Compiler">Self-Hosted Compiler</a>
        <ul>
            <li><a id="toc-Is-it-time-to-upgrade" href="#Is-it-time-to-upgrade">Is it time to upgrade?</a>
            <ul>
                <li><a id="toc-Improvements-over-stage1" href="#Improvements-over-stage1">Improvements over stage1</a></li>
                <li><a id="toc-Falling-short-of-stage1" href="#Falling-short-of-stage1">Falling short of stage1</a></li>
            </ul></li>
            <li><a id="toc-How-to-Upgrade" href="#How-to-Upgrade">How to Upgrade</a>
            <ul>
                <li><a id="toc-Void-Literal-Syntax" href="#Void-Literal-Syntax">Void Literal Syntax</a></li>
                <li><a id="toc-Escaped-Pointer-to-Parameter" href="#Escaped-Pointer-to-Parameter">Escaped Pointer to Parameter</a></li>
            </ul></li>
            <li><a id="toc-C-ABI-Compatibility" href="#C-ABI-Compatibility">C ABI Compatibility</a></li>
            <li><a id="toc-C-Translation" href="#C-Translation">C Translation</a></li>
            <li><a id="toc-Cache-System" href="#Cache-System">Cache System</a></li>
            <li><a id="toc-Safety-for-Switching-on-Corrupted-Enums" href="#Safety-for-Switching-on-Corrupted-Enums">Safety for Switching on Corrupted Enums</a></li>
            <li><a id="toc-Referenced-By-Traces" href="#Referenced-By-Traces">Referenced-By Traces</a></li>
            <li><a id="toc-Error-Return-Traces" href="#Error-Return-Traces">Error Return Traces</a>
            <ul>
                <li><a id="toc-Unwrapping-Errors-in-Switch" href="#Unwrapping-Errors-in-Switch">Unwrapping Errors in Switch</a></li>
                <li><a id="toc-Removal-of-Useless-Stack-Frames" href="#Removal-of-Useless-Stack-Frames">Removal of Useless Stack Frames</a></li>
            </ul></li>
            <li><a id="toc-Code-Generation" href="#Code-Generation">Code Generation</a>
            <ul>
                <li><a id="toc-WebAssembly-Backend" href="#WebAssembly-Backend">WebAssembly Backend</a></li>
                <li><a id="toc-C-Backend" href="#C-Backend">C Backend</a></li>
                <li><a id="toc-x86-Backend" href="#x86-Backend">x86 Backend</a></li>
                <li><a id="toc-aarch64-Backend" href="#aarch64-Backend">aarch64 Backend</a></li>
                <li><a id="toc-arm-Backend" href="#arm-Backend">arm Backend</a></li>
            </ul></li>
        </ul></li>
        <li><a id="toc-Self-Hosted-Linker" href="#Self-Hosted-Linker">Self-Hosted Linker</a>
        <ul>
            <li><a id="toc-MachO" href="#MachO">MachO</a></li>
            <li><a id="toc-COFF" href="#COFF">COFF</a></li>
            <li><a id="toc-ELF" href="#ELF">ELF</a></li>
            <li><a id="toc-WASM-Modules" href="#WASM-Modules">WASM Modules</a></li>
            <li><a id="toc-DWARF-Linking" href="#DWARF-Linking">DWARF Linking</a></li>
            <li><a id="toc-Linker-Performance" href="#Linker-Performance">Linker Performance</a></li>
            <li><a id="toc-Linker-Test-Harness" href="#Linker-Test-Harness">Linker Test Harness</a></li>
        </ul></li>
        <li><a id="toc-Standard-Library" href="#Standard-Library">Standard Library</a>
        <ul>
            <li><a id="toc-Math" href="#Math">Math</a></li>
            <li><a id="toc-File-System" href="#File-System">File System</a>
            <ul>
                <li><a id="toc-Optimized-Tree-Deletion" href="#Optimized-Tree-Deletion">Optimized Tree Deletion</a></li>
            </ul></li>
            <li><a id="toc-Data-Structures" href="#Data-Structures">Data Structures</a></li>
            <li><a id="toc-Crypto" href="#Crypto">Crypto</a>
            <ul>
                <li><a id="toc-ECDSA-Signatures" href="#ECDSA-Signatures">ECDSA Signatures</a></li>
                <li><a id="toc-Add-Xoodoo-Deprecate-Gimli" href="#Add-Xoodoo-Deprecate-Gimli">Add Xoodoo, Deprecate Gimli</a></li>
            </ul></li>
            <li><a id="toc-Concurrency" href="#Concurrency">Concurrency</a></li>
            <li><a id="toc-Networking" href="#Networking">Networking</a></li>
            <li><a id="toc-Testing" href="#Testing">Testing</a>
            <ul>
                <li><a id="toc-Check-All-Allocation-Failures" href="#Check-All-Allocation-Failures">Check All Allocation Failures</a></li>
            </ul></li>
            <li><a id="toc-Debugging" href="#Debugging">Debugging</a></li>
            <li><a id="toc-New-Deflate-Compressor" href="#New-Deflate-Compressor">New Deflate Compressor</a></li>
            <li><a id="toc-Formatted-Printing" href="#Formatted-Printing">Formatted Printing</a></li>
        </ul></li>
        <li><a id="toc-Bug-Fixes" href="#Bug-Fixes">Bug Fixes</a>
        <ul>
            <li><a id="toc-This-Release-Contains-Bugs" href="#This-Release-Contains-Bugs">This Release Contains Bugs</a></li>
        </ul></li>
        <li><a id="toc-Build-System" href="#Build-System">Build System</a></li>
        <li><a id="toc-Toolchain" href="#Toolchain">Toolchain</a>
        <ul>
            <li><a id="toc-LLVM-15" href="#LLVM-15">LLVM 15</a></li>
            <li><a id="toc-musl-123" href="#musl-123">musl 1.2.3</a></li>
            <li><a id="toc-glibc-234" href="#glibc-234">glibc 2.34</a></li>
            <li><a id="toc-mingw-w64-1000" href="#mingw-w64-1000">mingw-w64 10.0.0</a></li>
            <li><a id="toc-zig-cc" href="#zig-cc">zig cc</a></li>
            <li><a id="toc-zig-c" href="#zig-c">zig c++</a></li>
            <li><a id="toc-zig-fmt" href="#zig-fmt">zig fmt</a></li>
            <li><a id="toc-compiler-rt" href="#compiler-rt">compiler-rt</a></li>
        </ul></li>
        <li><a id="toc-Roadmap" href="#Roadmap">Roadmap</a>
        <ul>
            <li><a id="toc-Package-Manager" href="#Package-Manager">Package Manager</a></li>
            <li><a id="toc-Accepted-Proposals" href="#Accepted-Proposals">Accepted Proposals</a></li>
        </ul></li>
        <li><a id="toc-Thank-You-Contributors" href="#Thank-You-Contributors">Thank You Contributors!</a></li>
        <li><a id="toc-Thank-You-Sponsors" href="#Thank-You-Sponsors">Thank You Sponsors!</a></li>
    </ul>

    

    <h2 id="Cody-Tapscott-Joins-the-Core-Zig-Team"><a href="#toc-Cody-Tapscott-Joins-the-Core-Zig-Team">Cody Tapscott Joins the Core Zig Team</a> <a class="hdr" href="#Cody-Tapscott-Joins-the-Core-Zig-Team">ยง</a></h2>

    <img alt="Ziggy the Ziguana" src="https://ziglang.org/img/Ziggy_7.svg" style="height: 11em; float: right">
    <p>
    I am pleased to announce our newest Zig team member, Cody Tapscott 
    (screenname: <a href="https://github.com/topolarity">topolarity</a>).
    </p><p>
    Cody excels at troubleshooting and debugging. He fearlessly deep dives 
    into unfamiliar areas of code, relentlessly attacking the problem until 
    a solution presents itself.
    </p><p>
    In addition, Cody has proven to be a steadfast community leader,
    setting an example for how to treat others with kindness and respect.
    </p>
    <p>Please give him a warm welcome to the core Zig team.</p>
    

    <h2 id="Support-Table"><a href="#toc-Support-Table">Support Table</a> <a class="hdr" href="#Support-Table">ยง</a></h2>

    <h3 id="Tier-System"><a href="#toc-Tier-System">Tier System</a> <a class="hdr" href="#Tier-System">ยง</a></h3>

    <p>
    A green check mark (โ) indicates the target meets all the requirements for the
    support tier. The other icons indicate what is <em>preventing the target from
      reaching the support tier</em>. In other words, the icons are
    <strong>to-do items</strong>. If you find any wrong data here please
    <a href="https://github.com/ziglang/www.ziglang.org">submit a pull request</a>!
    </p>
    <h4 id="Tier-1-Support"><a href="#toc-Tier-1-Support">Tier 1 Support</a> <a class="hdr" href="#Tier-1-Support">ยง</a></h4>

    <ul>
      <li>Not only can Zig generate machine code for these targets, but the
        <a href="#Standard-Library">Standard Library</a> cross-platform abstractions have implementations
        for these targets.</li>
      <li>The CI server automatically tests these targets on every commit to master
        branch. The ๐งช icon means this target does not yet have CI test coverage.</li>
      <li>The CI server automatically produces pre-built binaries for these targets,
        on every commit to master, and updates
        <a href="https://ziglang.org/download/">the download page</a> with links.
        The ๐ฆ icon means the download page is missing this target.
      </li>
      <li>These targets have <a href="#Debugging">debug info capabilities</a> and therefore
        produce stack traces on failed assertions.</li>
      <li>libc is available for this target even when cross compiling.</li>
      <li>All the behavior tests and applicable standard library tests pass for this target.
          All language features are known to work correctly. Experimental features do not
          count towards disqualifying an operating system or architecture from Tier 1.
          The ๐ icon means there are known <a href="#This-Release-Contains-Bugs">bugs</a> preventing
          this target from reaching Tier 1.
      </li>
      <li><a href="#zig-cc">zig cc</a>, <a href="#zig-c">zig c++</a>, and related toolchain commands support
        this target.</li>
      <li>If the Operating System is proprietary then the target is not marked deprecated
        by the vendor. The ๐ icon means the OS is officially deprecated,
        <a href="https://support.apple.com/en-us/HT208436">such as macos/x86</a>.</li>
    </ul>
    <table>
    <thead>
    <tr>
    <th></th>
    <th>freestanding</th>
    <th>Linux 3.16+</th>
    <th>macOS 10.13+</th>
    <th>Windows 8.1+</th>
    <th>WASI</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>x86_64</td>
    <td>โ</td>
    <td>โ</td>
    <td>โ</td>
    <td>โ</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>x86</td>
    <td>โ</td>
    <td><a href="https://github.com/ziglang/zig/issues/1929">#1929</a> ๐๐ฆ</td>
    <td>๐</td>
    <td><a href="https://github.com/ziglang/zig/issues/537">#537</a> ๐๐ฆ</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>aarch64</td>
    <td>โ</td>
    <td><a href="https://github.com/ziglang/zig/issues/2443">#2443</a> ๐</td>
    <td>โ</td>
    <td>๐๐ฆ๐งช</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>arm</td>
    <td>โ</td>
    <td><a href="https://github.com/ziglang/zig/issues/3174">#3174</a> ๐๐ฆ</td>
    <td>๐</td>
    <td>๐๐ฆ๐งช</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>mips</td>
    <td>โ</td>
    <td><a href="https://github.com/ziglang/zig/issues/3345">#3345</a> ๐๐ฆ</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>riscv64</td>
    <td>โ</td>
    <td><a href="https://github.com/ziglang/zig/issues/4456">#4456</a> ๐๐ฆ</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>sparc64</td>
    <td>โ</td>
    <td><a href="https://github.com/ziglang/zig/issues/4931">#4931</a> ๐๐ฆ๐งช</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>powerpc64</td>
    <td>โ</td>
    <td>๐๐ฆ</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>wasm32</td>
    <td>โ</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>โ</td>
    </tr>
    </tbody>
    </table>
    

    <h4 id="Tier-2-Support"><a href="#toc-Tier-2-Support">Tier 2 Support</a> <a class="hdr" href="#Tier-2-Support">ยง</a></h4>

    <ul>
    <li>The <a href="#Standard-Library">Standard Library</a> supports this target, but it's possible that some
      APIs will give an "Unsupported OS" compile error. One can link with libc or other
      libraries to fill in the gaps in the standard library. The ๐ icon means the
      standard library is too incomplete to be considered Tier 2 worthy.</li>
    <li>These targets are known to work, but may not be automatically tested, so there
      are occasional regressions. ๐ means that nobody has really looked into this target
      so whether or not it works is unknown.</li>
    <li>Some tests may be disabled for these targets as we work toward
      <a href="#Tier-1-Support">Tier 1 Support</a>.</li>
    </ul>
    <table>
    <thead>
    <tr>
    <th></th>
    <th>free standing</th>
    <th>Linux 3.16+</th>
    <th>macOS 10.13+</th>
    <th>Windows 8.1+</th>
    <th>FreeBSD 12.0+</th>
    <th>NetBSD 8.0+</th>
    <th>DragonFlyBSD 5.8+</th>
    <th>UEFI</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>x86_64</td>
    <td><a href="#Tier-1-Support">Tier 1</a></td>
    <td><a href="#Tier-1-Support">Tier 1</a></td>
    <td><a href="#Tier-1-Support">Tier 1</a></td>
    <td><a href="#Tier-1-Support">Tier 1</a></td>
    <td>โ</td>
    <td>โ</td>
    <td>โ</td>
    <td>โ</td>
    </tr>
    <tr>
    <td>x86</td>
    <td><a href="#Tier-1-Support">Tier 1</a></td>
    <td>โ</td>
    <td>๐</td>
    <td>โ</td>
    <td>๐</td>
    <td>๐</td>
    <td>N/A</td>
    <td>โ</td>
    </tr>
    <tr>
    <td>aarch64</td>
    <td><a href="#Tier-1-Support">Tier 1</a></td>
    <td>โ</td>
    <td><a href="#Tier-1-Support">Tier 1</a></td>
    <td>๐</td>
    <td>๐</td>
    <td>๐</td>
    <td>N/A</td>
    <td>๐</td>
    </tr>
    <tr>
    <td>arm</td>
    <td><a href="#Tier-1-Support">Tier 1</a></td>
    <td>โ</td>
    <td>๐</td>
    <td>๐</td>
    <td>๐</td>
    <td>๐</td>
    <td>N/A</td>
    <td>๐</td>
    </tr>
    <tr>
    <td>mips64</td>
    <td>โ</td>
    <td>โ</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>๐</td>
    <td>๐</td>
    <td>N/A</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>mips</td>
    <td><a href="#Tier-1-Support">Tier 1</a></td>
    <td>โ</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>๐</td>
    <td>๐</td>
    <td>N/A</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>powerpc64</td>
    <td>โ</td>
    <td>โ</td>
    <td>๐</td>
    <td>N/A</td>
    <td>๐</td>
    <td>๐</td>
    <td>N/A</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>powerpc</td>
    <td>โ</td>
    <td>โ</td>
    <td>๐</td>
    <td>N/A</td>
    <td>๐</td>
    <td>๐</td>
    <td>N/A</td>
    <td>N/A</td>
    </tr>
    <tr>
    <td>riscv64</td>
    <td><a href="#Tier-1-Support">Tier 1</a></td>
    <td>โ</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>๐</td>
    <td>๐</td>
    <td>N/A</td>
    <td>๐</td>
    </tr>
    <tr>
    <td>sparc64</td>
    <td><a href="#Tier-1-Support">Tier 1</a></td>
    <td>โ</td>
    <td>N/A</td>
    <td>N/A</td>
    <td>๐</td>
    <td>๐</td>
    <td>N/A</td>
    <td>N/A</td>
    </tr>
    </tbody>
    </table>
    

    <h4 id="Tier-3-Support"><a href="#toc-Tier-3-Support">Tier 3 Support</a> <a class="hdr" href="#Tier-3-Support">ยง</a></h4>

    <ul>
    <li>The standard library has little to no knowledge of the existence of this
        target.</li>
    <li>If this target is provided by LLVM, LLVM has the target enabled by default.</li>
    <li>These targets are not frequently tested; one will likely need to contribute
      to Zig in order to build for these targets.</li>
    <li>The Zig compiler might need to be updated with a few things such as<ul>
       <li>what sizes are the C integer types</li>
       <li>C ABI calling convention for this target</li>
       <li>start code and default panic handler</li>
      </ul></li>
     <li><code>zig targets</code> is guaranteed to include this target.</li>
    </ul>
    <table>
      <thead>
        <tr>
          <th></th>
          <th>freestanding</th>
          <th>Linux 3.16+</th>
          <th>Windows 8.1+</th>
          <th>FreeBSD 12.0+</th>
          <th>NetBSD 8.0+</th>
          <th>UEFI</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>x86_64</td>
          <td><a href="#Tier-1-Support">Tier 1</a></td>
          <td><a href="#Tier-1-Support">Tier 1</a></td>
          <td><a href="#Tier-1-Support">Tier 1</a></td>
          <td><a href="#Tier-2-Support">Tier 2</a></td>
          <td><a href="#Tier-2-Support">Tier 2</a></td>
          <td><a href="#Tier-2-Support">Tier 2</a></td>
        </tr>
        <tr>
          <td>x86</td>
          <td><a href="#Tier-1-Support">Tier 1</a></td>
          <td><a href="#Tier-2-Support">Tier 2</a></td>
          <td><a href="#Tier-2-Support">Tier 2</a></td>
          <td>โ</td>
          <td>โ</td>
          <td><a href="#Tier-2-Support">Tier 2</a></td>
        </tr>
        <tr>
          <td>aarch64</td>
          <td><a href="#Tier-1-Support">Tier 1</a></td>
          <td><a href="#Tier-2-Support">Tier 2</a></td>
          <td>โ</td>
          <td>โ</td>
          <td>โ</td>
          <td>โ</td>
        </tr>
        <tr>
          <td>arm</td>
          <td><a href="#Tier-1-Support">Tier 1</a></td>
          <td><a href="#Tier-2-Support">Tier 2</a></td>
          <td>โ</td>
          <td>โ</td>
          <td>โ</td>
          <td>โ</td>
        </tr>
        <tr>
          <td>mips64</td>
          <td><a href="#Tier-2-Support">Tier 2</a></td>
          <td><a href="#Tier-2-Support">Tier 2</a></td>
          <td>N/A</td>
          <td>โ</td>
          <td>โ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>mips</td>
          <td><a href="#Tier-1-Support">Tier 1</a></td>
          <td><a href="#Tier-2-Support">Tier 2</a></td>
          <td>N/A</td>
          <td>โ</td>
          <td>โ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>riscv64</td>
          <td><a href="#Tier-1-Support">Tier 1</a></td>
          <td><a href="#Tier-2-Support">Tier 2</a></td>
          <td>N/A</td>
          <td>โ</td>
          <td>โ</td>
          <td>โ</td>
        </tr>
        <tr>
          <td>powerpc32</td>
          <td><a href="#Tier-2-Support">Tier 2</a></td>
          <td><a href="#Tier-2-Support">Tier 2</a></td>
          <td>N/A</td>
          <td>โ</td>
          <td>โ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>powerpc64</td>
          <td><a href="#Tier-2-Support">Tier 2</a></td>
          <td><a href="#Tier-2-Support">Tier 2</a></td>
          <td>N/A</td>
          <td>โ</td>
          <td>โ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>bpf</td>
          <td>โ</td>
          <td>โ</td>
          <td>N/A</td>
          <td>โ</td>
          <td>โ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>hexagon</td>
          <td>โ</td>
          <td>โ</td>
          <td>N/A</td>
          <td>โ</td>
          <td>โ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>amdgcn</td>
          <td>โ</td>
          <td>โ</td>
          <td>N/A</td>
          <td>โ</td>
          <td>โ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>sparc</td>
          <td>โ</td>
          <td>โ</td>
          <td>N/A</td>
          <td>โ</td>
          <td>โ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>s390x</td>
          <td>โ</td>
          <td>โ</td>
          <td>N/A</td>
          <td>โ</td>
          <td>โ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>lanai</td>
          <td>โ</td>
          <td>โ</td>
          <td>N/A</td>
          <td>โ</td>
          <td>โ</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td>csky</td>
          <td>โ</td>
          <td>โ</td>
          <td>N/A</td>
          <td>โ</td>
          <td>โ</td>
          <td>N/A</td>
        </tr>
      </tbody>
    </table>
    <table>
      <thead>
        <tr>
          <th></th>
          <th>freestanding</th>
          <th>emscripten</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>wasm32</td>
          <td><a href="#Tier-1-Support">Tier 1</a></td>
          <td>โ</td>
        </tr>
      </tbody>
    </table>
    

    <h4 id="Tier-4-Support"><a href="#toc-Tier-4-Support">Tier 4 Support</a> <a class="hdr" href="#Tier-4-Support">ยง</a></h4>

    <ul>
      <li>Support for these targets is entirely experimental.</li>
      <li>If this target is provided by LLVM, LLVM may have the target as an
        experimental target, which means that you need to use Zig-provided binaries
        for the target to be available, or build LLVM from source with special configure flags.
        <code>zig targets</code> will display the target if it is available.</li>
      <li>This target may be considered deprecated by an official party, in
        which case this target will remain forever stuck in Tier 4.</li>
      <li>This target may only support <code>-femit-asm</code> and cannot emit
        object files, in which case <code>-fno-emit-bin</code> is enabled by
        default and cannot be overridden.</li>
    </ul>
    <p>Tier 4 targets:</p>
    <ul style="columns: 3">
      <li>avr</li>
      <li>riscv32</li>
      <li>xcore</li>
      <li>nvptx</li>
      <li>msp430</li>
      <li>r600</li>
      <li>arc</li>
      <li>tce</li>
      <li>le</li>
      <li>amdil</li>
      <li>hsail</li>
      <li>spir</li>
      <li>kalimba</li>
      <li>shave</li>
      <li>renderscript</li>
      <li>32-bit x86 macOS, 32-bit ARM macOS, powerpc32 and powerpc64 macOS, because
        <a href="https://support.apple.com/en-us/HT208436">Apple has officially dropped support for them</a>.</li>
    </ul>
    
    

    <h3 id="WebAssembly"><a href="#toc-WebAssembly">WebAssembly</a> <a class="hdr" href="#WebAssembly">ยง</a></h3>

    <p>Luuk de Gram writes:</p>
    <p>TODO</p>
    <ul>
      <li>Implement <code>--shared-memory</code> (#10965)</li>
    </ul>
    

    <h3 id="Windows"><a href="#toc-Windows">Windows</a> <a class="hdr" href="#Windows">ยง</a></h3>

    <p>Improvements to the <a href="#Standard-Library">Standard Library</a>:</p>
    <ul>
      <li>libc++ now includes the fs/filesystem module.</li>
      <li>Removed <code>__muloti4</code> from libc++ (#10719)
        <br>
        <a href="#compiler-rt">compiler-rt</a> already provides this symbol but libc++ was also providing it
        and when linking libc++ it caused a crash on Windows.</li>
      <li><code>zig test</code> has proper detection for Windows console.</li>
      <li>Add CANNOT_DELETE as a possible error in os.windows.DeleteFile.</li>
      <li>Use explicit integer bit widths for windows GUID.</li>
      <li>Improved comptime windows GUID.parse performance.</li>
      <li>child_process: collectOutputWindows handle broken_pipe from ReadFile (#10813)</li>
      <li>std.os: throw compile error for <code>argv</code> on Windows</li>
      <li>std.Thread.getName/setName: rework windows implementation (#10003)</li>
      <li>Added GetProcessTimes binding to the kernel32.zig (#11488)</li>
      <li>std.coff: parse out codebase and entrypoint from optionalheader</li>
      <li>Introduce std.process.EnvMap which handles case insensitivity on Windows (#10796)</li>
      <li>Added missing error to WriteFile</li>
      <li>Fixed HANDLER_ROUTINE callconv</li>
      <li>Changed <code>HKEY</code> to <code><span class="line">*<span class="tok-kw">opaque</span> {}</span></code></li>
      <li>Added os check for std.fs.setAsCwd() to work with Windows</li>
    </ul>
    

    <h3 id="Linux"><a href="#toc-Linux">Linux</a> <a class="hdr" href="#Linux">ยง</a></h3>

    <p>Previously, updating the <code>SYS</code> enum for each architecture required
    manually looking at the syscall tables and inserting any new additions.
    Now there is a tool, <code>generate_linux_syscalls.zig</code>, that automates
    this process using the syscall tables in the Linux source tree. On
    architectures without a table, it runs <a href="#zig-cc">zig cc</a> as a pre-processor to
    extract the system-call numbers from the Linux headers.</p>
    <p>Improvements to the <a href="#Standard-Library">Standard Library</a>:</p>
    <ul>
      <li>In the path names of Linux headers that Zig distributes, rename arm64
        to aarch64 for consistency (#10699)</li>
      <li>io_uring: fix version check in tests (#10466)</li>
      <li>io_uring: improve IO_Uring.copy_cqe</li>
      <li>io_uring: add recvmsg and sendmsg (#10212)</li>
      <li>io_uring: implemented automatic buffer selection (#10197)</li>
      <li>io_uring: added new flags and opcodes</li>
      <li>io_uring: allow for optional arguments</li>
      <li>Fixed os.rusage when linking with c library on Linux (#10543)</li>
      <li>std.c: add shm_open and shm_unlink</li>
      <li>fchown: use the 32-bit uid/gid variant of the syscall on 32-bit linux targets.</li>
      <li>Fixed preadv/pwritev bug on 64bit platform</li>
      <li>Added Linux support for POSIX file locking with fcntl</li>
      <li>Fixed ucontext_t</li>
      <li>std.fs: Handle EINVAL from getdents64 (#11178)</li>
      <li>Added Seccomp bits for linux (#10717)</li>
      <li>Fixed signature of setgroups</li>
      <li>Ported signal handling in abort() from musl (#11565)</li>
      <li>Added IN_MASK_CREATE and corresponding error handling in inotify_add_watch</li>
      <li>Fixed os.linux.S function signatures to use mode_t</li>
      <li>Added linux support for packet sockaddr</li>
      <li>Fixes to BPF module</li>
      <li>copy_file_range: save a syscall for most operations</li>
    </ul>
    

    <h3 id="macOS"><a href="#toc-macOS">macOS</a> <a class="hdr" href="#macOS">ยง</a></h3>

    <ul>
      <li>libc headers are updated and more complete (copyfile.h).</li>
      <li>Use libc if_nametoindex for macOS when parsing IPs (#10576)</li>
      <li>Implement segfault handler for macOS (both x86_64 and aarch64).</li>
      <li>std.debug: fix edge cases in macOS debug symbol lookup</li>
      <li>std: add mach_* syscalls for process mgmt</li>
      <li>Added more darwin primitives to the <a href="#Standard-Library">Standard Library</a></li>
      <li>Updated Mach routines for accessing page info</li>
      <li>Fixed incorrect return types on some libc functions (#12964)</li>
      <li>Extend CodeSignature to accept entitlements.</li>
      <li>Fixed child process spawn on macos hanging with stdin, stdout behavior set to pipe (#11480)</li>
    </ul>

    <h4 id="Default-C-ABI-changed-from-gnu-to-none"><a href="#toc-Default-C-ABI-changed-from-gnu-to-none">Default C ABI changed from gnu to none</a> <a class="hdr" href="#Default-C-ABI-changed-from-gnu-to-none">ยง</a></h4>

    <p>Prior to this change Zig would assume the ABI for Apple targets to be GNU
    which could result in subtle errors of emitting calls to non-existent
    system libc provided functions such as <code>_sincosf</code> which is a GNU
    extension and therefore not provided by macOS. This would result in linker
    errors due to not finding the symbol in <code>libSystem.tbd</code>.</p>
    <p>With this change, Zig now correctly identifies macOS (and other Apple platforms such as
    iPhoneOS, tvOS, and watchOS) as having ABI <code>none</code> (#11684).</p>
    <p>In <a href="#LLVM-15">LLVM</a>, this translates to <code>unknown</code>:</p>
    <pre><code>// main.ll
target triple = "aarch64-unknown-macos-unknown"</code></pre>
    
    

    <h3 id="OpenBSD"><a href="#toc-OpenBSD">OpenBSD</a> <a class="hdr" href="#OpenBSD">ยง</a></h3>

    <ul>
      <li>Added OpenBSD Authentication constants and functions (#10376)</li>
      <li>Fixed i386-openbsd failing to build from source (#9705)</li>
      <li>Fixed sigcontext struct and avoid defining fxsave64</li>
    </ul>
    

    <h3 id="SPARC"><a href="#toc-SPARC">SPARC</a> <a class="hdr" href="#SPARC">ยง</a></h3>

    <ul>
      <li>sparcv9 has been renamed to sparc64.</li>
      <li>More <a href="#compiler-rt">compiler-rt</a> routines were added.</li>
      <li>libunwind is updated to be compatible with sparc64.</li>
      <li>Fixed <code>stat</code> struct definition for sparc64.</li>
      <li>The <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a> now has an experimental
        sparc64 backend (not based on <a href="#LLVM-15">LLVM</a>).</li>
    </ul>
    

    <h3 id="PowerPC"><a href="#toc-PowerPC">PowerPC</a> <a class="hdr" href="#PowerPC">ยง</a></h3>

    <p>powerpc64 moved from <a href="#Tier-3-Support">Tier 3 Support</a> to <a href="#Tier-2-Support">Tier 2 Support</a>.</p>
    <p>powerpc64le now has CI test coverage for the behavior tests, the <a href="#Standard-Library">Standard Library</a>,
    targeting <a href="#musl-123">musl</a>, and targeting <a href="#glibc-234">glibc</a>.</p>
    <p>Softfloat support was added in <a href="#compiler-rt">compiler-rt</a>.</p>
    

    <h3 id="WASI"><a href="#toc-WASI">WASI</a> <a class="hdr" href="#WASI">ยง</a></h3>

    <p>Zig can now build itself for the WASI target.</p>
    <figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>uname -m</kbd></span>
<span class="line">x86_64</span>
<span class="line">$ <kbd>zig build -Dtarget=wasm32-wasi -Drelease</kbd></span>
<span class="line">$ <kbd>file zig-out/bin/zig.wasm</kbd></span>
<span class="line">zig-out/bin/zig.wasm: WebAssembly (wasm) binary module version 0x1 (MVP)</span>
<span class="line">$ <kbd>ls -hl zig-out/bin/zig.wasm</kbd></span>
<span class="line">-rwxr-xr-x 1 andy users 37M Oct 19 12:24 zig-out/bin/zig.wasm</span>
<span class="line">$ <kbd>cat hello.zig</kbd></span>
<span class="line">const std = @import("std");</span>
<span class="line">pub fn main() void {</span>
<span class="line">    std.io.getStdOut().writeAll("Hello, World!\n") catch {};</span>
<span class="line">}</span>
<span class="line">$ <kbd>wasmtime --dir=. --mapdir=/cwd::. --mapdir=/cache::"$HOME/.cache/zig" --mapdir=/zig::zig-out zig-out/bin/zig.wasm build-exe /cwd/hello.zig -target x86_64-linux-musl</kbd></span>
<span class="line">$ <kbd>chmod +x hello</kbd></span>
<span class="line">$ <kbd>file hello</kbd></span>
<span class="line">hello: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), statically linked, with debug_info, not stripped</span>
<span class="line">$ <kbd>./hello</kbd></span>
<span class="line">Hello, World!</span>
</samp></pre></figure>
    <p>The <code>chmod</code> is because of
    <a href="https://github.com/WebAssembly/wasi-filesystem/issues/33">WebAssembly/wasi-filesystem#33</a>.</p>
    <p>This snippet demonstrates creating a WASI build of Zig, then executing it with
    <a href="https://wasmtime.dev/">wasmtime 1.0.1</a>, cross compiling an executable for
    x86_64-linux, and then executing the cross-compiled executable. Computers are fun!</p>
    <p>Additionally:</p>
    <ul>
      <li>Zig's WASI libc has been synchronized with upstream (#11864)</li>
      <li>The <a href="#Standard-Library">Standard Library</a> is modified to integrate with libc when
        linking against it.</li>
      <li>Added emulated CWD to std.os for WASI targets (#11021)</li>
    </ul>
    

    <h3 id="UEFI"><a href="#toc-UEFI">UEFI</a> <a class="hdr" href="#UEFI">ยง</a></h3>

    <ul>
      <li><a href="#Standard-Library">Standard Library</a> improvements/fixes (#10566) (#10604) (#12897)</li>
      <li>Fixed GUID formatting (#11452)</li>
      <li>Added <code>BlockIoProtocol</code></li>
    </ul>
    

    <h3 id="GPU-Programming"><a href="#toc-GPU-Programming">GPU Programming</a> <a class="hdr" href="#GPU-Programming">ยง</a></h3>

    <ul>
      <li>Added experimental support for AMDGPU.</li>
      <li>Added support for debug info on NVPTX.</li>
      <li>Added <code>std.os.panic</code> implementation for NVPTX.</li>
      <li>Made <a href="#Address-Spaces">Address Spaces</a> easier to use when targeting GPUs.</li>
    </ul>
    

    

    <h2 id="Documentation"><a href="#toc-Documentation">Documentation</a> <a class="hdr" href="#Documentation">ยง</a></h2>

    <p>There were minimal changes to the <a href="#Language-Reference">Language Reference</a> in 0.10.0, however,
    the big news is that <a href="#Autodoc">Autodoc</a> has been completely rewritten!</p>
    <h3 id="Language-Reference"><a href="#toc-Language-Reference">Language Reference</a> <a class="hdr" href="#Language-Reference">ยง</a></h3>

    <img alt="Ziggy the Ziguana" src="https://ziglang.org/img/Ziggy_4.svg" style="height: 13em; float: right">
    <ul>
      <li>Replace mentions of <code><span class="line">c_void</span></code> with <code><span class="line"><span class="tok-type">anyopaque</span></span></code>.</li>
      <li>Added documentation for implicit struct pointer dereferencing.</li>
      <li>Reorganize <code><span class="line"><span class="tok-builtin">@truncate</span></span></code> and <code><span class="line"><span class="tok-builtin">@intCast</span></span></code> for clarity.</li>
      <li>Added documentation for common mistakes in errdefer scoping.</li>
      <li>Clarify behavior of slicing with constant indexes (#11219)</li>
      <li>Add pointer arithmetic example.</li>
      <li>Updated to keep in sync with <a href="#Language-Changes">Language Changes</a>.</li>
      <li>Miscellaneous minor improvements and corrections.</li>
    </ul>
    

    <h3 id="Autodoc"><a href="#toc-Autodoc">Autodoc</a> <a class="hdr" href="#Autodoc">ยง</a></h3>

    <p>This feature is still experimental.</p>

    <p>With version 0.6.0, Zig gained a first (experimental) implementation of
    automated doc generation, as mentioned in
    <a href="https://ziglang.org/download/0.6.0/release-notes.html#Documentation-Generation">the relative release notes</a>.
    That version integrated with the <a href="#Bootstrap-Compiler">Bootstrap Compiler</a> and, more
    specifically, it observed the data resulting from semantic analysis.</p>

    <p>With the new <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a> we needed to re-implement the
    main part of the system (now internally named <strong>Autodoc</strong>) to make it consume
    the new data format, but we took the opportunity of also re-designing its
    entire approach to data collection.</p>

    <p>The first Autodoc proof-of-concept (from Zig 0.6.0) relied entirely on
    semantic analysis data, which had the main downside of only showing the
    information that had been typechecked. The most annoying result of this
    fact was that the docs would leave holes in the documentation, making them
    feel unreliable.</p>

    <p>The new Autodoc is instead based on a <em>two pass</em> approach.</p>

    <p>The main source of information consumed by Autodoc is ZIR, an untyped
    intermediate representation close to an AST, which gets generated
    unconditionally for the entire codebase everytime a Zig project is built.
    This makes sure that Autodoc doesn't have blind spots.</p>

    <p>The problem with ZIR is that it's untyped, which means that it describes
    the program before any comptime logic is run. This means that ZIR alone
    won't be enough to find out all the concrete instantiations of a generic
    type, for example.</p>

    <p>To solve this problem, we plan to use ZIR information as the main
    <em>skeleton</em> for Autodoc, and to overlay semantic analysis information on top
    of that, in order to obtain both full coverage and also full resolution of
    comptime metaprogramming.</p>

    <p>Autodoc is still a work in progress and in fact it's still relying on
    ZIR information only. There is a tremendous amount of work ahead of us and,
    while we encourage you to check out
    <a href="https://ziglang.org/documentation/0.10.0/std/">Zig's stdlib docs</a>,
    there are plenty of basic things that still need to be implemented. If you see something
    missing or broken in Autodoc, please file an issue or, even better, consider
    <a href="https://github.com/ziglang/zig/wiki/How-to-contribute-to-Autodoc">becoming a contributor</a>.</p>
    
    

    <h2 id="Language-Changes"><a href="#toc-Language-Changes">Language Changes</a> <a class="hdr" href="#Language-Changes">ยง</a></h2>


    <h3 id="Function-Pointers"><a href="#toc-Function-Pointers">Function Pointers</a> <a class="hdr" href="#Function-Pointers">ยง</a></h3>

    <p>In Zig 0.9.x and the <a href="#Bootstrap-Compiler">Bootstrap Compiler</a>, the type <code><span class="line"><span class="tok-kw">fn</span> () <span class="tok-type">void</span></span></code> is a function pointer and acts like a pointer. However, the language spec, which is not written yet, will have this type be a <strong>function body</strong> type. It must be compile-time-known, and in order to get a function pointer, <code><span class="line">*<span class="tok-kw">const</span> <span class="tok-kw">fn</span> () <span class="tok-type">void</span></span></code> must be used.</p>
    <p>The <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a> implements this correctly, which means
    your project will likely break everywhere that you use a function
    pointer.</p>
    <p>Here is the problem most people will run into:</p>
    <figure><figcaption class="zig-cap"><cite class="file">test.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">test</span> <span class="tok-str">&quot;function pointer&quot;</span> {</span>
<span class="line">    <span class="tok-kw">const</span> s = foo();</span>
<span class="line">    s.fnPtr();</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">const</span> S = <span class="tok-kw">struct</span> {</span>
<span class="line">    fnPtr: <span class="tok-kw">fn</span> () <span class="tok-type">void</span>,</span>
<span class="line">};</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">fn</span> <span class="tok-fn">bar</span>() <span class="tok-type">void</span> {}</span>
<span class="line"><span class="tok-kw">fn</span> <span class="tok-fn">baz</span>() <span class="tok-type">void</span> {}</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">var</span> runtime: <span class="tok-type">bool</span> = <span class="tok-null">true</span>;</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">fn</span> <span class="tok-fn">foo</span>() S {</span>
<span class="line">    <span class="tok-kw">if</span> (runtime) {</span>
<span class="line">        <span class="tok-kw">return</span> .{</span>
<span class="line">            .fnPtr = bar,</span>
<span class="line">        };</span>
<span class="line">    } <span class="tok-kw">else</span> {</span>
<span class="line">        <span class="tok-kw">return</span> .{</span>
<span class="line">            .fnPtr = baz,</span>
<span class="line">        };</span>
<span class="line">    }</span>
<span class="line">}</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig test test.zig</kbd></span>
<span class="line"><span class="t1_0">docgen_tmp/test.zig:16:9: </span><span class="t31_1">error: </span><span class="t1_0">unable to resolve comptime value</span>
<span class="line"></span>    if (runtime) {</span>
<span class="line">        <span class="t32_1">^~~~~~~</span>
<span class="line"></span><span class="t1_0">docgen_tmp/test.zig:16:9: </span><span class="t36_1">note: </span><span class="t1_0">condition in comptime branch must be comptime-known</span>
<span class="line"></span><span class="t1_0">docgen_tmp/test.zig:2:18: </span><span class="t36_1">note: </span><span class="t1_0">called from here</span>
<span class="line"></span>    const s = foo();</span>
<span class="line">              <span class="t32_1">~~~^~</span>
<span class="line"></span></span>
</samp></pre></figure>
    <p>This happens because:</p>
    <ul>
      <li><code><span class="line"><span class="tok-kw">fn</span> () <span class="tok-type">void</span></span></code> is a <strong>function body</strong> type, not a function pointer type.</li>
      <li>Function body types are comptime-only, while function pointers may be runtime-known.</li>
      <li>The struct <code><span class="line">S</span></code> is a comptime-only type due to its comptime-only field.</li>
      <li>The function <code><span class="line">foo</span></code> is a comptime-only function due to its comptime-only return type.</li>
      <li>Therefore, <code><span class="line">foo()</span></code> is called at comptime, however it tries to read a global variable, which is runtime-known.</li>
    </ul>

    <p>The solution is to make the function into a function pointer:</p>
    <pre><code>-    fnPtr: fn () void,
+    fnPtr: *const fn () void,</code></pre>

    <p>Ideally, the compile error for this will be enhanced to make the
    solution more obvious, however, that enhancement will come later.</p>
    

    <h3 id="Packed-Structs"><a href="#toc-Packed-Structs">Packed Structs</a> <a class="hdr" href="#Packed-Structs">ยง</a></h3>

    <p>In previous releases of Zig there have been some nasty bugs that
    unfortunately did not get fixed for a long time, resulting in packed
    structs having a deservedly poor reputation. Finally, the situation is
    resolved. Packed structs have been reworked, both in terms of the Zig
    language specification, as well as the implementation.</p>
    <p>Now, one can reason about packed structs in a similar way as one reasons about
    <a href="/documentation/0.10.0/#enum">enums</a> - that is - they are merely integers
    wearing fancy hats.</p>
    <p>
    Each packed struct has a <em>backing integer</em> which defines the ABI of the type as
    well as the memory layout. The backing integer can be specified explicitly, or it can
    be inferred from the total bits of all the fields. If the backing integer is explicitly
    specified, then a compile error enforces that all the fields add up to that number of bits:
    </p>
    <figure><figcaption class="zig-cap"><cite class="file">test.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">const</span> S = <span class="tok-kw">packed</span> <span class="tok-kw">struct</span>(<span class="tok-type">u32</span>) {</span>
<span class="line">    a: <span class="tok-type">u29</span>,</span>
<span class="line">    b: <span class="tok-type">u2</span>,</span>
<span class="line">};</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">test</span> <span class="tok-str">&quot;packed struct&quot;</span> {</span>
<span class="line">    <span class="tok-kw">var</span> s: S = .{</span>
<span class="line">        .a = <span class="tok-number">1234</span>,</span>
<span class="line">        .b = <span class="tok-number">3</span>,</span>
<span class="line">    };</span>
<span class="line">    _ = s;</span>
<span class="line">}</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig test test.zig</kbd></span>
<span class="line"><span class="t1_0">docgen_tmp/test.zig:1:25: </span><span class="t31_1">error: </span><span class="t1_0">backing integer type 'u32' has bit size 32 but the struct fields have a total bit size of 31</span>
<span class="line"></span>const S = packed struct(u32) {</span>
<span class="line">                        <span class="t32_1">^~~</span>
<span class="line"></span><span class="t2_0">referenced by:</span>
<span class="line">    S: docgen_tmp/test.zig:1:18</span>
<span class="line">    test.packed struct: docgen_tmp/test.zig:7:12</span>
<span class="line">    remaining reference traces hidden; use '-freference-trace' to see all reference traces</span>
<span class="line"></span>
<span class="line"></span></span>
</samp></pre></figure>
    <p>The fields are specified in order starting from logically
    <em>least-significant</em> and ending with logically <em>most-significant</em> within
    the backing integer. The backing integer is stored in memory with the same
    endianness as the equivalent integer type for that target. This makes Zig's
    packed structs have a well-defined memory layout, unlike in C where the
    memory layout is implementation-defined and therefore usually cannot be
    relied upon.</p>


    <p>In the near future, the syntax will change to avoid confusion with C's packed structs,
    which is a different concept that relates to padding. In Zig, such a struct is done by
    using <code><span class="line"><span class="tok-kw">extern</span></span></code> and setting each field's alignment to 1 byte:
    </p>
    <figure><figcaption class="zig-cap"><cite class="file">align-1.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">const</span> std = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;std&quot;</span>);</span>
<span class="line"><span class="tok-kw">const</span> assert = std.debug.assert;</span>
<span class="line"></span>
<span class="line"><span class="tok-comment">// Equivalent of C's __attribute__((__packed__))</span></span>
<span class="line"><span class="tok-kw">const</span> S = <span class="tok-kw">extern</span> <span class="tok-kw">struct</span> {</span>
<span class="line">    a: <span class="tok-type">u64</span> <span class="tok-kw">align</span>(<span class="tok-number">1</span>),</span>
<span class="line">    b: <span class="tok-type">u8</span> <span class="tok-kw">align</span>(<span class="tok-number">1</span>),</span>
<span class="line">};</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">comptime</span> {</span>
<span class="line">    assert(<span class="tok-builtin">@sizeOf</span>([<span class="tok-number">2</span>]S) == <span class="tok-number">18</span>);</span>
<span class="line">}</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig test align-1.zig</kbd></span>
<span class="line">All 0 tests passed.</span>
</samp></pre></figure>
    

    <h3 id="Inline-Switch-Cases"><a href="#toc-Inline-Switch-Cases">Inline Switch Cases</a> <a class="hdr" href="#Inline-Switch-Cases">ยง</a></h3>

    <p>The <code><span class="line"><span class="tok-kw">inline</span></span></code> keyword can now be placed in front of
    <code><span class="line"><span class="tok-kw">switch</span></span></code> cases. This effectively turns a runtime-known value into a
    compile-time-known value:
    </p>
    <figure><figcaption class="zig-cap"><cite class="file">inline-switch.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">const</span> std = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;std&quot;</span>);</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">main</span>() !<span class="tok-type">void</span> {</span>
<span class="line">    <span class="tok-kw">var</span> arena_instance = std.heap.ArenaAllocator.init(std.heap.page_allocator);</span>
<span class="line">    <span class="tok-kw">const</span> arena = arena_instance.allocator();</span>
<span class="line"></span>
<span class="line">    <span class="tok-kw">const</span> args = <span class="tok-kw">try</span> std.process.argsAlloc(arena);</span>
<span class="line">    <span class="tok-kw">const</span> arg = <span class="tok-kw">if</span> (args.len &gt;= <span class="tok-number">2</span>) args[<span class="tok-number">1</span>] <span class="tok-kw">else</span> <span class="tok-str">&quot;50&quot;</span>;</span>
<span class="line">    <span class="tok-kw">const</span> some_number = <span class="tok-kw">try</span> std.fmt.parseInt(<span class="tok-type">i32</span>, arg, <span class="tok-number">10</span>);</span>
<span class="line"></span>
<span class="line">    <span class="tok-kw">switch</span> (some_number) {</span>
<span class="line">        <span class="tok-kw">inline</span> <span class="tok-number">1</span>...<span class="tok-number">100</span> =&gt; |x| {</span>
<span class="line">            foo(x);</span>
<span class="line">        },</span>
<span class="line">        <span class="tok-kw">else</span> =&gt; <span class="tok-builtin">@panic</span>(<span class="tok-str">&quot;not in range&quot;</span>),</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">fn</span> <span class="tok-fn">foo</span>(<span class="tok-kw">comptime</span> x: <span class="tok-type">i32</span>) <span class="tok-type">void</span> {</span>
<span class="line">    <span class="tok-comment">// Doing something that requires a comptime number, such as</span></span>
<span class="line">    <span class="tok-comment">// using it as the length of an array:</span></span>
<span class="line">    <span class="tok-kw">var</span> array: [x]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;</span>
<span class="line">    <span class="tok-kw">for</span> (array) |*elem, i| {</span>
<span class="line">        elem.* = <span class="tok-builtin">@intCast</span>(<span class="tok-type">u8</span>, i);</span>
<span class="line">    }</span>
<span class="line">}</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig build-exe inline-switch.zig</kbd></span>
<span class="line"></span>
<span class="line">$ <kbd>./inline-switch</kbd></span>
</samp></pre></figure>
    <p>
    In this example, we take a number that was passed in as a command line parameter at runtime,
    and pass it to a function that requires a <code><span class="line"><span class="tok-kw">comptime</span></span></code> parameter. This
    works because the <code><span class="line"><span class="tok-kw">switch</span></span></code> gets <em>inlined</em> - 100 prongs are
    generated, similar to unrolling an <code><span class="line"><span class="tok-kw">inline</span> <span class="tok-kw">for</span></span></code> loop that looped from
    1 to 100.
    </p>
    <p>Let's look at a less contrived example. Here is the use case where this pattern is the
    most useful: dynamic dispatch for enums and tagged unions.</p>
    <p>Before:</p>
    <pre><code><span class="line"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">iterate</span>(base: *Node, index: <span class="tok-type">usize</span>) ?*Node {</span>
<span class="line">    <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (<span class="tok-builtin">@typeInfo</span>(Tag).Enum.fields) |field| {</span>
<span class="line">        <span class="tok-kw">const</span> tag = <span class="tok-builtin">@intToEnum</span>(Tag, field.value);</span>
<span class="line">        <span class="tok-kw">if</span> (base.tag == tag) {</span>
<span class="line">            <span class="tok-kw">return</span> <span class="tok-builtin">@fieldParentPtr</span>(tag.Type(), <span class="tok-str">&quot;base&quot;</span>, base).iterate(index);</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">    <span class="tok-kw">unreachable</span>;</span>
<span class="line">}</span></code></pre>
    <p>After:</p>
    <pre><code><span class="line"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">iterate</span>(base: *Node, index: <span class="tok-type">usize</span>) ?*Node {</span>
<span class="line">    <span class="tok-kw">return</span> <span class="tok-kw">switch</span> (base.tag) {</span>
<span class="line">        <span class="tok-kw">inline</span> <span class="tok-kw">else</span> =&gt; |tag| <span class="tok-builtin">@fieldParentPtr</span>(tag.Type(), <span class="tok-str">&quot;base&quot;</span>, base).iterate(index),</span>
<span class="line">    };</span>
<span class="line">}</span></code></pre>

    <p>Unfortunately, we cannot use this feature in the <a href="#Standard-Library">Standard Library</a> or
    the <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a> yet, because this feature is not implemented in the
    <a href="#Bootstrap-Compiler">Bootstrap Compiler</a>. The <a href="#Roadmap">next steps</a> to accomplish this will
    be enhancing the <a href="#C-Backend">C Backend</a> until we can
    <a href="https://github.com/ziglang/zig/issues/5246">replace the bootstrap compiler</a>.</p>

    <p>See the <a href="/documentation/0.10.0/#Inline-switch">full inline switch documentation</a> in the <a href="#Language-Reference">Language Reference</a>.</p>
    

    <h3 id="Equality-Testing-of-Error-Unions"><a href="#toc-Equality-Testing-of-Error-Unions">Equality Testing of Error Unions</a> <a class="hdr" href="#Equality-Testing-of-Error-Unions">ยง</a></h3>

    <p>Similar to how the <code><span class="line">==</span></code> operator can be used to check if
    an optional is <code><span class="line"><span class="tok-null">null</span></span></code>, it can now also be used to check if an
    error union is a specific error code:</p>
    <figure><figcaption class="zig-cap"><cite class="file">error-equality.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">const</span> std = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;std&quot;</span>);</span>
<span class="line"><span class="tok-kw">const</span> expect = std.testing.expect;</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">test</span> <span class="tok-str">&quot;equality testing of error unions&quot;</span> {</span>
<span class="line">    <span class="tok-kw">try</span> expect(foo() == <span class="tok-kw">error</span>.Bad);</span>
<span class="line">    <span class="tok-kw">try</span> expect(bar() == <span class="tok-kw">error</span>.RealBad);</span>
<span class="line">}</span>
<span class="line"><span class="tok-kw">fn</span> <span class="tok-fn">foo</span>() <span class="tok-type">anyerror</span> {</span>
<span class="line">    <span class="tok-kw">return</span> <span class="tok-kw">error</span>.Bad;</span>
<span class="line">}</span>
<span class="line"><span class="tok-kw">fn</span> <span class="tok-fn">bar</span>() <span class="tok-type">anyerror</span>!<span class="tok-type">void</span> {</span>
<span class="line">    <span class="tok-kw">return</span> <span class="tok-kw">error</span>.RealBad;</span>
<span class="line">}</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig test error-equality.zig</kbd></span>
<span class="line">1/1 test.equality testing of error unions... OK</span>
<span class="line">All 1 tests passed.</span>
</samp></pre></figure>
    

    <h3 id="Pointers-to-Zero-Bit-Types"><a href="#toc-Pointers-to-Zero-Bit-Types">Pointers to Zero-Bit Types</a> <a class="hdr" href="#Pointers-to-Zero-Bit-Types">ยง</a></h3>

    <p>Before, a pointer to a zero-bit type was itself a zero bit type. Now,
    pointers to zero-bit types store addresses the same as regular pointers.</p>
    <p>This change is unlikely to affect many codebases. A use case where it might be
    relevant is representing a struct that has a variable-sized last field,
    as demonstrated by the <code>name</code> field here:</p>
    <figure><figcaption class="zig-cap"><cite class="file">vla.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">const</span> std = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;std&quot;</span>);</span>
<span class="line"><span class="tok-kw">const</span> testing = std.testing;</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">test</span> <span class="tok-str">&quot;struct with variable length last field&quot;</span> {</span>
<span class="line">    <span class="tok-kw">const</span> foo = <span class="tok-kw">try</span> make(testing.allocator, <span class="tok-str">&quot;Blah blah&quot;</span>);</span>
<span class="line">    <span class="tok-kw">defer</span> foo.free(testing.allocator);</span>
<span class="line"></span>
<span class="line">    <span class="tok-kw">try</span> testing.expect(foo.a == <span class="tok-number">1234</span>);</span>
<span class="line">    <span class="tok-kw">try</span> testing.expectEqualStrings(foo.getName(), <span class="tok-str">&quot;Blah blah&quot;</span>);</span>
<span class="line"></span>
<span class="line">    <span class="tok-comment">// The pointer address of the 'name' field is still well-defined and meaningful:</span></span>
<span class="line">    <span class="tok-kw">try</span> testing.expect(<span class="tok-builtin">@ptrCast</span>(*<span class="tok-type">u8</span>, &amp;foo.name).* == <span class="tok-str">'B'</span>);</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">const</span> S = <span class="tok-kw">extern</span> <span class="tok-kw">struct</span> {</span>
<span class="line">    a: <span class="tok-type">i32</span>,</span>
<span class="line">    name: [<span class="tok-number">0</span>]<span class="tok-type">u8</span> = .{},</span>
<span class="line"></span>
<span class="line">    <span class="tok-kw">fn</span> <span class="tok-fn">getName</span>(s: *<span class="tok-kw">const</span> S) []<span class="tok-kw">const</span> <span class="tok-type">u8</span> {</span>
<span class="line">        <span class="tok-kw">return</span> std.mem.sliceTo(<span class="tok-builtin">@ptrCast</span>([*:<span class="tok-number">0</span>]<span class="tok-kw">const</span> <span class="tok-type">u8</span>, &amp;s.name), <span class="tok-number">0</span>);</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    <span class="tok-kw">fn</span> <span class="tok-fn">free</span>(s: *S, gpa: std.mem.Allocator) <span class="tok-type">void</span> {</span>
<span class="line">        <span class="tok-kw">const</span> buf = <span class="tok-builtin">@ptrCast</span>([*]<span class="tok-type">u8</span>, s)[<span class="tok-number">0</span> .. <span class="tok-builtin">@sizeOf</span>(S) + s.getName().len + <span class="tok-number">1</span>];</span>
<span class="line">        gpa.free(buf);</span>
<span class="line">    }</span>
<span class="line">};</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">fn</span> <span class="tok-fn">make</span>(gpa: std.mem.Allocator, name: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) !*S {</span>
<span class="line">    <span class="tok-kw">const</span> s = <span class="tok-kw">try</span> make_vla(gpa, S, name.len + <span class="tok-number">1</span>);</span>
<span class="line">    s.* = .{ .a = <span class="tok-number">1234</span> };</span>
<span class="line">    <span class="tok-kw">const</span> name_ptr = <span class="tok-builtin">@ptrCast</span>([*]<span class="tok-type">u8</span>, &amp;s.name);</span>
<span class="line">    std.mem.copy(<span class="tok-type">u8</span>, name_ptr[<span class="tok-number">0</span>..name.len], name);</span>
<span class="line">    name_ptr[name.len] = <span class="tok-number">0</span>;</span>
<span class="line">    <span class="tok-kw">return</span> s;</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">fn</span> <span class="tok-fn">make_vla</span>(gpa: std.mem.Allocator, <span class="tok-kw">comptime</span> T: <span class="tok-type">type</span>, extra_bytes: <span class="tok-type">usize</span>) !*T {</span>
<span class="line">    <span class="tok-kw">const</span> buf = <span class="tok-kw">try</span> gpa.alignedAlloc(<span class="tok-type">u8</span>, <span class="tok-builtin">@alignOf</span>(T), <span class="tok-builtin">@sizeOf</span>(T) + extra_bytes);</span>
<span class="line">    <span class="tok-kw">const</span> ptr = <span class="tok-builtin">@ptrCast</span>(*T, buf);</span>
<span class="line">    <span class="tok-kw">return</span> ptr;</span>
<span class="line">}</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig test vla.zig</kbd></span>
<span class="line">1/1 test.struct with variable length last field... OK</span>
<span class="line">All 1 tests passed.</span>
</samp></pre></figure>
    <p>This assertion does not pass with the <a href="#Bootstrap-Compiler">Bootstrap Compiler</a> but it does with the
    <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a>:</p>
    <figure><figcaption class="zig-cap"><cite class="file">ptrs.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">const</span> std = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;std&quot;</span>);</span>
<span class="line"><span class="tok-kw">const</span> assert = std.debug.assert;</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">comptime</span> {</span>
<span class="line">    assert(<span class="tok-builtin">@sizeOf</span>(*<span class="tok-type">u0</span>) == <span class="tok-builtin">@sizeOf</span>(*<span class="tok-type">u8</span>));</span>
<span class="line">}</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig test ptrs.zig</kbd></span>
<span class="line">All 0 tests passed.</span>
</samp></pre></figure>
    <p>However, pointers to comptime-only types are still zero bit types, such as
    <code><span class="line">*<span class="tok-type">comptime_int</span></span></code>.</p>
    

    <h3 id="minimum-and-maximum-renamed-to-min-and-max"><a href="#toc-minimum-and-maximum-renamed-to-min-and-max">@minimum and @maximum renamed to @min and @max</a> <a class="hdr" href="#minimum-and-maximum-renamed-to-min-and-max">ยง</a></h3>

    <p>See the <a href="#Language-Reference">Language Reference</a>:
      <a href="/documentation/0.10.0/#min">@min</a>
      <a href="/documentation/0.10.0/#max">@max</a>
    </p>
    <p><a href="#zig-fmt">zig fmt</a> will automatically perform the rename.</p>
    

    <h3 id="Removed-Type-Parameter-from-Bit-Builtins"><a href="#toc-Removed-Type-Parameter-from-Bit-Builtins">Removed Type Parameter from Bit Builtins</a> <a class="hdr" href="#Removed-Type-Parameter-from-Bit-Builtins">ยง</a></h3>

    <p>The following builtins no longer have types as the first parameter:</p>
    <ul style="columns: 3">
      <li><a href="/documentation/0.10.0/#byteSwap">@byteSwap</a></li>
      <li><a href="/documentation/0.10.0/#bitReverse">@bitReverse</a></li>
      <li><a href="/documentation/0.10.0/#clz">@clz</a></li>
      <li><a href="/documentation/0.10.0/#ctz">@ctz</a></li>
      <li><a href="/documentation/0.10.0/#popCount">@popCount</a></li>
    </ul>
    <p>Instead, the type is inferred from the operand. This makes the builtins more
    ergonomic for <a href="/documentation/0.10.0/#Vectors">SIMD</a>.</p>
    

    <h3 id="Runtime-Array-Concatenation--Multiplication"><a href="#toc-Runtime-Array-Concatenation--Multiplication">Runtime Array Concatenation & Multiplication</a> <a class="hdr" href="#Runtime-Array-Concatenation--Multiplication">ยง</a></h3>

    <p>The <code><span class="line">++</span></code> and <code><span class="line">**</span></code> operators now support
    runtime-known operands, as long as the length is compile-time-known:</p>
    <figure><figcaption class="zig-cap"><cite class="file">array_cat.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">const</span> std = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;std&quot;</span>);</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">main</span>() !<span class="tok-type">void</span> {</span>
<span class="line">    <span class="tok-kw">var</span> array1 = <span class="tok-str">&quot;hellp&quot;</span>.*;</span>
<span class="line">    <span class="tok-kw">var</span> array2 = <span class="tok-str">&quot;!world &quot;</span>.*;</span>
<span class="line"></span>
<span class="line">    array1[array1.len - <span class="tok-number">1</span>] -= <span class="tok-number">1</span>;</span>
<span class="line">    std.mem.swap(<span class="tok-type">u8</span>, &amp;array2[<span class="tok-number">0</span>], &amp;array2[array2.len - <span class="tok-number">1</span>]);</span>
<span class="line"></span>
<span class="line">    <span class="tok-kw">const</span> final = array1 ++ array2 ++ <span class="tok-str">&quot;\n&quot;</span>;</span>
<span class="line">    <span class="tok-kw">try</span> std.io.getStdOut().writeAll(final);</span>
<span class="line">}</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig build-exe array_cat.zig</kbd></span>
<span class="line"></span>
<span class="line">$ <kbd>./array_cat</kbd></span>
<span class="line">hello world!</span>
</samp></pre></figure>

    <p>This may be a breaking change for some people who were relying on Zig to automatically
    evaluate the operands in a <code><span class="line"><span class="tok-kw">comptime</span></span></code> scope, like this:</p>
    <figure><figcaption class="zig-cap"><cite class="file">test.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">const</span> std = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;std&quot;</span>);</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">test</span> {</span>
<span class="line">    <span class="tok-kw">const</span> a = foo() ++ <span class="tok-str">&quot;bb&quot;</span>;</span>
<span class="line">    <span class="tok-kw">try</span> std.testing.expect(a.len == <span class="tok-number">5</span>);</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">fn</span> <span class="tok-fn">foo</span>() []<span class="tok-kw">const</span> <span class="tok-type">u8</span> {</span>
<span class="line">    <span class="tok-kw">return</span> <span class="tok-str">&quot;aaa&quot;</span>;</span>
<span class="line">}</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig test test.zig</kbd></span>
<span class="line"><span class="t1_0">docgen_tmp/test.zig:4:18: </span><span class="t31_1">error: </span><span class="t1_0">unable to resolve comptime value</span>
<span class="line"></span>    const a = foo() ++ &quot;bb&quot;;</span>
<span class="line">              <span class="t32_1">~~~^~</span>
<span class="line"></span><span class="t1_0">docgen_tmp/test.zig:4:18: </span><span class="t36_1">note: </span><span class="t1_0">slice value being concatenated must be comptime-known</span>
<span class="line"></span></span>
</samp></pre></figure>
    <p>The previous behavior
    can be obtained with explicit use of the <code><span class="line"><span class="tok-kw">comptime</span></span></code> keyword:</p>
    <pre><code>-    const a = foo() ++ "bb";
+    const a = comptime foo() ++ "bb";</code></pre>
    <p>This language change is implemented in <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a> only.</p>
    

    <h3 id="Address-of-Temporaries-Now-Produces-Const-Pointers"><a href="#toc-Address-of-Temporaries-Now-Produces-Const-Pointers">Address-of Temporaries Now Produces Const Pointers</a> <a class="hdr" href="#Address-of-Temporaries-Now-Produces-Const-Pointers">ยง</a></h3>

    <p>Zig 0.9.x and the <a href="#Bootstrap-Compiler">Bootstrap Compiler</a> allow this code:</p>
    <figure><figcaption class="zig-cap"><cite class="file">test.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">const</span> std = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;std&quot;</span>);</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">test</span> {</span>
<span class="line">    <span class="tok-kw">const</span> arena = std.heap.ArenaAllocator.init(std.heap.page_allocator).allocator();</span>
<span class="line"></span>
<span class="line">    <span class="tok-kw">const</span> ptr = <span class="tok-kw">try</span> arena.create(<span class="tok-type">i32</span>);</span>
<span class="line">    ptr.* = <span class="tok-number">1234</span>;</span>
<span class="line">}</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig test test.zig</kbd></span>
<span class="line"><span class="t1_0">docgen_tmp/test.zig:4:72: </span><span class="t31_1">error: </span><span class="t1_0">expected type '*heap.arena_allocator.ArenaAllocator', found '*const heap.arena_allocator.ArenaAllocator'</span>
<span class="line"></span>    const arena = std.heap.ArenaAllocator.init(std.heap.page_allocator).allocator();</span>
<span class="line">                  <span class="t32_1">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~</span>
<span class="line"></span><span class="t1_0">docgen_tmp/test.zig:4:72: </span><span class="t36_1">note: </span><span class="t1_0">cast discards const qualifier</span>
<span class="line"></span></span>
</samp></pre></figure>

    <p>Zig 0.10.0 does not allow this.
    Address of temporaries produces constant pointers for safety reasons.
    To fix this code, extract the temporary into an explicit <code><span class="line"><span class="tok-kw">var</span></span></code>.
    This makes the mutable temporary more obvious, which is safer.</p>

    <pre><code>-    const arena = std.heap.ArenaAllocator.init(std.heap.page_allocator).allocator();
+    var arena_state = std.heap.ArenaAllocator.init(std.heap.page_allocator);
+    const arena = arena_state.allocator();</code></pre>
    

    <h3 id="stdbuiltinCompilerBackend"><a href="#toc-stdbuiltinCompilerBackend">std.builtin.CompilerBackend</a> <a class="hdr" href="#stdbuiltinCompilerBackend">ยง</a></h3>

    <p>Now that there are multiple competing <a href="#Code-Generation">Code Generation</a> backends, it may
    be necessary to work around <a href="#This-Release-Contains-Bugs">bugs</a> in one of them.
    Similarly, as Zig gains
    <a href="https://tjpalmer.github.io/languish/">popularity</a>,
    there may be third party compiler implementations
    which have quirks. Zig now provides a <code><span class="line"><span class="tok-kw">comptime</span></span></code> enum
    value so that one can use conditional compilation to work around such issues.</p>
    <p>Documentation comments are reproduced here:</p>
    <figure><figcaption class="zig-cap"><cite class="file">test.zig</cite></figcaption><pre><code><span class="line"><span class="tok-comment">/// This enum is set by the compiler and communicates which compiler backend is</span></span>
<span class="line"><span class="tok-comment">/// used to produce machine code.</span></span>
<span class="line"><span class="tok-comment">/// Think carefully before deciding to observe this value. Nearly all code should</span></span>
<span class="line"><span class="tok-comment">/// be agnostic to the backend that implements the language. The use case</span></span>
<span class="line"><span class="tok-comment">/// to use this value is to **work around problems with compiler implementations.**</span></span>
<span class="line"><span class="tok-comment">///</span></span>
<span class="line"><span class="tok-comment">/// Avoid failing the compilation if the compiler backend does not match a</span></span>
<span class="line"><span class="tok-comment">/// whitelist of backends; rather one should detect that a known problem would</span></span>
<span class="line"><span class="tok-comment">/// occur in a blacklist of backends.</span></span>
<span class="line"><span class="tok-comment">///</span></span>
<span class="line"><span class="tok-comment">/// The enum is nonexhaustive so that alternate Zig language implementations may</span></span>
<span class="line"><span class="tok-comment">/// choose a number as their tag (please use a random number generator rather</span></span>
<span class="line"><span class="tok-comment">/// than a &quot;cute&quot; number) and codebases can interact with these values even if</span></span>
<span class="line"><span class="tok-comment">/// this upstream enum does not have a name for the number. Of course, upstream</span></span>
<span class="line"><span class="tok-comment">/// is happy to accept pull requests to add Zig implementations to this enum.</span></span>
<span class="line"><span class="tok-comment">///</span></span>
<span class="line"><span class="tok-comment">/// This data structure is part of the Zig language specification, however, the</span></span>
<span class="line"><span class="tok-comment">/// specific tag names and values are implementation defined.</span></span>
<span class="line"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> CompilerBackend = <span class="tok-kw">enum</span>(<span class="tok-type">u64</span>) {</span>
<span class="line">    <span class="tok-comment">/// It is allowed for a compiler implementation to not reveal its identity,</span></span>
<span class="line">    <span class="tok-comment">/// in which case this value is appropriate. Be cool and make sure your</span></span>
<span class="line">    <span class="tok-comment">/// code supports `other` Zig compilers!</span></span>
<span class="line">    other = <span class="tok-number">0</span>,</span>
<span class="line">    <span class="tok-comment">/// The original Zig compiler created in 2015 by Andrew Kelley.</span></span>
<span class="line">    <span class="tok-comment">/// Implemented in C++. Uses LLVM.</span></span>
<span class="line">    stage1 = <span class="tok-number">1</span>,</span>
<span class="line">    <span class="tok-comment">/// The reference implementation self-hosted compiler of Zig, using the</span></span>
<span class="line">    <span class="tok-comment">/// LLVM backend.</span></span>
<span class="line">    stage2_llvm = <span class="tok-number">2</span>,</span>
<span class="line">    <span class="tok-comment">/// The reference implementation self-hosted compiler of Zig, using the</span></span>
<span class="line">    <span class="tok-comment">/// backend that generates C source code.</span></span>
<span class="line">    <span class="tok-comment">/// Note that one can observe whether the compilation will output C code</span></span>
<span class="line">    <span class="tok-comment">/// directly with `object_format` value rather than the `compiler_backend` value.</span></span>
<span class="line">    stage2_c = <span class="tok-number">3</span>,</span>
<span class="line">    <span class="tok-comment">/// The reference implementation self-hosted compiler of Zig, using the</span></span>
<span class="line">    <span class="tok-comment">/// WebAssembly backend.</span></span>
<span class="line">    stage2_wasm = <span class="tok-number">4</span>,</span>
<span class="line">    <span class="tok-comment">/// The reference implementation self-hosted compiler of Zig, using the</span></span>
<span class="line">    <span class="tok-comment">/// arm backend.</span></span>
<span class="line">    stage2_arm = <span class="tok-number">5</span>,</span>
<span class="line">    <span class="tok-comment">/// The reference implementation self-hosted compiler of Zig, using the</span></span>
<span class="line">    <span class="tok-comment">/// x86_64 backend.</span></span>
<span class="line">    stage2_x86_64 = <span class="tok-number">6</span>,</span>
<span class="line">    <span class="tok-comment">/// The reference implementation self-hosted compiler of Zig, using the</span></span>
<span class="line">    <span class="tok-comment">/// aarch64 backend.</span></span>
<span class="line">    stage2_aarch64 = <span class="tok-number">7</span>,</span>
<span class="line">    <span class="tok-comment">/// The reference implementation self-hosted compiler of Zig, using the</span></span>
<span class="line">    <span class="tok-comment">/// x86 backend.</span></span>
<span class="line">    stage2_x86 = <span class="tok-number">8</span>,</span>
<span class="line">    <span class="tok-comment">/// The reference implementation self-hosted compiler of Zig, using the</span></span>
<span class="line">    <span class="tok-comment">/// riscv64 backend.</span></span>
<span class="line">    stage2_riscv64 = <span class="tok-number">9</span>,</span>
<span class="line">    <span class="tok-comment">/// The reference implementation self-hosted compiler of Zig, using the</span></span>
<span class="line">    <span class="tok-comment">/// sparc64 backend.</span></span>
<span class="line">    stage2_sparc64 = <span class="tok-number">10</span>,</span>
<span class="line"></span>
<span class="line">    _,</span>
<span class="line">};</span></code></pre></figure>
    <p>Please <strong>read the documentation comments carefully before using this value</strong>.
    In summary, you can work around compiler issues by doing something like this:</p>
    <pre><code><span class="line"><span class="tok-kw">const</span> FnPtr = <span class="tok-kw">switch</span> (builtin.zig_backend) {</span>
<span class="line">    .stage1 =&gt; <span class="tok-kw">fn</span>()<span class="tok-type">void</span>,</span>
<span class="line">    <span class="tok-kw">else</span> =&gt; *<span class="tok-kw">const</span> <span class="tok-kw">fn</span>()<span class="tok-type">void</span>,</span>
<span class="line">};</span></code></pre>
    

    <h3 id="f80"><a href="#toc-f80">f80</a> <a class="hdr" href="#f80">ยง</a></h3>

    <p>Zig now has <code><span class="line"><span class="tok-type">f80</span></span></code>, a primitive type that provides
    <a href="https://en.wikipedia.org/wiki/Extended_precision#x86_extended_precision_format">x86 extended precision format</a>.
    This type is fully supported on all systems. On those which lack hardware
    support for this type, softfloat implementations are provided by <a href="#compiler-rt">compiler-rt</a>.
    </p>
    <p>When would you use this? Well if you were
    <a href="https://github.com/Vexu/arocc/issues/213">implementing a C compiler</a> for instance.
    It's also part of the C ABI - for some C targets <code>long double</code> is an alias for
    <code><span class="line"><span class="tok-type">f80</span></span></code>.</p>
    <p>This is implemented in both the <a href="#Bootstrap-Compiler">Bootstrap Compiler</a> and
    <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a>.</p>
    

    <h3 id="TypeInfoDeclaration-no-longer-has-a-data-field"><a href="#toc-TypeInfoDeclaration-no-longer-has-a-data-field">TypeInfo.Declaration no longer has a data field</a> <a class="hdr" href="#TypeInfoDeclaration-no-longer-has-a-data-field">ยง</a></h3>

    <p>Zig 0.9.x allows inspecting declarations via
    <a href="/documentation/0.10.0/#typeInfo">@typeInfo</a>, but not any longer (#10753):</p>
    <figure><figcaption class="zig-cap"><cite class="file">test.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">const</span> std = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;std&quot;</span>);</span>
<span class="line"><span class="tok-kw">test</span> <span class="tok-str">&quot;type info on declarations&quot;</span> {</span>
<span class="line">    _ = <span class="tok-builtin">@typeInfo</span>(<span class="tok-builtin">@This</span>()).Struct.decls[<span class="tok-number">0</span>].data;</span>
<span class="line">}</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig test test.zig</kbd></span>
<span class="line"><span class="t1_0">docgen_tmp/test.zig:3:44: </span><span class="t31_1">error: </span><span class="t1_0">no field named 'data' in struct 'builtin.Type.Declaration'</span>
<span class="line"></span>    _ = @typeInfo(@This()).Struct.decls[0].data;</span>
<span class="line">                                           <span class="t32_1">^~~~</span>
<span class="line"></span><span class="t1_0">/home/andy/Downloads/zig/lib/std/builtin.zig:410:29: </span><span class="t36_1">note: </span><span class="t1_0">struct declared here</span>
<span class="line"></span>    pub const Declaration = struct {</span>
<span class="line">                            <span class="t32_1">^~~~~~</span>
<span class="line"></span></span>
</samp></pre></figure>
    <p>The data field looked like this:</p>
    <pre><code><span class="line"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> Data = <span class="tok-kw">union</span>(<span class="tok-kw">enum</span>) {</span>
<span class="line">    Type: <span class="tok-type">type</span>,</span>
<span class="line">    Var: <span class="tok-type">type</span>,</span>
<span class="line">    Fn: FnDecl,</span>
<span class="line">};</span></code></pre>
    <p>This was removed because it was an unnecessary complication. There are already alternatives
    for each of these fields:</p>
    <ul>
      <li>Var - <code><span class="line"><span class="tok-builtin">@typeOf</span>(<span class="tok-builtin">@field</span>(a, b))</span></code></li>
      <li>Type - <code><span class="line"><span class="tok-builtin">@field</span>(a, b)</span></code> (after checking the <code><span class="line"><span class="tok-builtin">@typeOf</span></span></code>)</li>
      <li>Fn - <code><span class="line"><span class="tok-builtin">@field</span>(a, b)</span></code> (after checking the <code><span class="line"><span class="tok-builtin">@typeOf</span></span></code>)</li>
    </ul>
    <p>This is implemented in both the <a href="#Bootstrap-Compiler">Bootstrap Compiler</a> and
    <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a>.</p>
    

    <h3 id="Removed-anytype-fields"><a href="#toc-Removed-anytype-fields">Removed anytype fields</a> <a class="hdr" href="#Removed-anytype-fields">ยง</a></h3>

    <p>Zig 0.9.x allows declaring a struct field <code><span class="line"><span class="tok-kw">anytype</span></span></code>
    which made the struct be a compile-time-only type and made the field's type
    allowed to be changed during <code><span class="line"><span class="tok-kw">comptime</span></span></code> code execution.</p>
    <figure><figcaption class="zig-cap"><cite class="file">test.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">const</span> S = <span class="tok-kw">struct</span> { x: <span class="tok-kw">anytype</span> };</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig test test.zig</kbd></span>
<span class="line"><span class="t1_0">docgen_tmp/test.zig:1:23: </span><span class="t31_1">error: </span><span class="t1_0">expected type expression, found 'anytype'</span>
<span class="line"></span>const S = struct { x: anytype };</span>
<span class="line">                      <span class="t32_1">^~~~~~~</span>
<span class="line"></span></span>
</samp></pre></figure>
    <p>This was removed in order to simplify the language (#10766).</p>
    <p>This is implemented in both the <a href="#Bootstrap-Compiler">Bootstrap Compiler</a> and
    <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a>.</p>
    

    <h3 id="Address-Spaces"><a href="#toc-Address-Spaces">Address Spaces</a> <a class="hdr" href="#Address-Spaces">ยง</a></h3>

    <p>TODO get release notes from snektron</p>
    <p>TODO added @addrSpaceCast makes it easier to use GPU address spaces</p>
    

    <h3 id="Compile-Error-for-Misleading-Whitespace"><a href="#toc-Compile-Error-for-Misleading-Whitespace">Compile Error for Misleading Whitespace</a> <a class="hdr" href="#Compile-Error-for-Misleading-Whitespace">ยง</a></h3>

    <p>Have a look at this code:</p>
    <pre><code><span class="line"><span class="tok-kw">const</span> directions = [_]<span class="tok-type">isize</span>{</span>
<span class="line">    -pitch-<span class="tok-number">1</span>,</span>
<span class="line">    -pitch,</span>
<span class="line">    -pitch+<span class="tok-number">1</span></span>
<span class="line">    -<span class="tok-number">1</span>,</span>
<span class="line">    <span class="tok-number">1</span>,</span>
<span class="line">    pitch-<span class="tok-number">1</span>,</span>
<span class="line">    pitch,</span>
<span class="line">    pitch+<span class="tok-number">1</span>,</span>
<span class="line">};</span></code></pre>
    <p>See the bug? It took me a minute.</p>

    <p>Answer: the <code>,</code> is missing from the third item in the list.
    This makes the list 7 items long instead of 8, and the third item
    <code>-pitch+1-1</code>.</p>

    <p>This code is now a compile error due to a new rule in the language:
    misleading whitespace is a compile error. In this case the misleading whitespace is
    being inconsistent on either side of a binary operator.</p>

    <figure><figcaption class="zig-cap"><cite class="file">test.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">const</span> directions = [_]<span class="tok-type">isize</span>{</span>
<span class="line">    -pitch-<span class="tok-number">1</span>,</span>
<span class="line">    -pitch,</span>
<span class="line">    -pitch+<span class="tok-number">1</span></span>
<span class="line">    -<span class="tok-number">1</span>,</span>
<span class="line">    <span class="tok-number">1</span>,</span>
<span class="line">    pitch-<span class="tok-number">1</span>,</span>
<span class="line">    pitch,</span>
<span class="line">    pitch+<span class="tok-number">1</span>,</span>
<span class="line">};</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig test test.zig</kbd></span>
<span class="line"><span class="t1_0">docgen_tmp/test.zig:5:5: </span><span class="t31_1">error: </span><span class="t1_0">binary operator `-` has whitespace on one side, but not the other.</span>
<span class="line"></span>    -1,</span>
<span class="line">    <span class="t32_1">^</span>
<span class="line"></span></span>
</samp></pre></figure>
    <p><a href="https://github.com/ziglang/zig/issues/35">More compile errors for misleading whitespace are planned</a>.</p>
    

    <h3 id="Compile-Error-for-Pointless-Discards"><a href="#toc-Compile-Error-for-Pointless-Discards">Compile Error for Pointless Discards</a> <a class="hdr" href="#Compile-Error-for-Pointless-Discards">ยง</a></h3>

    <p>It is no longer possible to discard a local variable or parameter that is referenced:</p>
    <figure><figcaption class="zig-cap"><cite class="file">test.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">test</span> <span class="tok-str">&quot;example&quot;</span> {</span>
<span class="line">    <span class="tok-kw">var</span> x: <span class="tok-type">i32</span> = <span class="tok-number">1234</span>;</span>
<span class="line">    _ = x;</span>
<span class="line">    <span class="tok-kw">var</span> y = x;</span>
<span class="line">    _ = y;</span>
<span class="line">}</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig test test.zig</kbd></span>
<span class="line"><span class="t1_0">docgen_tmp/test.zig:3:9: </span><span class="t31_1">error: </span><span class="t1_0">pointless discard of local variable</span>
<span class="line"></span>    _ = x;</span>
<span class="line">        <span class="t32_1">^</span>
<span class="line"></span><span class="t1_0">docgen_tmp/test.zig:4:13: </span><span class="t36_1">note: </span><span class="t1_0">used here</span>
<span class="line"></span>    var y = x;</span>
<span class="line">            <span class="t32_1">^</span>
<span class="line"></span></span>
</samp></pre></figure>
    <img alt="Zero the Ziguana" src="https://ziglang.org/img/Zero_5.svg" style="height: 14em; float: right">
    <p>The fix is simple - delete the pointless discard. This compile error dovetails
    with the
    <a href="https://ziglang.org/download/0.9.0/release-notes.html#Compile-Errors-for-Unused-Locals">compile error for unused locals introduced in Zig 0.9.0</a>.
    Together, these compile errors ensure that when you are reading Zig code, whether it's
    yours or some rando's on the Internet, you can be assured that all locals are used somewhere,
    and that any discarded locals are otherwise unused.</p>
    <p>This is a divisive feature of Zig. Generally, those with large codebases favor the
    errors since they help prevent bugs and aid refactoring, while those with small codebases
    find these errors annoying and unproductive.</p>
    <p>There is an
    <a href="https://github.com/ziglang/zig/pull/12803">upcoming autofix feature</a> that
    unfortunately did not make it in time for 0.10.0 which can be used by those who find this
    pair of compile errors problematic for their workflow.</p>
    

    <h3 id="Disallow-Leading-Zeroes-in-Literals"><a href="#toc-Disallow-Leading-Zeroes-in-Literals">Disallow Leading Zeroes in Literals</a> <a class="hdr" href="#Disallow-Leading-Zeroes-in-Literals">ยง</a></h3>

    <p>This new compile error helps catch bugs (#11963) (#12417):</p>
    <figure><figcaption class="zig-cap"><cite class="file">test.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">var</span> x: <span class="tok-type">i032</span> = <span class="tok-number">1234</span>;</span>
<span class="line"><span class="tok-kw">var</span> y: <span class="tok-type">i32</span> = <span class="tok-number">01234</span>;</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig test test.zig</kbd></span>
<span class="line"><span class="t1_0">docgen_tmp/test.zig:1:8: </span><span class="t31_1">error: </span><span class="t1_0">primitive integer type 'i032' has leading zero</span>
<span class="line"></span>var x: i032 = 1234;</span>
<span class="line">       <span class="t32_1">^~~~</span>
<span class="line"></span><span class="t1_0">docgen_tmp/test.zig:2:14: </span><span class="t31_1">error: </span><span class="t1_0">number '01234' has leading zero</span>
<span class="line"></span>var y: i32 = 01234;</span>
<span class="line">             <span class="t32_1">^~~~~</span>
<span class="line"></span><span class="t1_0">docgen_tmp/test.zig:2:14: </span><span class="t36_1">note: </span><span class="t1_0">use '0o' prefix for octal literals</span>
<span class="line"></span></span>
</samp></pre></figure>
    <p>This caught two C header translation mistakes in <code>haiku.zig</code>.</p>
    

    <h3 id="More-Calling-Conventions"><a href="#toc-More-Calling-Conventions">More Calling Conventions</a> <a class="hdr" href="#More-Calling-Conventions">ยง</a></h3>

    <p>The Win64 calling convention is the same as Cdecl on <a href="#Windows">Windows</a>
    x64, however using the C calling convention as a stand-in for the Win64
    calling convention only works when the compiler targets Windows. This
    means, before Zig 0.10.0, one was not able to create a function with the
    Win64 calling convention when targeting an OS other than <a href="#Windows">Windows</a>.
    Now the Win64 calling convention can be used from Zig code on any target,
    using <code><span class="line">std.builtin.CallingConvention.Win64</span></code>
    (#11585).</p>
    <p>Also added in this release:</p>
    <ul>
      <li><code>PtxKernel</code></li>
      <li><code>AmdgpuKernel</code></li>
    </ul>
    <p>This is implemented in both the <a href="#Bootstrap-Compiler">Bootstrap Compiler</a> and
    <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a>.</p>
    

    <h3 id="Inline-Assembly"><a href="#toc-Inline-Assembly">Inline Assembly</a> <a class="hdr" href="#Inline-Assembly">ยง</a></h3>

    <p>The sub-project of parsing inline assembly in the <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a> has
    been delayed in the past due to the large tables of instructions that would be declared
    in source files, likely running into the unwieldly memory consumption properties of the
    <a href="#Bootstrap-Compiler">Bootstrap Compiler</a>. But now that we are shipping a <strong>stage3</strong>
    build, this obstacle has been overcome.</p>
    <p>Zig 0.9.x allowed <code><span class="line"><span class="tok-kw">comptime</span></span></code> expressions to produce the
    assembly template for inline assembly. For most of the 0.10.0 release cycle,
    Zig emitted a compile error when inline assembly source code was not a string literal,
    however, that restriction was lifted just before this 0.10.0 release.</p>
    <p>Zig is at a crossroads right now with regards to inline assembly. On one hand,
    there is this proposal:
    <a href="https://github.com/ziglang/zig/issues/10761">parse inline assembly syntax according to a set of dialects; integrate inline assembly more closely with the zig language</a></p>
    <p>Meanwhile, other stakeholders have rightfully pointed out that inline
    assembly abstractions based on string concatenation are easy to reason
    about and do not require any more language features added.</p>
    <p>Either way, Zig needs to gain the ability to parse inline assembly for all targets,
    so that it can get lowered to the <a href="#LLVM-15">LLVM</a> backend as well as the other
    <a href="#Code-Generation">Code Generation</a> backends, so that error handling, semantic analysis, and
    language features of inline assembly can be uniform across backends, something that
    would not be the case if LLVM is sometimes responsible for assembly code parsing and
    sometimes not.</p>
    <p>Whichever path Zig ends up going down, we will make sure to involve the users who
    will ultimately be affected, such as the
    <a href="https://microzig.tech/">Zig Embedded Group</a>, and the various folks
    who have started operating system projects written in Zig.</p>
    

    

    <h2 id="Bootstrap-Compiler"><a href="#toc-Bootstrap-Compiler">Bootstrap Compiler</a> <a class="hdr" href="#Bootstrap-Compiler">ยง</a></h2>

    <p>In the previous release, the main Zig compiler everybody used
    was the bootstrap compiler, written in C++, also known as "stage1".
    This release changes the default to become the <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a>, however,
    the legacy compiler can be selected with <code>-fstage1</code>.</p>
    <p>Despite the main focus being the <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a>,
    this release brings some improvements to the legacy compiler codebase as well:</p>
    <ul>
      <li>Fixed access of slice sentinel at comptime.</li>
      <li>Fixed <code><span class="line"><span class="tok-builtin">@errorName</span></span></code> null termination.</li>
      <li>Improved compilation speed of comptime format string parsing.</li>
      <li>C ABI fixes related to <code><span class="line"><span class="tok-kw">packed</span> <span class="tok-kw">struct</span></span></code> (#10499)</li>
      <li>Fixed <code><span class="line"><span class="tok-kw">packed</span> <span class="tok-kw">struct</span></span></code> (#11279)</li>
      <li>Fixed exporting of symbols on <a href="#WebAssembly">WebAssembly</a>.</li>
      <li>Fixed bigint_init_bigfloat for single-limb negative floats (#10592)</li>
      <li>Fixed big-endian handling in stage1 bigint_write_twos_complement (#10858)</li>
      <li>Removed the noisy "referenced here" error note. The <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a> has
        this implemented in a better way.</li>
      <li>Fixed saturating arithmetic on type <code><span class="line"><span class="tok-type">comptime_int</span></span></code> (#10393)</li>
      <li>Fixed x86 i128 C ABI for extern structs (#10834)</li>
      <li>Improve error message if error union is cast to payload (#10770)</li>
      <li>Implemented <code><span class="line"><span class="tok-type">f128</span></span></code> <code><span class="line"><span class="tok-builtin">@rem</span></span></code></li>
      <li>Fixed comptime saturation subtraction (#10870)</li>
      <li>Improved error message when casting tuples (#10913)</li>
      <li>Made type names more unique (#11226)</li>
      <li>Implemented casting from <code><span class="line"><span class="tok-type">u0</span></span></code></li>
      <li>Fixed crash when generating a particular error note</li>
      <li>Fixed crash when slicing string literal with sentinel</li>
      <li>Fixed referencing type info alignment causes error in unrelated function (#6944)</li>
      <li>Fixed building with Clang 16</li>
    </ul>
    

    <h2 id="Self-Hosted-Compiler"><a href="#toc-Self-Hosted-Compiler">Self-Hosted Compiler</a> <a class="hdr" href="#Self-Hosted-Compiler">ยง</a></h2>

    <img alt="Zero the Ziguana" src="https://ziglang.org/img/Zero_2.svg" style="height: 16em; float: right">
    <p>The main feature of this release cycle is the debut of the self-hosted compiler.
    It is now enabled by default, however the <a href="#Bootstrap-Compiler">Bootstrap Compiler</a> is available
    behind the <code>-fstage1</code> flag for those not ready to <a href="#How-to-Upgrade">upgrade</a>.
    </p>
    <p>This compiler implementation beats the older one in terms of
    performance and memory usage. Here are two data points for the compiler building itself
    (measured on an Intel(R) Core(TM) i9-9980HK CPU @ 2.40GHz):</p>
    <ul>
      <li><strong>Wall Clock Time</strong>: 43 seconds to 40 seconds (<strong>7% faster</strong>)</li>
      <li><strong>Peak RSS</strong>: 9.6 GiB to 2.8 GiB (<strong>3.5x less memory</strong> used)</li>
    </ul>

    <p>The new compiler implementation is slightly faster despite that, unlike
    the <a href="#Bootstrap-Compiler">Bootstrap Compiler</a>, it is capable of incremental compilation
    due to being tightly coupled with the <a href="#Self-Hosted-Linker">linker</a>.
    The bigger compilation speed wins will come with the <a href="#Code-Generation">Code Generation</a>
    backends that do not use <a href="#LLVM-15">LLVM</a>.</p>

    <p>The vast majority of the development effort of this release cycle was
    spent on this new compiler implementation, and therefore the <a href="#Language-Changes">Language Changes</a>
    are minimal.
    Instead, this new codebase lays the groundwork for <em>major enhancements</em>,
    mainly concerned with speeding up the edit/test/debug cycle. Now that the self-hosted
    compiler is no longer sucking up so much effort, you should expect to see significant,
    visible progress on these <a href="#Roadmap">Roadmap</a> milestones.</p>

    <p>Miscellaneous improvements:</p>
    <ul>
      <li>Introduce <code>--entry [name]</code> to set entrypoint symbol name (#10475)</li>
      <li><code>--strip</code> is renamed to <code>-fstrip</code> and <code>-fno-strip</code>
        is introduced. Stripping is enabled by default for
        <a href="https://ziglang.org/documentation/0.10.0/#ReleaseSmall">ReleaseSmall</a>
        and the flag is properly forwarded to LLD.</li>
      <li>Linking libc++ now implies also linking libc.</li>
      <li>CLI: ignore <code>-lgcc_s</code> when it is redundant with <a href="#compiler-rt">compiler-rt</a>.
        <br>
        For some projects, they can't help themselves, <code>-lgcc_s</code> ends up on the
        compiler command line even though it does not belong there. In Zig we
        know what <code>-lgcc_s</code> does. It's an alternative to <a href="#compiler-rt">compiler-rt</a>. With this
        commit we emit a warning telling that it is unnecessary to put such
        thing on the command line, and happily ignore it, since we will fulfill
        the dependency with <a href="#compiler-rt">compiler-rt</a>.
        <br>
        Since libgcc also provides exception handling functions, this flag on the linker
        line additionally links libunwind, which is also provided by Zig. Furthermore,
        linking libunwind implies linking libc.
      </li>
      <li>Added support for <code>-fbuild-id</code>, <code>-fno-build-id</code> (#3047)</li>
      <li>Enable full RELRO by default (#11825)</li>
      <li>Remove <code>-z noexecstack</code> option (#11826)</li>
      <li>Fixed crash when building static library in the same directory where Zig source is located (#11833)</li>
      <li>Improve error reporting when libc is missing.</li>
      <li>Added <code>ZIG_GLOBAL_CACHE_DIR</code> environment variable.</li>
      <li>Improved glibc version and dynamic linker detection (#12788)</li>
      <li><code>zig env</code> now includes a field for the native target.</li>
      <li>Improved header searchlist handling (#12888)</li>
      <li>Better error message for <code>--name</code> operand containing folder separator.</li>
      <li>Better template for <code>zig init-exe</code></li>
      <li>Native target detection now supports the case when <code>/usr/bin/env</code> happens
        to be a shell script. It will follow the shebang line until it finds an ELF file from
        which to learn the native dynamic linker path. Additionally, glibc version detection is
        improved.</li>
      <li>Fixed header searchlist priorities (#12888)</li>
      <li>Native include dir and lib dir are now aware of <a href="https://guix.gnu.org/">GUIX</a>
        environment variables (#13145)</li>
    </ul>

    <h3 id="Is-it-time-to-upgrade"><a href="#toc-Is-it-time-to-upgrade">Is it time to upgrade?</a> <a class="hdr" href="#Is-it-time-to-upgrade">ยง</a></h3>

    <p>
    One option you have is to simply wait for 0.10.1, or even 0.11.0, before
    attempting an upgrade. This gives you the smoothest experience, letting other,
    more brave souls, help with quality assurance before you get your hands dirty.
    There is no shame in this; do what works for you.
    </p>
    <p>
    If anything goes wrong in the upgrade, you can always start using <code>-fstage1</code> to
    get the old compiler, or put the equivalent in your build.zig file, so that
    your users can continue using <code>zig build</code> as usual.
    </p>
    <pre><code><span class="line">exe.use_stage1 = <span class="tok-null">true</span>;</span></code></pre>
    <p>
    The new compiler, sometimes called "stage2" or "stage3", is in many ways better
    than the old compiler (also called "stage1"), however it is not yet strictly
    better.
    </p>
    <p>
    All 0.10.x releases will have the <code>-fstage1</code> option; the upgrade only will
    become mandatory starting with 0.11.0. For some users, sticking with stage1 for
    the duration of the 0.10.x release will be the best move; for others, upgrading
    to self-hosted earlier will be right for them. This guide should help you
    decide which category you fall into.
    </p>

    <h4 id="Improvements-over-stage1"><a href="#toc-Improvements-over-stage1">Improvements over stage1</a> <a class="hdr" href="#Improvements-over-stage1">ยง</a></h4>

    <ul>
      <li>Many bugs are fixed, which could never be fixed in stage1 due to fundamental design flaws.</li>
      <li>Performance is minorly improved. For Zig, we observe 7% speed improvement in building itself.</li>
      <li>Memory usage is improved by a factor of about 3.5x. For Zig, building itself went from using 9.6 GiB to 2.8 GiB.</li>
      <li>The LLVM code generated is better. LLVM has an easier time optimizing. You likely will have small improvements in perf of your project.</li>
      <li>Many compile errors are more helpful.</li>
      <li>The core design is fundamentally different so that
        <a href="https://www.youtube.com/watch?v=AqDdWEiSwMM">game-changing performance enhancements become possible</a></li>
    </ul>
    

    <h4 id="Falling-short-of-stage1"><a href="#toc-Falling-short-of-stage1">Falling short of stage1</a> <a class="hdr" href="#Falling-short-of-stage1">ยง</a></h4>

    <p>Although we fully intend to make the self-hosted compiler a strict improvement, that is not the case yet.</p>
    <ul>
      <li>There are some fresh bugs.</li>
      <li>async/await is not done yet (#6025). Users of async/await cannot upgrade until a few more months when this feature is complete.</li>
      <li>Some compile errors are still missing.</li>
      <li>Some compile errors are less helpful.</li>
      <li>There are some patterns that generate
        <a href="https://github.com/ziglang/zig/issues/12713">worse runtime performance</a>.</li>
    </ul>
    
    

    <h3 id="How-to-Upgrade"><a href="#toc-How-to-Upgrade">How to Upgrade</a> <a class="hdr" href="#How-to-Upgrade">ยง</a></h3>

    <p>Assuming that you have decided the time is nigh, here are some tips.</p>
    <p>Although most of the language is the same between stage1 and self-hosted,
    there are some incompatibilities. There are two strategies to deal with
    this:</p>
    <ol>
      <li>Have a different branch for when using Zig self-hosted. Once you decide to commit to the upgrade, merge that branch into your main branch.</li>
      <li>Make the codebase support both stage1 and self-hosted at the same
        time using conditional compilation based on
        <a href="#stdbuiltinCompilerBackend">std.builtin.CompilerBackend</a>.</li>
    </ol>
    <p>In addition to the sub-sections below, see also these <a href="#Language-Changes">Language Changes</a> which
    should be considered part of the upgrade guide:</p>
    <ul>
      <li><a href="#Function-Pointers">Function Pointers</a></li>
      <li><a href="#Runtime-Array-Concatenation--Multiplication">Runtime Array Concatenation & Multiplication</a></li>
      <li><a href="#Address-of-Temporaries-Now-Produces-Const-Pointers">Address-of Temporaries Now Produces Const Pointers</a></li>
      <li><a href="#Pointers-to-Zero-Bit-Types">Pointers to Zero-Bit Types</a></li>
      <li><a href="#stdbuiltinCompilerBackend">std.builtin.CompilerBackend</a></li>
    </ul>

    <h4 id="Void-Literal-Syntax"><a href="#toc-Void-Literal-Syntax">Void Literal Syntax</a> <a class="hdr" href="#Void-Literal-Syntax">ยง</a></h4>

    <p><code><span class="line">{}</span></code> vs <code><span class="line">.{}</span></code></p>
    <p>This one is pretty simple:</p>
    <figure><figcaption class="zig-cap"><cite class="file">test.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">test</span> {</span>
<span class="line">    <span class="tok-kw">var</span> x: <span class="tok-type">void</span> = .{};</span>
<span class="line">    _ = x;</span>
<span class="line">}</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig test test.zig</kbd></span>
<span class="line"><span class="t1_0">docgen_tmp/test.zig:2:20: </span><span class="t31_1">error: </span><span class="t1_0">expected type 'void', found '@TypeOf(.{})'</span>
<span class="line"></span>    var x: void = .{};</span>
<span class="line">                  <span class="t32_1">~^~</span>
<span class="line"></span></span>
</samp></pre></figure>

    <p><code><span class="line">.{}</span></code> is a struct literal; <code><span class="line">{}</span></code> is a void value. It has always been a bug for the <a href="#Bootstrap-Compiler">Bootstrap Compiler</a> to accept this code. Just change <code><span class="line">.{}</span></code> to <code><span class="line">{}</span></code>.</p>

    <pre><code>-    var x: void = .{};
+    var x: void = {};</code></pre>
    

    <h4 id="Escaped-Pointer-to-Parameter"><a href="#toc-Escaped-Pointer-to-Parameter">Escaped Pointer to Parameter</a> <a class="hdr" href="#Escaped-Pointer-to-Parameter">ยง</a></h4>

    <figure><figcaption class="zig-cap"><cite class="file">test.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">const</span> std = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;std&quot;</span>);</span>
<span class="line"><span class="tok-kw">const</span> expect = std.testing.expect;</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">test</span> <span class="tok-str">&quot;escaped pointer to parameter&quot;</span> {</span>
<span class="line">    <span class="tok-kw">var</span> s: S = .{ .field = <span class="tok-number">1234</span> };</span>
<span class="line">    <span class="tok-kw">const</span> value = s.foo();</span>
<span class="line">    <span class="tok-kw">try</span> expect(value == &amp;s.field);</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">const</span> S = <span class="tok-kw">struct</span> {</span>
<span class="line">    field: <span class="tok-type">i32</span>,</span>
<span class="line"></span>
<span class="line">    <span class="tok-kw">fn</span> <span class="tok-fn">foo</span>(s: S) *<span class="tok-kw">const</span> <span class="tok-type">i32</span> {</span>
<span class="line">        <span class="tok-kw">return</span> &amp;s.field; <span class="tok-comment">// XXX: escaped pointer to parameter</span></span>
<span class="line">    }</span>
<span class="line">};</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig test test.zig</kbd></span>
<span class="line">1/1 test.escaped pointer to parameter... FAIL (TestUnexpectedResult)</span>
<span class="line"><span class="t1_0">/home/andy/Downloads/zig/lib/std/testing.zig:347:14</span>: <span class="t2_0">0x211acf in expect (test)</span></span>
<span class="line">    if (!ok) return error.TestUnexpectedResult;</span>
<span class="line">             <span class="t32_1">^</span></span>
<span class="line"><span class="t1_0">docgen_tmp/test.zig:7:5</span>: <span class="t2_0">0x211c07 in test.escaped pointer to parameter (test)</span></span>
<span class="line">    try expect(value == &amp;s.field);</span>
<span class="line">    <span class="t32_1">^</span></span>
<span class="line">0 passed; 0 skipped; 1 failed.</span>
<span class="line">error: the following test command failed with exit code 1:</span>
<span class="line">/home/andy/.cache/zig/o/da89401b90ed2a45f2611608594c9a97/test</span>
</samp></pre></figure>
    <p>This test passes with the <a href="#Bootstrap-Compiler">Bootstrap Compiler</a> despite having a
    critical bug: a temporary is created by taking the address of the the
    <a href="/documentation/0.10.0/#Pass-by-value-Parameters">pass-by-value parameter</a>
    which is then returned from the function.</p>

    <p>The legacy compiler is naive, always passing structs by pointer in code such as this.
    Meanwhile, the self-hosted compiler efficiently takes advantage of smaller
    arguments such as this, passing them truly by value, revealing the bug.</p>

    <p>Hopefully in the future Zig will have
    <a href="https://github.com/ziglang/zig/issues/3180">runtime safety for this</a>,
    however, currently this will manifest as a use-after-free. So if you find a
    pointer to bogus data, double check that the pointer was not created this way.</p>

    <p>Once the problem has been identified, the fix is simple:</p>

    <pre><code>-    fn foo(s: S) *const i32 {
+    fn foo(s: *const S) *const i32 {</code></pre>
    
    

    <h3 id="C-ABI-Compatibility"><a href="#toc-C-ABI-Compatibility">C ABI Compatibility</a> <a class="hdr" href="#C-ABI-Compatibility">ยง</a></h3>

    <p>C ABI compatibility is notoriously difficult when using <a href="#LLVM-15">LLVM</a>. In
    Zig 0.9.x, there were several major miscompilations for functions with C calling convention,
    especially when using an architecture other than x86_64.</p>
    <p>Thanks to a nicer abstraction for dealing with the C ABI, plus some good
    old-fashioned hard work, in 0.10.0, Zig has near full C ABI compliance on several targets:</p>
    <ul>
      <li>x86_64 - close to 100%</li>
      <li>aarch64 - close to 100%</li>
      <li>wasm32 - close to 100%</li>
      <li>arm, x86 - complex numbers are not handled correctly yet</li>
    </ul>
    <p>You can have a look at the
      <a href="https://github.com/ziglang/zig/blob/0.10.0/test/tests.zig#L1272-L1349">new test harness</a>
      to see what exactly is covered. Each of these targets are now tested with
      every CI run with QEMU.</p>
    

    <h3 id="C-Translation"><a href="#toc-C-Translation">C Translation</a> <a class="hdr" href="#C-Translation">ยง</a></h3>

    <ul>
      <li>Handle typedef'ed void return type for functions (#10356)</li>
      <li>Fixed macro define of float constant using scientific notation. Fixes
        compiler attempting to use null value when translating macro define of
        float constant using scientific notation with no decimal point.</li>
      <li>Fixed issues translating macro define of hex float constant<ul>
          <li>Fixed incorrect result when the first digit after the decimal point is not 0-9 - eg 0x0.ap0</li>
          <li>Fixed compiler panic when the number starts with <code>0X</code> with a capital <code>X</code> - eg 0X0p0</li>
          <li>Fixed compiler panic when the number has a decimal point immediately after <code>0x</code> - eg 0x.0p0</li>
        </ul>
      </li>
      <li>Improve error messages when expecting specific tokens.</li>
      <li>Add support for cast-to-union (#10955)</li>
      <li>Use nested scope for comma operator in macros (#11040)</li>
      <li>Check child records for opaque types (#10461)</li>
      <li>Fixed cast or call macro with parenthesis (#11962)</li>
      <li>Do not try to get rid of do while loop because it might contain
        breaks and continues (#11994)</li>
      <li>Take address of functions before passing them to <code><span class="line"><span class="tok-builtin">@ptrToInt</span></span></code> (#12194)</li>
      <li>Use correct number of initializers for vectors (#12264)</li>
      <li>Fixed alignment in pointer casts</li>
      <li>Don't add self-defined macros to global name table (#12471)</li>
      <li>Convert tabs to <code>\t</code> in object-like macro string literals (#12549)</li>
      <li>Escape non-ASCII characters that appear in macros (#12784)</li>
      <li>Translate clang packed struct C into Zig extern struct with align(1) (#12745)</li>
      <li>Fixed function pointers, add cast to subscripts in macros (#13126)</li>
      <li>Added missing builtins used by CRuby</li>
    </ul>
    

    <h3 id="Cache-System"><a href="#toc-Cache-System">Cache System</a> <a class="hdr" href="#Cache-System">ยง</a></h3>

    <p>Zig now places the <code>zig-cache</code> directory next to
    <code>build.zig</code>. If no <code>build.zig</code> file is found, it
    falls back to using the global cache directory (#11672).</p>

    <p>Internally, there are now two <strong>cache modes</strong>:
    <em>incremental</em> and <em>whole</em>. <strong>Whole cache mode</strong> is what
    everyone is used to from previous Zig releases. It relies on hashing the full set of
    inputs, including every source file that is directly or indirectly imported.
    <strong>Incremental cache mode</strong> is new and is based on re-opening
    existing build artifacts and rebuilding only the modified symbols. Although
    Zig's incremental compilation system is still experimental, it can be
    enabled with the <code>--watch</code> flag.</p>

    <p>Incremental cache mode is the default for the
    <a href="#Code-Generation">self-hosted code generation backends</a>, and for the
    <a href="#LLVM-15">LLVM</a> backend when not using the <a href="#Build-System">Build System</a>. Because the compiler
    does not yet serialize and restore its state, without the <code>--watch</code> flag,
    this will result in recompiling with every invocation of the compiler. On the other hand,
    it results in less garbage accumulating into the <code>zig-cache</code> directory.</p>
    

    <h3 id="Safety-for-Switching-on-Corrupted-Enums"><a href="#toc-Safety-for-Switching-on-Corrupted-Enums">Safety for Switching on Corrupted Enums</a> <a class="hdr" href="#Safety-for-Switching-on-Corrupted-Enums">ยง</a></h3>

    <p>The following code, when run with Zig 0.9.1, will invoke
    <em>undefined behavior</em>:</p>
    <figure><figcaption class="zig-cap"><cite class="file">test.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">const</span> std = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;std&quot;</span>);</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">const</span> E = <span class="tok-kw">enum</span>(<span class="tok-type">u32</span>) {</span>
<span class="line">    one = <span class="tok-number">1</span>,</span>
<span class="line">    two = <span class="tok-number">2</span>,</span>
<span class="line">};</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">test</span> <span class="tok-str">&quot;example&quot;</span> {</span>
<span class="line">    <span class="tok-kw">var</span> a: E = .two;</span>
<span class="line">    <span class="tok-builtin">@ptrCast</span>(*<span class="tok-type">u32</span>, &amp;a).* = <span class="tok-number">255</span>;</span>
<span class="line">    <span class="tok-kw">switch</span> (a) {</span>
<span class="line">        .one =&gt; <span class="tok-builtin">@panic</span>(<span class="tok-str">&quot;one&quot;</span>),</span>
<span class="line">        <span class="tok-kw">else</span> =&gt; <span class="tok-kw">return</span>,</span>
<span class="line">    }</span>
<span class="line">}</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig test test.zig</kbd></span>
<span class="line">1/1 test.example... thread 614358 panic: switch on corrupt value</span>
<span class="line"><span class="t1_0">docgen_tmp/test.zig:12:17</span>: <span class="t2_0">0x211b16 in test.example (test)</span></span>
<span class="line">        .one =&gt; @panic(&quot;one&quot;),</span>
<span class="line">                <span class="t32_1">^</span></span>
<span class="line"><span class="t1_0">/home/andy/Downloads/zig/lib/test_runner.zig:62:28</span>: <span class="t2_0">0x213178 in main (test)</span></span>
<span class="line">        } else test_fn.func();</span>
<span class="line">                           <span class="t32_1">^</span></span>
<span class="line"><span class="t1_0">/home/andy/Downloads/zig/lib/std/start.zig:568:22</span>: <span class="t2_0">0x21241d in posixCallMainAndExit (test)</span></span>
<span class="line">            root.main();</span>
<span class="line">                     <span class="t32_1">^</span></span>
<span class="line"><span class="t1_0">/home/andy/Downloads/zig/lib/std/start.zig:340:5</span>: <span class="t2_0">0x211ee2 in _start (test)</span></span>
<span class="line">    @call(.{ .modifier = .never_inline }, posixCallMainAndExit, .{});</span>
<span class="line">    <span class="t32_1">^</span></span>
<span class="line">error: the following test command crashed:</span>
<span class="line">/home/andy/.cache/zig/o/da89401b90ed2a45f2611608594c9a97/test</span>
</samp></pre></figure>
    <p>As you can see, with Zig 0.10.0, this problem is caught with a safety check.
    A future enhancement will further refine this to
    <a href="https://github.com/ziglang/zig/issues/13295">make the stack trace point at the switch expression rather than the prong</a>.</p>
    

    <h3 id="Referenced-By-Traces"><a href="#toc-Referenced-By-Traces">Referenced-By Traces</a> <a class="hdr" href="#Referenced-By-Traces">ยง</a></h3>

    <p>You can find referenced-by traces in a few other example snippets throughout this
    document, but here is illustrated a real world example that was particularly helpful:</p>

    <figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>stage3/bin/zig build -p wasi -Dskip-install-lib-files -Dtarget=wasm32-wasi</kbd></span>
<span class="line"><span class="t1_0">/home/andy/Downloads/zig/lib/std/os.zig:110:28: </span><span class="t31_1">error: </span><span class="t1_0">root struct of file 'os.wasi' has no member named 'PATH_MAX'</span></span>
<span class="line">pub const PATH_MAX = system.PATH_MAX;</span>
<span class="line t32_1">                     ~~~~~~^~~~~~~~~</span>
<span class="line t2_0">referenced by:</span>
<span class="line t2_0">    calcInstallNameLen: /home/andy/Downloads/zig/src/link/MachO.zig:3540:53</span>
<span class="line t2_0">    calcLCsSize: /home/andy/Downloads/zig/src/link/MachO.zig:3577:24</span>
<span class="line t2_0">    remaining reference traces hidden; use '-freference-trace' to see all reference traces</span>
</samp></pre></figure>
    <p>Here I tried to build the <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a> for <a href="#WASI">WASI</a> but ran
    into some code that incorrectly tried to reference <code><span class="line">std.os.PATH_MAX</span></code>
    even though no such definition exists for the WASI target.</p>
    <p>You can see that without the referenced-by trace,
    <a href="https://github.com/ziglang/zig/issues/13229">this bug</a>
    would have been annoying to fix, but with it,
    <a href="https://github.com/ziglang/zig/commit/a4eb221b9ef7dab8fa1c6cc07c7891e25d98d2b6">the fix was trivial</a>.</p>
    

    <h3 id="Error-Return-Traces"><a href="#toc-Error-Return-Traces">Error Return Traces</a> <a class="hdr" href="#Error-Return-Traces">ยง</a></h3>


    <h4 id="Unwrapping-Errors-in-Switch"><a href="#toc-Unwrapping-Errors-in-Switch">Unwrapping Errors in Switch</a> <a class="hdr" href="#Unwrapping-Errors-in-Switch">ยง</a></h4>

    <p>A small quality-of-life improvement Veikka thought of while trying to
    figure out where an <code><span class="line"><span class="tok-kw">error</span>.GenericPoison</span></code> was coming from (#12889).
    Example situation:</p>
    <figure><figcaption class="zig-cap"><cite class="file">test.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">fn</span> <span class="tok-fn">foo</span>() !<span class="tok-type">void</span> {</span>
<span class="line">    <span class="tok-kw">return</span> <span class="tok-kw">error</span>.Foo;</span>
<span class="line">}</span>
<span class="line"><span class="tok-kw">fn</span> <span class="tok-fn">bar</span>() !<span class="tok-type">void</span> {</span>
<span class="line">    <span class="tok-kw">try</span> foo();</span>
<span class="line">}</span>
<span class="line"><span class="tok-kw">fn</span> <span class="tok-fn">baz</span>() <span class="tok-type">void</span> {</span>
<span class="line">    <span class="tok-comment">// bar() catch unreachable;</span></span>
<span class="line">    <span class="tok-comment">// bar() catch @panic(&quot;foo&quot;);</span></span>
<span class="line">    <span class="tok-comment">// const S = struct {</span></span>
<span class="line">    <span class="tok-comment">//     const S = struct {</span></span>
<span class="line">    <span class="tok-comment">//         const fooo = &quot;foo&quot;;</span></span>
<span class="line">    <span class="tok-comment">//     };</span></span>
<span class="line">    <span class="tok-comment">// };</span></span>
<span class="line">    bar() <span class="tok-kw">catch</span> |err| <span class="tok-kw">switch</span> (err) {</span>
<span class="line">        <span class="tok-comment">// error.Foo =&gt; @panic(S.S.fooo),</span></span>
<span class="line">        <span class="tok-kw">error</span>.Foo =&gt; <span class="tok-kw">unreachable</span>,</span>
<span class="line">    };</span>
<span class="line">}</span>
<span class="line"><span class="tok-kw">test</span> {</span>
<span class="line">    baz();</span>
<span class="line">}</span></code></pre></figure><figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig test test.zig</kbd></span>
<span class="line">1/1 test_0... thread 614402 panic: attempt to unwrap error: Foo</span>
<span class="line"><span class="t1_0">docgen_tmp/test.zig:2:5</span>: <span class="t2_0">0x212448 in foo (test)</span></span>
<span class="line">    return error.Foo;</span>
<span class="line">    <span class="t32_1">^</span></span>
<span class="line"><span class="t1_0">docgen_tmp/test.zig:5:5</span>: <span class="t2_0">0x212543 in bar (test)</span></span>
<span class="line">    try foo();</span>
<span class="line">    <span class="t32_1">^</span></span>
<span class="line"><span class="t1_0">docgen_tmp/test.zig:17:22</span>: <span class="t2_0">0x211b21 in baz (test)</span></span>
<span class="line">        error.Foo =&gt; unreachable,</span>
<span class="line">                     <span class="t32_1">^</span></span>
<span class="line"><span class="t1_0">docgen_tmp/test.zig:21:8</span>: <span class="t2_0">0x211a98 in test_0 (test)</span></span>
<span class="line">    baz();</span>
<span class="line">       <span class="t32_1">^</span></span>
<span class="line"><span class="t1_0">/home/andy/Downloads/zig/lib/test_runner.zig:62:28</span>: <span class="t2_0">0x2132d8 in main (test)</span></span>
<span class="line">        } else test_fn.func();</span>
<span class="line">                           <span class="t32_1">^</span></span>
<span class="line"><span class="t1_0">/home/andy/Downloads/zig/lib/std/start.zig:568:22</span>: <span class="t2_0">0x21240d in posixCallMainAndExit (test)</span></span>
<span class="line">            root.main();</span>
<span class="line">                     <span class="t32_1">^</span></span>
<span class="line"><span class="t1_0">/home/andy/Downloads/zig/lib/std/start.zig:340:5</span>: <span class="t2_0">0x211ed2 in _start (test)</span></span>
<span class="line">    @call(.{ .modifier = .never_inline }, posixCallMainAndExit, .{});</span>
<span class="line">    <span class="t32_1">^</span></span>
<span class="line">error: the following test command crashed:</span>
<span class="line">/home/andy/.cache/zig/o/da89401b90ed2a45f2611608594c9a97/test</span>
</samp></pre></figure>
    <p>Before, it did this instead:</p>
    <figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">Test [1/1] test_0... thread 18432 panic: reached unreachable code</span>
<span class="line">./a.zig:17:22: 0x20f0fc in baz (test)</span>
<span class="line">        error.Foo => unreachable,</span>
<span class="line">                     ^</span>
<span class="line">./a.zig:21:8: 0x20f078 in test_0 (test)</span>
<span class="line">    baz();</span>
<span class="line">       ^</span>
<span class="line">/home/vexu/Documents/zig/zig/lib/test_runner.zig:79:28: 0x2105b5 in main (test)</span>
<span class="line">        } else test_fn.func();</span>
<span class="line">                           ^</span>
<span class="line">/home/vexu/Documents/zig/zig/lib/std/start.zig:568:22: 0x20f9bd in posixCallMainAndExit (test)</span>
<span class="line">            root.main();</span>
<span class="line">                     ^</span>
<span class="line">/home/vexu/Documents/zig/zig/lib/std/start.zig:340:5: 0x20f3c2 in _start (test)</span>
<span class="line">    @call(.{ .modifier = .never_inline }, posixCallMainAndExit, .{});</span>
<span class="line">    ^</span>
<span class="line">error: the following test command crashed:</span>
</samp></pre></figure>

    <p>This also makes <code><span class="line"><span class="tok-builtin">@panic</span></span></code> show error return trace in
    these same situations which you can test by uncommenting lines in the
    example.</p>
    

    <h4 id="Removal-of-Useless-Stack-Frames"><a href="#toc-Removal-of-Useless-Stack-Frames">Removal of Useless Stack Frames</a> <a class="hdr" href="#Removal-of-Useless-Stack-Frames">ยง</a></h4>

    <p>This was an
    <a href="https://github.com/ziglang/zig/issues/1923">old issue that plagued Zig developers for a long time</a>. We have <a href="#Cody-Tapscott-Joins-the-Core-Zig-Team">Cody Tapscott</a> to thank
    for solving it.</p>
    <p>Error return traces now have a basic ownership-style algorithm for
    errors (#12837). It guarantees that error return frames follow a strict stack
    discipline, which we need to correctly accumulate them in a single
    stack-per-thread.</p>
    <p>Error return traces <em>live</em> when:</p>
    <ul>
      <li>stored in a <code><span class="line"><span class="tok-kw">const</span></span></code> variable</li>
      <li>handled in a <code><span class="line"><span class="tok-kw">catch</span> { ... }</span></code> or <code><span class="line"><span class="tok-kw">else</span> |err| { ... }</span></code> block</li>
      <li>propagated to caller via <code><span class="line"><span class="tok-kw">return</span></span></code> or <code><span class="line"><span class="tok-kw">try</span></span></code></li>
      <li>passed to a function as an argument</li>
    </ul>
    <p>Error return traces are <em>killed</em> when:</p>
    <ul>
      <li>stored in a mutable <code><span class="line"><span class="tok-kw">var</span></span></code></li>
      <li>leaving a <code><span class="line"><span class="tok-kw">catch</span></span></code> or <code><span class="line"><span class="tok-kw">else</span> |err|</span></code> block with a non-error value</li>
      <li>the <code><span class="line"><span class="tok-kw">const</span></span></code> variable associated with an error trace falls out of scope</li>
      <li>a function receives an error as an argument and returns a non-error</li>
    </ul>
    <p>Putting the code snippet aside, here is a code snippet that tries to show most of this together:</p>
    <pre><code><span class="line"><span class="tok-kw">fn</span> <span class="tok-fn">foo</span>() !<span class="tok-type">void</span> {</span>
<span class="line">    eat_dinner() <span class="tok-kw">catch</span> {</span>
<span class="line">        <span class="tok-comment">// Begin error handling here</span></span>
<span class="line">        find_recipe() <span class="tok-kw">catch</span> {};        <span class="tok-comment">// find_recipe() is removed from trace upon leaving this catch block</span></span>
<span class="line">        <span class="tok-kw">if</span> (cond)</span>
<span class="line">            <span class="tok-kw">return</span> <span class="tok-kw">error</span>.HouseOnFire;  <span class="tok-comment">//      error result: Includes eat_dinner() in the error return trace, but not find_recipe()</span></span>
<span class="line">        <span class="tok-kw">try</span> cook_recipe();             <span class="tok-comment">//      error result: If this fails, the error return trace includes eat_dinner(), followed by cook_recipe()</span></span>
<span class="line">    }</span>
<span class="line">    <span class="tok-comment">// We made it out of another catch block, eat_dinner() is removed from the trace </span></span>
<span class="line">    <span class="tok-kw">return</span> <span class="tok-kw">error</span>.MyInlawsAreComing;    <span class="tok-comment">//      error result: Error trace starts fresh here</span></span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"><span class="tok-kw">fn</span> <span class="tok-fn">bar</span>() !<span class="tok-type">void</span> {</span>
<span class="line">    <span class="tok-comment">// In addition to returning from within the block, you can pass</span></span>
<span class="line">    <span class="tok-comment">// the result to an external return, try, catch, or if:</span></span>
<span class="line">    <span class="tok-kw">return</span> try_me() <span class="tok-kw">catch</span> |err| <span class="tok-kw">switch</span>(err) {</span>
<span class="line">        <span class="tok-kw">error</span>.IgnorableError =&gt; <span class="tok-null">null</span>,   <span class="tok-comment">// non-error result: Pops try_me() from the error return trace</span></span>
<span class="line">        <span class="tok-kw">error</span>.ImportantError =&gt; b: {</span>
<span class="line">            <span class="tok-kw">break</span> :b <span class="tok-kw">error</span>.FatalError;  <span class="tok-comment">//     error result: Includes try_me() in the error return trace</span></span>
<span class="line">        },</span>
<span class="line">        <span class="tok-kw">else</span> =&gt; err,                    <span class="tok-comment">//     error result: Includes try_me() in the error return trace</span></span>
<span class="line">    };</span>
<span class="line">}</span>
<span class="line"><span class="tok-kw">test</span> {</span>
<span class="line">    <span class="tok-kw">try</span> expectError(<span class="tok-kw">error</span>.FatalError, bar());         <span class="tok-comment">// If this fails, `bar()` appears in the error return trace</span></span>
<span class="line">    <span class="tok-kw">try</span> expectError(<span class="tok-kw">error</span>.MyInlawsAreComing, foo());  <span class="tok-comment">// If this fails, `foo()` appears in the error return trace (`bar` was already popped)</span></span>
<span class="line">}</span></code></pre>
    <p>Here is a real world example. Before, one might get debug output that looks like this:</p>
    <figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>~/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/zig run tools/copy-from-glibc.zig -- ~/glibc/multi-2.32/install/glibcs headers 2.32</kbd></span>
<span class="line">error: FileNotFound</span>
<span class="line">tools/copy-from-glibc.zig:21:23: 0x218e39 in main (copy-from-glibc)</span>
<span class="line">        var sub_dir = try glibcs_dir.openIterableDir(sub_path, .{});</span>
<span class="line">                      ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:2755:19: 0x21f936 in mkdiratZ (copy-from-glibc)</span>
<span class="line">        .EXIST => return error.PathAlreadyExists,</span>
<span class="line">                  ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:2715:9: 0x218537 in mkdirat (copy-from-glibc)</span>
<span class="line">        return mkdiratZ(dir_fd, &sub_dir_path_c, mode);</span>
<span class="line">        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/fs.zig:1402:9: 0x21842b in makeDir (copy-from-glibc)</span>
<span class="line">        try os.mkdirat(self.fd, sub_path, default_new_dir_mode);</span>
<span class="line">        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:2755:19: 0x21f936 in mkdiratZ (copy-from-glibc)</span>
<span class="line">        .EXIST => return error.PathAlreadyExists,</span>
<span class="line">                  ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:2715:9: 0x218537 in mkdirat (copy-from-glibc)</span>
<span class="line">        return mkdiratZ(dir_fd, &sub_dir_path_c, mode);</span>
<span class="line">        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/fs.zig:1402:9: 0x21842b in makeDir (copy-from-glibc)</span>
<span class="line">        try os.mkdirat(self.fd, sub_path, default_new_dir_mode);</span>
<span class="line">        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:2755:19: 0x21f936 in mkdiratZ (copy-from-glibc)</span>
<span class="line">        .EXIST => return error.PathAlreadyExists,</span>
<span class="line">                  ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:2715:9: 0x218537 in mkdirat (copy-from-glibc)</span>
<span class="line">        return mkdiratZ(dir_fd, &sub_dir_path_c, mode);</span>
<span class="line">        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/fs.zig:1402:9: 0x21842b in makeDir (copy-from-glibc)</span>
<span class="line">        try os.mkdirat(self.fd, sub_path, default_new_dir_mode);</span>
<span class="line">        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:2755:19: 0x21f936 in mkdiratZ (copy-from-glibc)</span>
<span class="line">        .EXIST => return error.PathAlreadyExists,</span>
<span class="line">                  ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:2715:9: 0x218537 in mkdirat (copy-from-glibc)</span>
<span class="line">        return mkdiratZ(dir_fd, &sub_dir_path_c, mode);</span>
<span class="line">        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/fs.zig:1402:9: 0x21842b in makeDir (copy-from-glibc)</span>
<span class="line">        try os.mkdirat(self.fd, sub_path, default_new_dir_mode);</span>
<span class="line">        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:2755:19: 0x21f936 in mkdiratZ (copy-from-glibc)</span>
<span class="line">        .EXIST => return error.PathAlreadyExists,</span>
<span class="line">                  ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:2715:9: 0x218537 in mkdirat (copy-from-glibc)</span>
<span class="line">        return mkdiratZ(dir_fd, &sub_dir_path_c, mode);</span>
<span class="line">        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/fs.zig:1402:9: 0x21842b in makeDir (copy-from-glibc)</span>
<span class="line">        try os.mkdirat(self.fd, sub_path, default_new_dir_mode);</span>
<span class="line">        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:2755:19: 0x21f936 in mkdiratZ (copy-from-glibc)</span>
<span class="line">        .EXIST => return error.PathAlreadyExists,</span>
<span class="line">                  ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:2715:9: 0x218537 in mkdirat (copy-from-glibc)</span>
<span class="line">        return mkdiratZ(dir_fd, &sub_dir_path_c, mode);</span>
<span class="line">        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/fs.zig:1402:9: 0x21842b in makeDir (copy-from-glibc)</span>
<span class="line">        try os.mkdirat(self.fd, sub_path, default_new_dir_mode);</span>
<span class="line">        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:2755:19: 0x21f936 in mkdiratZ (copy-from-glibc)</span>
<span class="line">        .EXIST => return error.PathAlreadyExists,</span>
<span class="line">                  ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:2715:9: 0x218537 in mkdirat (copy-from-glibc)</span>
<span class="line">        return mkdiratZ(dir_fd, &sub_dir_path_c, mode);</span>
<span class="line">        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/fs.zig:1402:9: 0x21842b in makeDir (copy-from-glibc)</span>
<span class="line">        try os.mkdirat(self.fd, sub_path, default_new_dir_mode);</span>
<span class="line">        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:2755:19: 0x21f936 in mkdiratZ (copy-from-glibc)</span>
<span class="line">        .EXIST => return error.PathAlreadyExists,</span>
<span class="line">                  ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:2715:9: 0x218537 in mkdirat (copy-from-glibc)</span>
<span class="line">        return mkdiratZ(dir_fd, &sub_dir_path_c, mode);</span>
<span class="line">        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/fs.zig:1402:9: 0x21842b in makeDir (copy-from-glibc)</span>
<span class="line">        try os.mkdirat(self.fd, sub_path, default_new_dir_mode);</span>
<span class="line">        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:2755:19: 0x21f936 in mkdiratZ (copy-from-glibc)</span>
<span class="line">        .EXIST => return error.PathAlreadyExists,</span>
<span class="line">                  ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:2715:9: 0x218537 in mkdirat (copy-from-glibc)</span>
<span class="line">        return mkdiratZ(dir_fd, &sub_dir_path_c, mode);</span>
<span class="line">        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/fs.zig:1402:9: 0x21842b in makeDir (copy-from-glibc)</span>
<span class="line">        try os.mkdirat(self.fd, sub_path, default_new_dir_mode);</span>
<span class="line">        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/os.zig:1689:23: 0x24b498 in openatZ (copy-from-glibc)</span>
<span class="line">            .NOENT => return error.FileNotFound,</span>
<span class="line">                      ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/fs.zig:1747:25: 0x23dbf1 in openDirFlagsZ (copy-from-glibc)</span>
<span class="line">            else => |e| return e,</span>
<span class="line">                        ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/fs.zig:1717:13: 0x21e0a6 in openDirZ (copy-from-glibc)</span>
<span class="line">            return self.openDirFlagsZ(sub_path_c, os.O.DIRECTORY | os.O.RDONLY | os.O.CLOEXEC | symlink_flags);</span>
<span class="line">            ^</span>
<span class="line">/home/andy/tmp/zig-linux-x86_64-0.10.0-dev.4474+b41b35f57/lib/std/fs.zig:1654:40: 0x2180e5 in openIterableDir (copy-from-glibc)</span>
<span class="line">            return IterableDir{ .dir = try self.openDirZ(&sub_path_c, args, true) };</span>
<span class="line">                                       ^</span>
</samp></pre></figure>
    <p>After this improvement, we see this instead:</p>
    <figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>~/zig-bootstrap/out/host/bin/zig run tools/copy-from-glibc.zig -- ~/glibc/multi-2.32/install/glibcs headers 2.32</kbd></span>
<span class="line">error: FileNotFound</span>
<span class="line">/home/andy/zig-bootstrap/out/host/lib/zig/std/os.zig:1689:23: 0x24c038 in openatZ (copy-from-glibc)</span>
<span class="line">            .NOENT => return error.FileNotFound,</span>
<span class="line">                      ^</span>
<span class="line">/home/andy/zig-bootstrap/out/host/lib/zig/std/fs.zig:1747:25: 0x23e4e8 in openDirFlagsZ (copy-from-glibc)</span>
<span class="line">            else => |e| return e,</span>
<span class="line">                        ^</span>
<span class="line">/home/andy/zig-bootstrap/out/host/lib/zig/std/fs.zig:1717:13: 0x21e406 in openDirZ (copy-from-glibc)</span>
<span class="line">            return self.openDirFlagsZ(sub_path_c, os.O.DIRECTORY | os.O.RDONLY | os.O.CLOEXEC | symlink_flags);</span>
<span class="line">            ^</span>
<span class="line">/home/andy/zig-bootstrap/out/host/lib/zig/std/fs.zig:1654:40: 0x2182d5 in openIterableDir (copy-from-glibc)</span>
<span class="line">            return IterableDir{ .dir = try self.openDirZ(&sub_path_c, args, true) };</span>
<span class="line">                                       ^</span>
<span class="line">tools/copy-from-glibc.zig:21:23: 0x219059 in main (copy-from-glibc)</span>
<span class="line">        var sub_dir = try glibcs_dir.openIterableDir(sub_path, .{});</span>
<span class="line">                      ^</span>
</samp></pre></figure>

    
    

    <h3 id="Code-Generation"><a href="#toc-Code-Generation">Code Generation</a> <a class="hdr" href="#Code-Generation">ยง</a></h3>

    <p>While the default backend is still <a href="#LLVM-15">LLVM</a>, Zig is starting
    to invest in providing its own code generation. The primary motivation for this
    is <strong>compilation speed</strong>. However, there is also a benefit to providing
    a bootstrapping process that does not depend on C++, CMake, and Python, all of which 
    LLVM require in order to build. Furthermore, there is value in providing healthy
    competition so that compiler backends do not become a monoculture.</p>
    <p>
    As a point of comparison, a stripped release build of Zig <em>with LLVM</em>
    is 169 MiB, while <em>without LLVM</em> (but with
    all the code generation backends you see here) it is 4.4 MiB.
    </p>

    <h4 id="WebAssembly-Backend"><a href="#toc-WebAssembly-Backend">WebAssembly Backend</a> <a class="hdr" href="#WebAssembly-Backend">ยง</a></h4>

    <p>TODO get release notes from luuk</p>
    

    <h4 id="C-Backend"><a href="#toc-C-Backend">C Backend</a> <a class="hdr" href="#C-Backend">ยง</a></h4>

    <p>A new contributor jacobly0 came out of nowhere and did a massive amount of work
    to Zig's C backend, reaching these notable milestones:</p>
    <ul>
      <li>The C backend is now passing <strong>1198/1365 (88%)</strong> of the behavior tests.</li>
      <li>The official <a href="/documentation/0.10.0/#Hello-World">hello world</a>
        now works on at least <code>x86_64-linux</code> (with and without libc).</li>
      <li>The test runner now prints output to the console.</li>
    </ul>
    <p>Additionally, in this release zig.h moved to become an installation
    file. Instead of zig.h being baked into the compiler binary, it is a header
    file distributed along with all the other header files distributed with Zig
    (#11643).</p>
    <p>Soon, this backend will be used to replace the <a href="#Bootstrap-Compiler">Bootstrap Compiler</a> with
    a C implementation that outputs C code (#5246).</p>
    

    <h4 id="x86-Backend"><a href="#toc-x86-Backend">x86 Backend</a> <a class="hdr" href="#x86-Backend">ยง</a></h4>

    <p>Although this backend remains <strong>experimental</strong>, it has seen considerable
    progress during this release cycle. Notable milestones reached:</p>
    <ul>
      <li>Partially implemented SystemV calling convention.</li>
      <li>Implemented <a href="#Windows">Windows</a> x64 calling convention.</li>
      <li>Enhanced the <code>x86_64</code> encoder to handle most of general purpose register
        encodings such as <code>I</code>, <code>OI</code>, <code>MI</code>, <code>RM</code>,
        <code>MR</code>, and <code>RMI</code>.</li>
      <li>Added basic support for the VEX prefix and SSE/AVX encodings such as <code>MV</code>, <code>RVM</code> and <code>RVMI</code>.</li>
      <li>Implemented lowerings for many fundamental
        <a href="https://github.com/ziglang/zig/wiki/Glossary#air">AIR</a> instructions.</li>
    </ul>
    <p>All of the above culminates in the x86_64 self-hosted backend passing
    <strong>875/1365 (64%)</strong> of the behavior tests compared to the LLVM backend.
    It will need to get very close to 100% before being enabled by default for debug mode.</p>
    

    <h4 id="aarch64-Backend"><a href="#toc-aarch64-Backend">aarch64 Backend</a> <a class="hdr" href="#aarch64-Backend">ยง</a></h4>

    <p>This backend remains <strong>experimental</strong>, however it now supports error unions,
    structs, and switch statements and is thereby passing <strong>560/1365 (41%)</strong>
    of the behavior tests. It will need to get very close to 100% before being enabled by default
    for debug mode.</p>
    

    <h4 id="arm-Backend"><a href="#toc-arm-Backend">arm Backend</a> <a class="hdr" href="#arm-Backend">ยง</a></h4>

    <p>This backend remains <strong>experimental</strong>, however it now supports error unions,
    structs, and switch statements and is thereby passing <strong>790/1365 (58%)</strong>
    of the behavior tests.</p>
    
    

    

    <h2 id="Self-Hosted-Linker"><a href="#toc-Self-Hosted-Linker">Self-Hosted Linker</a> <a class="hdr" href="#Self-Hosted-Linker">ยง</a></h2>

    <p>The self-hosted linker is <em>tightly coupled</em> with the <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a>.
    There has been progress on <a href="#ELF">ELF</a> and <a href="#COFF">COFF</a> however they are not generally usable yet.
    By default, LLD will be used for these object formats, however, one can opt in to
    the self-hosted linker with <code>-fno-LLD</code>.</p>

    <h3 id="MachO"><a href="#toc-MachO">MachO</a> <a class="hdr" href="#MachO">ยง</a></h3>

    <img alt="Ziggy the Ziguana" src="https://ziglang.org/img/Ziggy_2.svg" style="height: 16em; float: right">
    <p>
The incremental MachO linker, like its traditional linking counterpart, has seen
a major rewrite where Zig now lays out the incrementally linked binary such that
there is one section per segment. This might sound wasteful but it allows Zig to
use the quick file space allocation algorithm used already in the <a href="#ELF">ELF</a> and
<a href="#COFF">COFF</a> linkers.
    </p><p>
How does it work? By enclosing a single section within a single segment Zig is
able to disassociate the file offsets from the allocated virtual memory
addresses. This provides the uncanny ability to reorder and move the sections
within the underlying binary file without affecting the ordering in
the virtual memory space. This implies that if the section grows
beyond what was originally allocated, Zig only needs to copy its contents in the
file to a new location without any virtual address space recalculations unless
the section has also exceeded its allocated virtual address space. But even
then only some atoms are affected in subsequent sections in the virtual address
space.
    </p><p>
Thanks to this trick, Zig is on the path of achieving truly incremental linking
for MachO which should also make implementing hot-code swapping for MachO much
simpler and more efficient.
    </p>
    <p>For a more in-depth look into the changes involved have a look at this pull request:
    <a href="https://github.com/ziglang/zig/pull/12893">macho: rewrite incremental linker, and init splitting of linking contexts</a></p>
    <p>In addition, the following improvements have been made:</p>
    <ul>
      <li>The linker no longer artificially limits the maximum jump size to ISA's
        <code>b/bl</code>'s 28bits signed displacement which roughly equates to 128MB of compiled
        machine code section. The linker now extends the jump range via thunks which
        load the target address into the scratch register followed by a branch via
        register <code>blr</code> (#13260) (#13274)</li>
      <li>do not write out ZEROFILL physically to file</li>
      <Li>extend <code>CodeSignature</code> to accept entitlements</li>
      <li>set <code>CS_LINKER_SIGNED</code> flag in code signature generated by Zig</li>
      <li>round down pagezero size to page size. If page aligned requested pagezero size is 0,
        skip generating <code>__PAGEZERO</code> segment. Add misc improvements to the pipeline, and correctly
        transfer the requested <code>__PAGEZERO</code> size to the linker.</li>
      <li> <code>-pagezero_size</code> is always in hex. This matches the behavior of other linkers out
        there including <code>ld64</code> and <code>lld</code>.</li>
      <li>fix aligning linkedit sections</li>
      <li>implement <code>-search_dylibs_first</code> linker option</li>
      <li>verbose print all input linker args verbatim</li>
      <li>implement -headerpad_size option</li>
      <li>prefill any space between <code>__DATA</code> and <code>__LINKEDIT</code> with 0s if required. If there are zerofill
      sections, the loader may copy the contents of the physical space in file directly into memory 
      and attach that to the zerofill section. This is a performance optimisation in the loader
      but requires us, the linker, to properly zero-out any space between <code>__DATA</code> and
      <code>__LINKEDIT</code>
      segments in file. This is of course completely skipped if there are no zerofill sections present.</li>
      <li>implement <code>-headerpad_size</code> and <code>-headerpad_max_install_names</code> options</li>
      <li>implement <code>-dead_strip_dylibs</code> linker flag</li>
      <li>implement and handle <code>-needed-*</code> and <code>-needed_*</code> family of flags</li>
      <li>implement <code>-weak-lx</code> and <code>-weak_framework x</code> flags</li>
      <li>implement <code>-dead_strip</code> flag. Dead-code stripping is on by default for release build modes, and
        off for debug builds, but can be opted in/out via <code>--gc-sections</code> and <code>--no-gc-sections</code> flags.</li>
      <li>mark <code>__mh_execute_header</code> as referenced dynamically</li>
      <li>build.zig: handle weakly imported libs and frameworks</li>
      <li>support <code>-force_load=archive_path</code> flag</li>
    </ul>

    

    <h3 id="COFF"><a href="#toc-COFF">COFF</a> <a class="hdr" href="#COFF">ยง</a></h3>

    <p>The COFF linker has been reimplemented from scratch giving our <a href="#Windows">Windows</a> users
    a chance to finally be able to play with the incremental linking
    (using the <code>--watch</code> flag and <a href="#x86-Backend">x86 Backend</a> via <code>-fno-LLVM</code>).
    In addition, the linker now matches the implementation progress of
    both <a href="#ELF">ELF</a> and <a href="#MachO">MachO</a>, and hence, it is now possible to run the behavior tests on
    <code>x86_64-windows</code> successfully:</p>
    <figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">> C:\Users\kubkon\dev\zig\stage3\bin\zig.exe test test\behavior.zig -Itest -fno-LLVM -fno-unwind-tables -fno-emit-implib</span>
<span class="line">817 passed; 571 skipped; 0 failed.</span>
</samp></pre></figure>
    <p>For more detailed description of the implementation, have a look at this pull request:
    <a href="https://github.com/ziglang/zig/pull/12772">coff: implement enough of the incremental linker to pass behavior and incremental tests on Windows</a></p>
    

    <h3 id="ELF"><a href="#toc-ELF">ELF</a> <a class="hdr" href="#ELF">ยง</a></h3>

    <p>The self-hosted ELF linker remains <strong>experimental</strong>, capable
    of incremental compilation of simple Zig programs but not capable of acting as a traditional
    linker.</p>
    

    <h3 id="WASM-Modules"><a href="#toc-WASM-Modules">WASM Modules</a> <a class="hdr" href="#WASM-Modules">ยง</a></h3>

    <p>TODO ask Luuk what is the status on self-hosted wasm linker compared to LLD</p>
    

    <h3 id="DWARF-Linking"><a href="#toc-DWARF-Linking">DWARF Linking</a> <a class="hdr" href="#DWARF-Linking">ยง</a></h3>

    <p>The incremental DWARF emitter/linker is now capable of emitting correctly
    relocated debug info for <code>x86_64</code>, <code>arm</code> and
    <code>aarch64</code> architectures on Linux and macOS. The state of
    implementation varies slightly between architectures with <code>x86_64</code>
    being the farthest ahead.</p>
    <p>Example progress includes correctly generating DWARF debug info for
    slices including <code><span class="line">[]<span class="tok-kw">const</span> <span class="tok-type">u8</span></span></code> for passing as formal parameters.
    Breaking on a function accepting a slice in <code>gdb</code> will now yield
    the same behavior as the <a href="#Bootstrap-Compiler">Bootstrap Compiler</a> and LLVM backend:</p>
    <figure><figcaption class="zig-cap"><cite class="file">test.zig</cite></figcaption><pre><code><span class="line"><span class="tok-kw">fn</span> <span class="tok-fn">sumArrayLens</span>(a: []<span class="tok-kw">const</span> <span class="tok-type">u32</span>, b: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <span class="tok-type">usize</span> {</span>
<span class="line">    <span class="tok-kw">return</span> a.len + b.len;</span>
<span class="line">}</span></code></pre></figure>
    <p>Both <code>a</code> and <code>b</code> can now be inspected in the debugger:</p>
    <pre><code>Breakpoint 1, sumArrayLens (a=..., b=...) at arr.zig:59
(gdb) p a
$1 = {ptr = 0x7fffffff685c, len = 5}
(gdb) p b
$2 = {ptr = 0x7fffffff683d "\252\252\252\\h\377\377\377\177", len = 3}
(gdb)</code></pre>
    

    <h3 id="Linker-Performance"><a href="#toc-Linker-Performance">Linker Performance</a> <a class="hdr" href="#Linker-Performance">ยง</a></h3>

    <p>This release saw a general rewrite of the majority of the linker in the spirit of
    <a href="https://media.handmade-seattle.com/practical-data-oriented-design/">data-oriented design</a> which led to:</p>
    <ul>
      <li>significantly reduced link times to the point where, dare I say, we start to become competitive with <code>lld</code> and <code>ld64</code></li>
      <li>reduced memory usage by avoiding unnecessary allocs, and instead re-parsing data when actually needed.</li>
    </ul>
    <p>In the benchmarks below, <code>zld</code> refers to our linker as a standalone binary
    (which you can find at <a href="https://github.com/kubkon/zld">kubkon/zld</a>),
    <code>lld</code> to LLVM's linker, and <code>ld64</code> to Apple's linker.
    I should also point out that we are still missing a number of optimisations in
    the linker such as cstring deduplication, compression of dynamic linker's
    relocations, and synthesising of the unwind info section, so this difference
    between <code>zld</code> and other linkers will most likely shrink a little.</p>
    <p>I've run the benchmarks on a MacBook Pro 16" with M1 Pro SoC and 32GB RAM. The
    generated code for the linker was <strong>not</strong> using hardware sha256 extensions.</p>
    <p><strong>Linking <a href="https://github.com/redis/redis/">redis-server</a> binary</strong>:</p>
    <figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">โฏ hyperfine ./zld ./lld ./ld64 --warmup 60</span>
<span class="line">Benchmark 1: ./zld</span>
<span class="line">  Time (mean ยฑ ฯ):      35.6 ms ยฑ   0.4 ms    [User: 35.9 ms, System: 10.4 ms]</span>
<span class="line">  Range (min โฆ max):    34.8 ms โฆ  36.4 ms    79 runs</span>
<span class="line"></span>
<span class="line">Benchmark 2: ./lld</span>
<span class="line">  Time (mean ยฑ ฯ):      49.2 ms ยฑ   0.8 ms    [User: 42.6 ms, System: 17.6 ms]</span>
<span class="line">  Range (min โฆ max):    48.0 ms โฆ  51.2 ms    59 runs</span>
<span class="line"></span>
<span class="line">Benchmark 3: ./ld64</span>
<span class="line">  Time (mean ยฑ ฯ):      47.2 ms ยฑ   0.5 ms    [User: 60.1 ms, System: 14.4 ms]</span>
<span class="line">  Range (min โฆ max):    46.2 ms โฆ  48.1 ms    61 runs</span>
<span class="line"></span>
<span class="line">Summary</span>
<span class="line">  './zld' ran</span>
<span class="line">    1.32 ยฑ 0.02 times faster than './ld64'</span>
<span class="line">    1.38 ยฑ 0.03 times faster than './lld'</span>
</samp></pre></figure>
    <p><strong>Linking <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a> binary</strong>:</p>
    <figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">โฏ hyperfine ./zld ./lld ./ld64 --warmup 5</span>
<span class="line">Benchmark 1: ./zld</span>
<span class="line">  Time (mean ยฑ ฯ):      1.934 s ยฑ  0.012 s    [User: 2.870 s, System: 0.468 s]</span>
<span class="line">  Range (min โฆ max):    1.923 s โฆ  1.962 s    10 runs</span>
<span class="line"></span>
<span class="line">Benchmark 2: ./lld</span>
<span class="line">  Time (mean ยฑ ฯ):      1.153 s ยฑ  0.014 s    [User: 1.289 s, System: 0.230 s]</span>
<span class="line">  Range (min โฆ max):    1.141 s โฆ  1.179 s    10 runs</span>
<span class="line"></span>
<span class="line">Benchmark 3: ./ld64</span>
<span class="line">  Time (mean ยฑ ฯ):      2.349 s ยฑ  0.006 s    [User: 3.875 s, System: 0.218 s]</span>
<span class="line">  Range (min โฆ max):    2.341 s โฆ  2.357 s    10 runs</span>
<span class="line"></span>
<span class="line">Summary</span>
<span class="line">  './lld' ran</span>
<span class="line">    1.68 ยฑ 0.02 times faster than './zld'</span>
<span class="line">    2.04 ยฑ 0.02 times faster than './ld64'</span>
</samp></pre></figure>
    

    <h3 id="Linker-Test-Harness"><a href="#toc-Linker-Test-Harness">Linker Test Harness</a> <a class="hdr" href="#Linker-Test-Harness">ยง</a></h3>

    <p>The incremental compilation that utilises Zig's
    <a href="#Code-Generation">self-hosted native backends</a> has
    seen the addition of a vastly improved and easily extensible test harness. In
    order to add a new incremental test (emulating the <code>--watch</code> flag), it is now
    only required to drop a Zig source file in the test harness directory with a
    specially crafted comment instructing the harness of several test parameters
    such as test target, and that's it. Thanks to this dynamic approach there is no
    longer any need in recompiling the harness (#11530) (#11572).</p>

    <p>Linkers also have received a new test harness, which is based on the
    <code>StandaloneTestContext</code> and <code>CheckFileStep</code>, and as
    such assumes each test case specifies a <code>build.zig</code> script where
    we instruct the harness what the link flags/conditions are the expected
    results such as a runtime result or a greppable contents of the generated
    binary file (#11910).</p>

    <p>Notable features:</p>
    <ul>
      <li><code>CheckObjectStep</code> specialises <code>CheckFileStep</code>
        into directed (surgical) MachO file fuzzy searches. This will be the
        building block for comprehensive linker tests.</li>
      <li>dump metadata to string and grep results. This approach is more
        inline with what LLVM/LLD does for testing of their output, and seems
        to be more generic and easier to extend than implementing a lot of
        repetitive and nontrivial comparison logic when working directly on structures.</li>
      <li>extract values from parsed binaries into variables. We can then
        collect multiple variables (currently assumed always in global scope)
        and run a comparison with some very basic arithmetic on the values.</li>
    </ul>
    
    


    <h2 id="Standard-Library"><a href="#toc-Standard-Library">Standard Library</a> <a class="hdr" href="#Standard-Library">ยง</a></h2>

    <p>The Zig standard library is still unstable and mainly serves as a
    testbed for the language. After the <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a> is completed,
    the <a href="#Language-Changes">language</a> stabilized, and
    <a href="#Package-Manager">Package Manager</a> completed, then it will be time
    to start working on stabilizing the standard library.
    Until then, experimentation and breakage without warning is allowed.</p>
    <ul>
      <li>process.ArgIterator.next return type is changed.</li>
      <li>Fixed process.argsAlloc buffer size</li>
      <li>process: add option to support single quotes to ArgIteratorGeneral</li>
      <li>Make it easier to avoid depending on child process execution when not supported by the target OS.</li>
      <li>Implement child processes with posix_spawn as an alternative to fork-exec where possible</li>
      <li>ChildProcess.init no longer heap allocates</li>
      <li>Fixed ChildProcess crash when PATH is empty</li>
      <li>std.os.execvpe: fix buffer overflow</li>
      <li>Break up some long lines. This makes packaging Zig for
        <a href="https://www.debian.org/">Debian</a> slightly easier since
        it will no longer trigger a
        <a href="https://lintian.debian.org/manual/index.html">Lintian</a>
        warning for long lines.</li>
      <li>Skip <code><span class="line"><span class="tok-kw">comptime</span></span></code> struct fields in
        <code><span class="line">mem.zeroes()</span></code> (#10406)</li>
      <li>Rename mem.bswapAllFields to byteSwapAllFields</li>
      <li>mem: add indexOfMin and indexOfMax (#9915)</li>
      <li>Allow <code>mem.zeroes</code> to work at comptime with extern union (#10797)</li>
      <li>mem.zeroes: Zero sized structs with uninitialized members (#12246)</li>
      <li>mem.zeroInit: Fixed behavior with empty initialiser</li>
      <li>mem: added concatWithSentinel</li>
      <li>mem: add peek() to TokenIterator(T)</li>
      <li>mem: add splitBackwards (#11908)</li>
      <li>mem: add <code>first</code> and <code>reset</code> method to <code>SplitIterator</code> and <code>SplitBackwardsIterator</code></li>
      <li>Support parsing tz timezone data (#10456)</li>
      <li>Added json.stringifyAlloc</li>
      <li>json: fix compile error for comptime fields (#10849)</li>
      <li>json: correctly handle sentinel terminated slices</li>
      <li>JSON stringify string setting affects keys (#11618)</li>
      <li>json: Support disabling indent (#11823)</li>
      <li>json: Fixed parsing of large numbers</li>
      <li>json: expose encodeJsonString and encodeJsonStringChars</li>
      <li>Added meta.DeclEnum</li>
      <li>Makes std.meta.Tuple and std.meta.ArgsTuple generate a unique type instead of generating one per invocation.</li>
      <li>meta: made FieldEnum(T) == Tag(T) for tagged unions when values match field indices</li>
      <li>Added isTag function to std.meta (#11895)</li>
      <li>Added some missing termios types to c/linux.zig and os.zig</li>
      <li>readUntilDelimiter: read only if buffer not full (#9594)</li>
      <li>Avoid duplicate TLS startup symbols</li>
      <li>Correct rounding in parse_hex_float.zig (#10743)</li>
      <li>Progress: make the API infallible by handling <code>error.TimerUnsupported</code>.
        In this case, only explicit calls to refresh() will cause the progress
        line to be printed.</li>
      <li>Progress: fix suffix printing</li>
      <li>Fixed data race in std.Progress.maybeRefresh()</li>
      <li>Added elf.EM, coff.MachineType to Target.CPU.Arch conversions</li>
      <li>Fixed sigaction double panic (#8357)</li>
      <li>Added sem_open and sem_close</li>
      <li>Added SIMD utility functions</li>
      <li>Added <code>unicode.replacement_character</code></li>
      <li>unicode: add utf16 byte length and codepoints counting routines (#11663)</li>
      <li>os.getenvW: Fixed case-insensitivity for Unicode env var names (#10595)</li>
      <li>Added memfd_create for FreeBSD. This is minorly breaking as e.g.
        std.os.linux.MFD_CLOEXEC is now std.os.linux.MFD.CLOEXEC.</li>
      <li>Added FreeBSD support to std.os.getFdPath</li>
      <li>Audit FreeBSD structs to match header files/ABI</li>
      <li>Added functions from <code>dirent.h</code> to std.c (#11598)</li>
      <li>std.c: Fixed incorrect dirent structure (#11602)</li>
      <li>Added const to msghdr_const iov and control pointers</li>
      <li>Mark fstype argument to mount as optional.</li>
      <li>Renamed systemz to s390x</li>
      <li>Fixed definition of SIG_IGN, SIG_DFL, etc. (#12410)</li>
      <li>Added bounded array functions to io.Reader</li>
      <li>ascii: rename functions and other improvements (#12448)</li>
    </ul>

    <h3 id="Math"><a href="#toc-Math">Math</a> <a class="hdr" href="#Math">ยง</a></h3>

    <ul>
      <li>Fixed overflow in isNormal when applied to -Inf or a negative NaN</li>
      <li>Optimize division with divisors less than a half-limb</li>
      <li>Simplify implementation of floorPowerOfTwo</li>
      <li>Fixed big.int div, gcd and bitAnd edge-cases (#10932)</li>
      <li>lossyCast: Fixed integer overflow caused by cast from maxInt(u32) as an f32 to u32.</li>
      <li>Fixed for big int divmod (#11271)</li>
      <li>Complex: add 'negation' and 'mulitply by i'</li>
      <li>Added new float-parser based on eisel-lemire algorithm (#11566)</li>
      <li>Added math.sign</li>
      <li><code>powi</code>: use standard definition of underflow/overflow, implement <code><span class="line"><span class="tok-type">u0</span></span></code>, <code><span class="line"><span class="tok-type">i0</span></span></code>, <code><span class="line"><span class="tok-type">i1</span></span></code>
        edge case (#11499)</li>
      <li>Made <code>cast</code> return optional instead of an error.</li>
      <li>Added O(log N) implementation of log2(x) for <code><span class="line"><span class="tok-type">comptime_int</span></span></code></li>
      <li>big int: update Managed.toString() to use provided allocator (#11839)</li>
      <li>big int: breaking API changes to prevent UAF (#11897)</li>
      <li>Added <code>degreesToRadians</code> and <code>radiansToDegrees</code></li>
      <li>Fixed big.Rational order/orderAbs (#12440)</li>
      <li>Added "Greatest common divisor" (gcd)</li>
      <li>Fixed memory leak on OutOfMemory error in math.big.int and math.big.rational</li>
      <li>Fixed cast behavior relating to comptime_int arguments (#12918)</li>
    </ul>
    

    <h3 id="File-System"><a href="#toc-File-System">File System</a> <a class="hdr" href="#File-System">ยง</a></h3>

    <ul>
      <li>fs.getAppDataDir: recognize <code>XDG_DATA_HOME</code></li>
      <li>fs: Use <code>OpenMode</code> enum instead of read/write flags.</li>
      <li>Define static error set for fs.Dir.copyFile</li>
      <li>Fixed using <code><span class="line">fs.Dir.Iterator</span></code> twice (#10404)</li>
      <li>Implemented cross-platform metadata API (#10486)</li>
      <li>Added File.sync (#11410)</li>
      <li>Prevent possible integer overflow in Dir.makePath (#11397)</li>
      <li>Split <code>Dir</code> into <code>IterableDir</code> (#12060)</li>
      <li>End iteration on Linux/WASI during Iterator.next when hitting <code>ENOENT</code> (#12211)</li>
      <li>Split Iterator.next on <a href="#Linux">Linux</a> and <a href="#WASI">WASI</a> to allow for handling platform-specific errors</li>
      <li>Fixed <code>WalkerEntry.dir</code> not always being the containing dir</li>
    </ul>
    <h4 id="Optimized-Tree-Deletion"><a href="#toc-Optimized-Tree-Deletion">Optimized Tree Deletion</a> <a class="hdr" href="#Optimized-Tree-Deletion">ยง</a></h4>

    TODO
commit c23b3e6fd924725d21ecbbc85ef086d330dd4322
Merge: 260b0ff7c 1468eb12f
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Wed Oct 12 13:37:06 2022 -0400

    Merge pull request #13073 from squeek502/fs-delete-tree-2
    
    `fs.Dir.deleteTree`: Optimize for non-deeply-nested directories
    
    

    <h3 id="Data-Structures"><a href="#toc-Data-Structures">Data Structures</a> <a class="hdr" href="#Data-Structures">ยง</a></h3>

    <ul>
      <li>hash_map: optimize isFree/isTombstone (#10562)</li>
      <li>HashMap: add removeByPtr</li>
      <li>Made ArrayHashMap eql function accept an additional param (#10742)</li>
      <li>Fixed memory leak in ArrayHashMap (#13001)</li>
      <li>Fixed getOrPutAdapted on Managed array hash map</li>
      <li>HashMap: return explicit errors (#11000)</li>
      <li>Fixed auto_hash not hashing arrays of slices uniquely (#12423)</li>
      <li>Allow BoundedArray to be default initialized</li>
      <li>Slice function of BoundedArray now returns slice based on self pointer. If
        self pointer is const, the slice is const. Otherwise the slice is mutable.</li>
      <li>BoundedArray: return explicit errors (#11044)</li>
      <li>BoundedArray: Add Writer interface</li>
      <li>MultiArrayList: fixed insert compile error.</li>
      <li>Added sort method to ArrayHashMap and MultiArrayList</li>
      <li>MultiArrayList: add functions <code>addOne</code>, <code>pop</code>, and <code>popOrNull</code> (#11553)</li>
      <li>enums: make directEnumArrayLen public</li>
      <li>bit_set: add setRangeValue(Range, bool)</li>
      <li>Added ArrayList.clone</li>
      <li>Use explicit error sets for ArrayList return types.</li>
      <li>ArrayList.ensureTotalCapacity: optimize and fix integer overflow (#12099)</li>
      <li>BufSet: add clone and cloneWithAllocator</li>
      <li>Fixed bug in PriorityQueue::removeIndex()</li>
      <li>PriorityQueue: fix missing siftUp in remove</li>
      <li>PriorityQueue: use compareFn in update() (#9918)</li>
      <li>PriorityDequeue: use compareFn in update() method</li>
      <li>Added Treap data structure (#11444)</li>
      <li>SegmentedList: add constIterator</li>
      <li>Made IntegerBitSet and ArrayBitSet have defined memory layout</li>
    </ul>
    

    <h3 id="Crypto"><a href="#toc-Crypto">Crypto</a> <a class="hdr" href="#Crypto">ยง</a></h3>

    <p>
    We have <a href="https://www.prettysimpleimages.com/">Frank Denis</a> to thank for Zig's
    state-of-the-art cryptography capabilities. In this release:</p>
    <ul>
      <li>Added bcrypt pbkdf (#10331)</li>
      <li>edwards25519: faster point decompression.
        <a href="https://mailarchive.ietf.org/arch/msg/cfrg/qlKpMBqxXZYmDpXXIx6LO3Oznv4/">Make recovery of the x-coordinate slightly faster.</a></li>
      <li>25519.scalar: implement edwards25519 scalar field inversion.
        This operation is extremely useful for multiplicative blinding.</li>
      <li>x25519: implement clearCofactor() (#11355) <br>
        This is the x25519 counterpart to <code><span class="line">edwards25519.clearCofactor()</span></code>.
        It is useful to check for low-order points in protocols where it
        matters and where clamping cannot work, such as PAKEs.</li>
      <li>edwards25519 fixes (#11568)</li>
      <li>Generate AES constants at compile time (#11612)</li>
      <li>25519: add scalar.random(), use CompressedScalar type. <br>
        Add the ability to generate a random, canonical curve25519 scalar,
        like we do for p256.
        Also leverage the existing CompressedScalar type to represent these
        scalars.</li>
      <li>Added support for the NIST P-384 curve (#11735) <br>
        After P-256, here comes P-384, also known as secp384r1.
        Like P-256, it is required for TLS, and is the current NIST recommendation for key exchange and signatures, for better or for worse.
        Like P-256, all the finite field arithmetic has been computed and verified to be correct by fiat-crypto.</li>
      <li>pcurves: compute constants for inversion at comptime (#11780)</li>
      <li>p256, p384: process the top nibble in mulDoubleBasePublic (#11956)<br>
          Unlike curve25519 where the scalar size is not large enough to fill
          the top nibble, this can definitely be the case for p256 and p384.</li>
      <li>25519, pcurves: make the scalar field order public (#11955)</li>
      <li>ecc: add support for the secp256k1 curve (#11880)<br>
        Usage of the secp256k1 elliptic curve recently grew exponentially,
        since this is the curve used by Bitcoin and other popular blockchains
        such as Ethereum.
        <br>
        With this, <strong>Zig has support for all the widely deployed elliptic curves
          today</strong>.</li>
      <li>hash: allow creating hash functions from compositions (#11965)</li>
      <li>sign.ecdsa: fix toCompressedSec1()/toUnompressedSec1() (#12009)</li>
      <li>sign.ed25519: add support for blind key signatures (#11868)<br>
        <a href="https://datatracker.ietf.org/doc/draft-dew-cfrg-signature-key-blinding/">Key blinding</a> allows public keys to be augmented with a secret
        scalar, making multiple signatures from the same signer unlinkable.
        This is required by privacy-preserving applications such as Tor
        onion services and the PrivacyPass protocol.</li>
      <li>sign.ed25519: include a context string in blind key signatures (#12316)</li>
      <li>Improved stdlib's random float generation (#10428) (#11641)</li>
      <li>Added std.rand.RomuTrio</li>
      <li>Random interface is no longer passed by reference.</li>
      <li>random: add weightedIndex function</li>
    </ul>

    <h4 id="ECDSA-Signatures"><a href="#toc-ECDSA-Signatures">ECDSA Signatures</a> <a class="hdr" href="#ECDSA-Signatures">ยง</a></h4>

    <p>Zig 0.10.0 adds support for ECDSA signatures (#11855).</p>

    <p>ECDSA is the most commonly used signature scheme today, mainly for
    historical and conformance reasons. It is a necessary evil for
    many standard protocols such as TLS and JWT.</p>
    
    <p>It is tricky to implement securely and has been the root cause of
    multiple security disasters, from the Playstation 3 hack to multiple
    critical issues in OpenSSL and Java.</p>
    
    <p>This implementation combines lessons learned from the past with
    recent recommendations.</p>
    
    <p>In Zig, the NIST curves that ECDSA is almost always instantied with
    use formally verified field arithmetic, giving us peace of mind
    even on edge cases. And the API rejects neutral elements where it
    matters, and unconditionally checks for non-canonical encoding for
    scalars and group elements. This automatically eliminates
    <a href="https://sk.tl/2LpS695v">common vulnerabilities</a>.</p>
    
    <p>ECDSA's security heavily relies on the security of the random number
    generator, which is a concern in some environments.</p>
    
    <p>This implementation mitigates this by computing deterministic
    nonces using the conservative scheme from Pornin et al. with the
    optional addition of randomness as proposed in Ericsson's
    "Deterministic ECDSA and EdDSA Signatures with Additional Randomness"
    document. This approach mitigates both the implications of a weak RNG
    and the practical implications of fault attacks.</p>
    
    <p>Project Wycheproof is a Google project to test crypto libraries against
    known attacks by triggering edge cases. It discovered vulnerabilities
    in virtually all major ECDSA implementations.</p>
    
    <p>The entire set of ECDSA-P256-SHA256 test vectors from Project Wycheproof
    is included here. Zero defects were found in this implementation.</p>
    
    <p>The public API differs from the Ed25519 one. Instead of raw byte strings
    for keys and signatures, we introduce Signature, PublicKey and SecretKey
    structures.</p>
    
    <p>The reason is that a raw byte representation would not be optimal.
    There are multiple standard representations for keys and signatures,
    and decoding/encoding them may not be cheap (field elements have to be
    converted from/to the montgomery domain).</p>
    
    <p>So, the intent is to eventually move ed25519 to the same API, which
    is not going to introduce any performance regression, but will bring
    us a consistent API, that we can also reuse for RSA.</p>
    

    <h4 id="Add-Xoodoo-Deprecate-Gimli"><a href="#toc-Add-Xoodoo-Deprecate-Gimli">Add Xoodoo, Deprecate Gimli</a> <a class="hdr" href="#Add-Xoodoo-Deprecate-Gimli">ยง</a></h4>

    <p>Zig 0.10.0 adds the Xoodoo permutation, preparing for Gimli deprecation (#11866).</p>
    
    <p>Gimli was a game changer. A permutation that is large enough to be
    used in sponge-like constructions, yet small enough to be compact
    to implement and fast on a wide range of platforms.</p>
    
    <p>And Gimli being part of the Zig standard library was awesome.</p>
    
    <p>But since then, Gimli entered the NIST Lightweight Cryptography
    Competition, competing againt other candidates sharing a similar set
    of properties.</p>
    
    <p>Unfortunately, Gimli didn't pass the 3rd round.</p>
    
    <p>There are no practical attacks against Gimli when used correctly, but
    NIST's decision means that Gimli is unlikely to ever get any traction.</p>
    
    <p>So, maybe the time has come to move Gimli from the standard library
    to another repository.</p>
    
    <p>We shouldn't do it without providing an alternative, though.
    And the best candidate for this is probably Xoodoo.</p>
    
    <p>Xoodoo is the core function of Xoodyak, one of the finalists of the
    NIST LWC competition, and the most direct competitor to Gimli. It is
    also a 384-bit permutation, so it can easily be used everywhere Gimli
    was used with no parameter changes.</p>
    
    <p>It is the building block of Xoodyak (for actual encryption and hashing)
    as well as Charm, that some Zig applications are already using.</p>
    
    <p>Like Gimli that it was heavily inspired from, it is compact and
    suitable for constrained environments.</p>
    
    <p>This change adds the Xoodoo permutation to std.crypto.core.</p>
    
    <p>The set of public functions includes everything required to later
    implement existing Xoodoo-based constructions.</p>
    
    <p>In order to prepare for the Gimli deprecation, the default
    CSPRNG was changed to a Xoodoo-based that works exactly the same way.</p>
    
    

    <h3 id="Concurrency"><a href="#toc-Concurrency">Concurrency</a> <a class="hdr" href="#Concurrency">ยง</a></h3>

    <ul>
      <li>Fixed a bug in Thread.Condition and add a basic Condition test (#10538)</li>
      <li>Renamed <code>sched_yield</code> to <code>yield</code> and move it to <code>std.Thread</code></li>
      <li>Thread: Mutex and Condition improvements (#11497)</li>
      <li>Added Thread.Condition.timedWait (#11352)</li>
      <li>Thread.Futex improvements (#11464)</li>
      <li>Thread: ResetEvent improvements (#11523)</li>
      <li>Single-threaded <code>panicImpl</code> sleep is unreachable (#11569)</li>
      <li>std.event: use .{} to initiate Lock to unlocked state</li>
      <li>Thread: fix freeAndExit on x86_64 <a href="#Linux">Linux</a> (#12693)</li>
      <li>Update RwLock to use static initialization (#10838)</li>
      <li>time: introduce Instant (#10972)</li>
      <li>std.os: add timerfd_create, timerfd_settime and timerfd_gettime</li>
      <li>Fixed android definition of pthread_rwlock_t (#12830)</li>
      <li>Fixed DefaultRwLock accumulating write-waiters, eventually failing to write lock (#13180)</li>
    </ul>
    

    <h3 id="Networking"><a href="#toc-Networking">Networking</a> <a class="hdr" href="#Networking">ยง</a></h3>

    <ul>
      <li>Added http definitions for <code>Method</code> and <code>Status</code> (#10661)</li>
      <li>Handle <code>HOSTUNREACH</code> for blocking and non-blocking connects</li>
      <li><code>net.getAddressList</code>: fix segfault on bad hostname (#12065)</li>
      <li>Added <code>AFNOSUPPORT</code> error to bind (#12560)</li>
      <li>Added <code>tcdrain</code> on <a href="#Linux">Linux</a></li>
      <li><code>std.os</code> now handles <code>error.UnreachableAddress</code> in <code>send()</code></li>
      <li>Fixed <code>setsockopt</code> returning <code>ENODEV</code></li>
    </ul>
    <p>Networking has mostly been quiet until now, but it's about to get lit
    as we dive into the <a href="#Package-Manager">Package Manager</a> in the <a href="#Roadmap">next release cycle</a>.</p>
    

    <h3 id="Testing"><a href="#toc-Testing">Testing</a> <a class="hdr" href="#Testing">ยง</a></h3>

    <ul>
      <li>Removed <code><span class="line">std.testing.zig_exe_path</span></code> in favor of <code>ZIG_EXE</code>
        environment variable (#11633)</li>
      <li>Fixed expectStringEndsWith error output. Before it started outputting the
        actual starting, not ending characters.</li>
      <li>Fixed progress indicator for <code>zig test</code> (#10859)</li>
      <li>Added <code>refAllDeclsRecursive</code> function</li>
      <li>Made the caret indicator line more helpful</li>
    </ul>

    <h4 id="Check-All-Allocation-Failures"><a href="#toc-Check-All-Allocation-Failures">Check All Allocation Failures</a> <a class="hdr" href="#Check-All-Allocation-Failures">ยง</a></h4>

    TODO
Adds a function that allows checking for memory leaks (and other problems) caused by allocation failures by taking advantage of the FailingAllocator and inducing failure at every allocation point within the provided `test_fn` (based on the strategy employed in the Zig parser tests, which can now use this function).

Below is the function's giant doc comment in a more readable form:

---

Exhaustively check that allocation failures within `test_fn` are handled without
introducing memory leaks. If used with the `testing.allocator` as the `backing_allocator`,
it will also be able to detect double frees, etc (when runtime safety is enabled).

The provided `test_fn` must have a `std.mem.Allocator` as its first argument,
and must have a return type of `!void`. Any extra arguments of `test_fn` can
be provided via the `extra_args` tuple.

Any relevant state shared between runs of `test_fn` *must* be reset within `test_fn`.

Expects that the `test_fn` has a deterministic number of memory allocations
(an error will be returned if non-deterministic allocations are detected).

The strategy employed is to:
- Run the test function once to get the total number of allocations.
- Then, iterate and run the function X more times, incrementing
  the failing index each iteration (where X is the total number of
  allocations determined previously)

---

Here is an example of using a simple test case that will cause a leak when the
allocation of `bar` fails (but will pass normally):

```zig
test {
    const length: usize = 10;
    const allocator = std.testing.allocator;
    var foo = try allocator.alloc(u8, length);
    var bar = try allocator.alloc(u8, length);

    allocator.free(foo);
    allocator.free(bar);
}
```

The test case can be converted to something that this function can use by
doing:

```zig
fn testImpl(allocator: std.mem.Allocator, length: usize) !void {
    var foo = try allocator.alloc(u8, length);
    var bar = try allocator.alloc(u8, length);

    allocator.free(foo);
    allocator.free(bar);
}

test {
    const length: usize = 10;
    const allocator = std.testing.allocator;
    try std.testing.checkAllAllocationFailures(allocator, testImpl, .{length});
}
```

Running this test will show that `foo` is leaked when the allocation of
`bar` fails. The simplest fix, in this case, would be to use defer like so:

```zig
fn testImpl(allocator: std.mem.Allocator, length: usize) !void {
    var foo = try allocator.alloc(u8, length);
    defer allocator.free(foo);
    var bar = try allocator.alloc(u8, length);
    defer allocator.free(bar);
}
```
    
    

    <h3 id="Debugging"><a href="#toc-Debugging">Debugging</a> <a class="hdr" href="#Debugging">ยง</a></h3>

    <ul>
      <li>Added DWARFv5 support (#12120)</li>
      <li>Make stack traces more reliable by checking if pages are mapped before loading from them.</li>
      <li><code>std.debug</code> now has better resource management (#11485)<br>
        This code used to assume that it would only be used for dumping stack traces right
        before an application crashed, however, it is now sometimes used in non-catastrophic
        cases, so now it behaves properly with regards to allocations and file descriptors.
      </li>
      <li>Fixed ConfigurableTrace.dump OOB</li>
      <li>Fixed stack traces with non-null <code>first_address</code> on <a href="#Windows">Windows</a> (#6687)</li>
      <li>Added stack trace capturing to <code>FailingAllocator</code> and use it to improve
        <a href="#Check-All-Allocation-Failures">checkAllAllocationFailures</a> (#11919)</li>
      <li>Dwarf: Added stroffsetsptr support (#12270)</li>
      <li>Fixed incorrect output on <a href="#Windows">Windows</a> when .pdb file is not found during stack trace</li>
      <li>Only check the file's length once in pdb.Msf.init</li>
      <li>Validate frame-pointer address in stack walking (#10863)</li>
      <li>Fixed off-by-one error in def of ProcSym in pdb</li>
      <li>Check for overflow in dumpStackTraceFromBase</li>
    </ul>

    TODO show a code example here
    Introduce std.debug.Trace and use it to debug a LazySrcLoc in stage2 that is set to a bogus value
    Merge pull request #11819 from ziglang/std.debug.Trace
    

    <h3 id="New-Deflate-Compressor"><a href="#toc-New-Deflate-Compressor">New Deflate Compressor</a> <a class="hdr" href="#New-Deflate-Compressor">ยง</a></h3>

    TODO
commit 0c1df96b17fcafdb0aa973dfcb1819929719d650
Merge: f0ddc7f7a 490f067de
Author: Andrew Kelley <andrew@ziglang.org>
Date:   Wed Jan 26 00:43:13 2022 -0500

    Merge pull request #10552 from hdorio/deflate
    
    compress: add a deflate compressor
    

    <h3 id="Formatted-Printing"><a href="#toc-Formatted-Printing">Formatted Printing</a> <a class="hdr" href="#Formatted-Printing">ยง</a></h3>

    <ul>
      <li>Refactor parsing of placeholders into its own function.
        Makes compilation faster.</li>
      <li>Handle FormatOptions in fmtDuration/fmtDurationSigned</li>
      <li>Fixed out-of-bounds array write in float printing</li>
      <li>Allow uppercase prefix to be parsed in std.fmt.parseInt()</li>
      <li>Fixed false positive for <code>zig.isValidId</code> with empty string (#11104)</li>
      <li>Fixed incorrect behavior with large floating point integers (#11283)</li>
      <li>fmtIntSizeDec/fmtIntSizeBin support FormatOptions (#9184)</li>
      <li>Require specifier for unwrapping ?T and E!T</li>
      <li>Added more invalid format string errors</li>
      <li>Made <code>fmt.formatAsciiChar</code> respect <code>options</code> parameter</li>
    </ul>
    

    

    <h2 id="Bug-Fixes"><a href="#toc-Bug-Fixes">Bug Fixes</a> <a class="hdr" href="#Bug-Fixes">ยง</a></h2>

    <p><a href="https://github.com/ziglang/zig/issues?q=is%3Aclosed+is%3Aissue+label%3Abug+milestone%3A0.10.0">Full list of the 421 (TODO update this number) bug reports closed during this release cycle</a>.</p>
    <p>Note: many bugs were both introduced and resolved within this release cycle.</p>
    <h3 id="This-Release-Contains-Bugs"><a href="#toc-This-Release-Contains-Bugs">This Release Contains Bugs</a> <a class="hdr" href="#This-Release-Contains-Bugs">ยง</a></h3>

    <img alt="Zero the Ziguana" src="https://ziglang.org/img/Zero_8.svg" style="height: 13em; float: right">
    <p>
    Zig has
    <a href="https://github.com/ziglang/zig/issues?q=is%3Aopen+is%3Aissue+label%3Abug">known bugs</a>
    and even some
    <a href="https://github.com/ziglang/zig/issues?q=is%3Aopen+is%3Aissue+label%3Amiscompilation">miscompilations</a>.
    </p>
    <p>Zig is immature. Even with Zig 0.10.0, working on a non-trivial project using Zig will
    likely require participating in the development process.</p>
    <p>When Zig reaches 1.0.0, a new requirement for <a href="#Tier-1-Support">Tier 1 Support</a> will be
    0 known bugs for that target.</p>
    <p>
    A <a href="https://github.com/ziglang/zig/milestone/18">0.10.1 release</a> is planned.
    </p>
    
    

    <h2 id="Build-System"><a href="#toc-Build-System">Build System</a> <a class="hdr" href="#Build-System">ยง</a></h2>

    <ul>
      <li><code>zig build</code> now respects the <code>ZIG_LIB_DIR</code> environment variable.</li>
      <li>RunStep: allow <code>expected_exit_code</code> to be <code><span class="line"><span class="tok-null">null</span></span></code></li>
      <li>Normalize build function names such as "addIncludeDir" and
        "addIncludePath". Also use "Library" instead of the "Lib"
        abbreviation.</li>
      <li>TranslateCStep: add C macro support</li>
      <li>Allow tests to use cache and setOutputDir</li>
      <li>Use response files for long command lines (#10950)</li>
      <li>OptionsStep: Always use <code>fmtId</code> for type names.</li>
      <li>Renamed <code>std.build.Pkg.path</code> to <code>std.build.Pkg.source</code> (#11557)</li>
      <li>Added EmulatableRunStep (#12059)</li>
      <li>Allow <code><span class="line"><span class="tok-type">comptime_int</span></span></code> in <code><span class="line">OptionsStep.addOption</span></code></li>
      <li>Fixed transitive linkSystemLibraryName() dependencies</li>
      <li>Made no_dll_export_fns accessible in build step</li>
      <li>Added flag for <code>-fstack-protector</code></li>
      <li>Made <code>runPkgConfig</code> pub</li>
      <li>Fixed <code>Step.cast</code> for <code>OptionsStep</code> and <code>CheckObjectStep</code></li>
    </ul>
    

    <h2 id="Toolchain"><a href="#toc-Toolchain">Toolchain</a> <a class="hdr" href="#Toolchain">ยง</a></h2>

    <h3 id="LLVM-15"><a href="#toc-LLVM-15">LLVM 15</a> <a class="hdr" href="#LLVM-15">ยง</a></h3>

    <p>
    This release of Zig upgrades to
    <a href="http://releases.llvm.org/15.0.0/docs/ReleaseNotes.html">LLVM 15.0.3</a>.
    </p>
    <p>
    Note that the Zig 0.9.x series used LLVM 13 - there is no Zig release that depends on
    <a href="http://releases.llvm.org/14.0.0/docs/ReleaseNotes.html">LLVM 14</a>.
    </p>
    <ul>
      <li>CMake: Improve usage of <code>llvm-config</code>, especially for consistent static/shared linking (#12136)</li>
      <li>CMake: Print all LLVM config errors instead of just the last one. Helps when there are multiple llvm-config executables in PATH.</li>
    </ul>
    

    <h3 id="musl-123"><a href="#toc-musl-123">musl 1.2.3</a> <a class="hdr" href="#musl-123">ยง</a></h3>

    <p>
    Zig ships with the source code to <a href="http://musl.libc.org/">musl</a>.
    When the musl C ABI is selected, Zig builds static musl from source for the selected target.
    Zig also supports targeting dynamically linked musl which is useful for Linux distributions
    that use it as their system libc, such as
    <a href="https://www.alpinelinux.org/">Alpine Linux</a>.
    </p>
    <p>
    This release upgrades from v1.2.2 to v1.2.3.
    </p>
    

    <h3 id="glibc-234"><a href="#toc-glibc-234">glibc 2.34</a> <a class="hdr" href="#glibc-234">ยง</a></h3>

    <img alt="Zero the Ziguana" src="https://ziglang.org/img/Zero_3.svg" style="height: 17em; float: right">
    <p>TODO glibc 2.35 and 2.36 are out but zig does not provide those yet</p>
    <p>TODO however zig works better with native glibc that is fresher than the shipped one</p>

    <ul>
      <li>Restore compatibility with glibc&lt;=2.33 for global initializers (#10587)</li>
      <li>Added <code>libresolv</code> stubs (#12629)</li>
      <li>Support integrating with system glibc that is newer than the newest one Zig provides (#12797)</li>
      <li>Support targeting glibc for the native system target even when no system C compiler is installed (#12814)</li>
      <li>Version-gate <code>_DYNAMIC_STACK_SIZE_SOURCE</code> (#10713)</li>
    </ul>
    <p>
    TODO mention that some of these patches would be better off with universal-headers
    </p>
    

    <h3 id="mingw-w64-1000"><a href="#toc-mingw-w64-1000">mingw-w64 10.0.0</a> <a class="hdr" href="#mingw-w64-1000">ยง</a></h3>

    <p>
    Zig ships with the source code to <a href="https://mingw-w64.org/">mingw-w64</a>.
    When targeting *-windows-gnu and linking against libc, Zig builds mingw-w64 from source
    for the selected target.
    </p>
    <p>This release updates the bundled mingw-w64 source code to
    <a href="https://sourceforge.net/p/mingw-w64/mailman/message/37635065/">v10.0.0</a>.</p>
    <p>Zig now passes <code>-D__USE_MINGW_ANSI_STDIO=0</code> for crt files. This was supposed
    to be happening all along, and it was a bug that Zig did not do this before (#7356). Thanks to
    Martin Storsjรถ for helping me discover this on IRC. This fix means that Zig no longer carries
    any patches on top of upstream mingw-w64 sources!</p>
    

    <h3 id="zig-cc"><a href="#toc-zig-cc">zig cc</a> <a class="hdr" href="#zig-cc">ยง</a></h3>

    <p><code>zig cc</code> is Zig's drop-in C compiler tool. Enhancements in this release:</p>
    <ul>
      <li>Integration with <code>--sysroot</code> arg (#10568).</li>
      <li>Integration with more linker args:<ul>
          <li><code>--whole-archive</code>, <code>-whole-archive</code></li>
          <li><code>--no-whole-archive</code>, <code>-no-whole-archive</code></li>
          <li><code>-s</code>, <code>--strip-all</code></li>
          <li><code>-S</code>, <code>--strip-debug</code></li>
      </ul></li>
      <li>Add <code>--hash-style</code> linker parameter (applies to ELF).</li>
      <li>Fixed a bug where passing a zig source file to <code>zig cc</code> would
          incorrectly punt to clang because it thought there were no positional
          arguments.</li>
      <li>Emit to <code>a.out</code> if outpath is unspecified (#12858)</li>
      <li>Disable the cache for link operations (#12317)
        <br>
        This makes <code>zig cc</code> match the equivalent behavior of
        <code>zig build-exe</code> with regards to caching. That is - it will
        cache individual .c to .o compilations (with the usual exceptions), but
        will always repeat the linking process so that incremental linking has
        a chance to happen.
        <br>
        Perhaps a future enhancement will provide a way to get the old
        behavior, but I suspect this new behavior will be preferred by
        everyone, because it is closer to what C compilers do. Note that the
        old behavior can be obtained by switching to <code>zig build-exe</code>
        instead of <code>zig cc</code> and using the
        <code>--enable-cache</code> parameter, matching what the <a href="#Build-System">Build System</a> does.
      </li>
      <li>Support for <code>-Wl,--export=<symbol></code></li>
      <li>Support <code>--subsystem</code> linker flag (#11396)</li>
      <li>Integrate with <code>-fstack-check</code>, <code>-fno-stack-check</code></li>
      <li>Introduce special handling of <code>/dev/null</code>
        <br>
        Now Zig handles <code>-o /dev/null</code> equivalent to
        <code>-fno-emit-bin</code> because otherwise the atomic rename into
        place will fail. This also makes Zig do less work, avoiding pointless
        file system operations.</li>
      <li>Handle <code>-l :FILE</code> syntax (#10851)</li>
      <li>Full response file (*.rsp) support (#4833)</li>
      <li>Recognize CUDA source files (#10634)</li>
      <li>Recognize .stub as yet another C++ source file extension.</li>
      <li>Support <code>-Wl,--soname</code></li>
      <li>No longer strip by default, even when <code>-g</code> is not present.</li>
      <li>Detect MinGW-flavored static libraries.
        <br>
        Ideally on Windows, static libraries look like "foo.lib". However,
        CMake and other build systems will unfortunately produce static
        libraries that instead look like "libfoo.a". This patch makes Zig's CLI
        resolve "-lfoo" arguments into static libraries that match this other
        pattern.</li>
      <li>Support <code>-z nocopyreloc</code>.</li>
      <li>Support <code>-no-pie</code>.</li>
      <li>Pass <code>-O0</code> rather than <code>-Og</code> to Clang for Debug builds (#11949)</li>
      <li>Recognize <code>--verbose</code> as an alias for <code>-v</code></li>
      <li>Support <code>--compress-debug-sections</code> (#11863)</li>
      <li>Add support for <code>-M</code> (#12369)</li>
      <li>Avoid pointless caching (#12317)
        <br>
        When the entire purpose of this compilation is to perform a single zig
        cc operation we could "tail call" clang by doing an execve, and any use
        of the caching system would actually be problematic since the user is
        presumably doing their own caching by using dep file flags.</li>
      <li>Add <code>--print-gc-sections</code>, <code>--print-icf-sections</code>, and
        <code>--print-map</code></li>
      <li>Ensure that assembly source file command lines get the <code>-g</code> flag when appropriate.</li>
    </ul>
    <p>Please be aware that there are still
    <a href="https://github.com/ziglang/zig/issues?q=is%3Aopen+is%3Aissue+label%3A%22zig+cc%22">open zig cc issues</a>.
    However, these are use cases that never worked in the first place, making them
    <em>bugs</em> and <em>enhancements</em> rather than <em>regressions</em>.
    </p>
    

    <h3 id="zig-c"><a href="#toc-zig-c">zig c++</a> <a class="hdr" href="#zig-c">ยง</a></h3>

    <p><code>zig c++</code> is equivalent to <a href="#zig-cc">zig cc</a> with an added <code>-lc++</code>
    parameter, but I made a separate heading here because I realized that some people are
    not aware that Zig supports compiling C++ code and providing libc++ too!
    </p>

    <figure><figcaption class="c-cap"><cite class="file">hello.cpp</cite></figcaption><pre><code><span class="line">#include &lt;iostream&gt;</span>
<span class="line">int main() {</span>
<span class="line">    std::cout &lt;&lt; &quot;Hello World!&quot; &gt;&gt; std::endl;</span>
<span class="line">    return 0;</span>
<span class="line">}</span></code></pre></figure>
    <figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig c++ -o hello hello.cpp</kbd></span>
<span class="line">$ <kbd>./hello</kbd></span>
<span class="line">Hello World!</span>
</samp></pre></figure>
    <p>Cross-compiling too, of course:</p>
    <figure><figcaption class="shell-cap">Shell</figcaption><pre><samp><span class="line">$ <kbd>zig c++ -o hello hello.cpp -target riscv64-linux</kbd></span>
<span class="line">$ <kbd>qemu-riscv64 ./hello</kbd></span>
<span class="line">Hello World!</span>
</samp></pre></figure>
    <p>
    One thing that trips people up when they use this feature is that the
    <strong>C++ ABI is not stable across compilers</strong>, so always remember the rule:
    You must use the same C++ compiler to compile <em>all</em> your objects and static libraries.
    This is an unfortunate limitation of C++ which Zig can never fix.
    </p>
    <p>Improvements to libc++ in this release:</p>
    <ul>
      <li>Normalized C++ compilation options for single-threaded targets (#10143)</li>
      <li>Improved <a href="#Windows">Windows</a> compatibility.</li>
    </ul>
    

    <h3 id="zig-fmt"><a href="#toc-zig-fmt">zig fmt</a> <a class="hdr" href="#zig-fmt">ยง</a></h3>

    <ul>
      <li>Remove trailing whitespace on doc comments (#11353)</li>
      <li>Respect trailing commas in inline assembly, however, remove trailing comma
        at the end of clobbers.</li>
      <li>Keep <code><span class="line"><span class="tok-kw">callconv</span>(.Inline)</span></code> on function pointer types.</li>
      <li>Fixed formatting for single-line containers with comments (#8810)</li>
      <li>Fixed performance issue with nested arrays (#10224)</li>
      <li>Handle doc comments on struct members (#10443)</li>
      <li>Fixed switch cases dropping comments in certain situations (#11131)</li>
      <li>Fixed idempotency with newlines surrounding doc comment (#11802)</li>
      <li>Stop deleting container doc comments (#12617)</li>
      <li><code>--exclude</code> now ignores missing directories.</li>
    </ul>
    

    <h3 id="compiler-rt"><a href="#toc-compiler-rt">compiler-rt</a> <a class="hdr" href="#compiler-rt">ยง</a></h3>

    <p>
    compiler-rt is the library that provides, for example, 64-bit integer multiplication for
    32-bit architectures which do not have a machine code instruction for it.
    In the <a href="https://gcc.gnu.org/">GNU</a> world, it's called libgcc.
    </p>
    <p>
    Unlike most compilers, which depend on a binary build of compiler-rt being installed alongside
    the compiler, Zig builds compiler-rt on-the-fly, from source, as needed for the
    target platform. This release saw some improvements to Zig's compiler-rt implementation
    (#1290).
    </p>
    <ul>
      <li>Added <code>__absvsi2</code>, <code>__absvdi2</code>, <code>__absvti2</code></li>
      <li>Added <code>__negvsi2</code>, <code>__negvdi2</code>, <code>__negvti2</code></li>
      <li>Added complex multiply/division (#13117)</li>
      <li>Added addo and subo routines (#10824)</li>
      <li>Added TAS lock support for <a href="#SPARC">SPARC</a> (#11437)</li>
      <li>Fixed softfloat support for <a href="#PowerPC">PowerPC</a> (#13100)</li>
      <li>Optimized mulo</li>
      <li>Added routines for <a href="#f80">f80</a></li>
      <li>Avoid symbol collisions with Windows libc (#11609)</li>
      <li>Started consolidating libc functions that codegen depends on into compiler-rt (#7265)
        <br>
        Compiler backends want to emit calls to e.g. <code>memcpy</code> or <code>sqrt</code>.
        These are typically provided by libc, but they might not be in the case of freestanding,
        or depending on which third party libc is linked against.
        <br>
        Therefore Zig has started to provide all possible symbols with <em>weak</em> linkage,
        meaning that these symbols will be overridden by libc if provided. This means the only
        necessary runtime library that Zig objects need to be linked against is compiler-rt,
        no matter the target.
      </li>
      <li>The source code has been re-organized to support the use case of building compiler-rt
        with a different compilation unit per file (#11847)
        <br>It was hypothesized that this could improve
        <a href="#Self-Hosted-Linker">Self-Hosted Linker</a> performance, however <code>-ffunction-sections</code>
        plus garbage collection ended up being faster.</li>
    </ul>
    
    

    <h2 id="Roadmap"><a href="#toc-Roadmap">Roadmap</a> <a class="hdr" href="#Roadmap">ยง</a></h2>

    <img alt="Ziggy the Ziguana" src="https://ziglang.org/img/Ziggy_8.svg" style="height: 12em; float: right; transform: scaleX(-1)">
    <p>Now that the <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a> is launched, we can move on with the roadmap!
    </p>

    <p>The major themes of the 0.11.0 release cycle will be
    <strong>language iteration</strong>,
    <strong>compilation speed</strong>, and <strong>package management</strong>.
    </p>

    <p>Some <a href="https://www.youtube.com/watch?v=AqDdWEiSwMM">upcoming milestones</a> we will be working towards in the 0.11.0 release cycle:</p>
    <ul>
      <li>Finishing the tail end of test coverage - getting the <a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a>
        to pass a strict superset of tests passed by the <a href="#Bootstrap-Compiler">Bootstrap Compiler</a>. This is
        down to a few dozen compile error tests.</li>
      <li><a href="#Self-Hosted-Compiler">Self-Hosted Compiler</a> can build itself with the <a href="#C-Backend">C Backend</a>.
        Unlocks ability to replace the <a href="#Bootstrap-Compiler">Bootstrap Compiler</a> with generated C
        code (#5246).</li>
      <li>Many <a href="#Accepted-Proposals">Accepted Proposals</a> implemented. Expect breakage!</li>
      <li>Behavior tests passing for the <a href="#x86-Backend">x86 Backend</a>, <a href="#aarch64-Backend">aarch64 Backend</a>, or
        <a href="#WebAssembly-Backend">WebAssembly Backend</a>.
        Unleashes our full compilation speed when targeting the respective architecture.</li>
      <li>Experimental first implementation of the <a href="#Package-Manager">official package manager</a>.</li>
      <li>Fuzz test incremental compilation so that we can enable it and gain compilation
        speed for all backends, including the <a href="#LLVM-15">llvm backend</a>.</li>
      <li><a href="#Self-Hosted-Linker">Self-Hosted Linker</a> support for <a href="#ELF">ELF</a> and <a href="#COFF">COFF</a>.
        Eliminate dependency on <a href="https://lld.llvm.org/">LLD</a>.</li>
      <li>Hot code swapping for <a href="#Windows">Windows</a>, <a href="#macOS">macOS</a>, and <a href="#Linux">Linux</a>.</li>
      <li>Introduce concurrency to semantic analysis to further increase compilation speed.</li>
    </ul>

    <p>Here are the <strong>steps for Zig to reach 1.0</strong>:</p>
    <ol>
      <li>Stabilize the language. No more <a href="#Language-Changes">Language Changes</a> after this.</li>
      <li>Complete the language specification first draft.</li>
      <li>Implement the <a href="#Package-Manager">official package manager</a>.</li>
      <li>Stabilize the <a href="#Standard-Library">Standard Library</a>. That means to add any missing functionality,
        audit the existing functionality, curate it, re-organize everything, and
        fix all the <a href="#Bug-Fixes">bugs</a>.</li>
      <li>Go one full release cycle without any breaking changes.</li>
      <li>Finally we can tag 1.0.</li>
    </ol>

    <h3 id="Package-Manager"><a href="#toc-Package-Manager">Package Manager</a> <a class="hdr" href="#Package-Manager">ยง</a></h3>

    <p>
    Having a package manager built into the Zig compiler is a
    <a href="https://github.com/ziglang/zig/issues/943">long-anticipated feature</a>.
    Zig 0.10.0 does not have this feature.
    However, all the prerequisites are finally done, and work begins now!
    </p>
    <p>
    We will do our best to
    <a href="https://www.youtube.com/watch?v=stChOsejLEQ">keep in mind the needs of system package maintainers</a>
    while working on this language package manager.
    </p>
    

    <h3 id="Accepted-Proposals"><a href="#toc-Accepted-Proposals">Accepted Proposals</a> <a class="hdr" href="#Accepted-Proposals">ยง</a></h3>

    <p>
    If you want more of a sense of the direction Zig is heading, you can look at
    <a href="https://github.com/ziglang/zig/issues?q=is%3Aopen+is%3Aissue+label%3Aaccepted">the set of accepted proposals</a>.
    </p>
    
    

    <h2 id="Thank-You-Contributors"><a href="#toc-Thank-You-Contributors">Thank You Contributors!</a> <a class="hdr" href="#Thank-You-Contributors">ยง</a></h2>

    <p>Here are all the people who landed at least one contribution into this release:</p>
    <ul style="columns: 3">
<li>Andrew Kelley</li>
<li>Jakub Konka</li>
<li>Veikka Tuominen</li>
<li>Luuk de Gram</li>
<li>joachimschmidt557</li>
<li>Koakuma</li>
<li>Loris Cro</li>
<li>Cody Tapscott</li>
<li>Mitchell Hashimoto</li>
<li>r00ster91</li>
<li>Vallahor</li>
<li>Robin Voetter</li>
<li>John Schmidt</li>
<li>Ryan Liptak</li>
<li>William Sengir</li>
<li>Jacob Young</li>
<li>Jonathan Marler</li>
<li>Daniele Cocca</li>
<li>fifty-six</li>
<li>Motiejus Jakลกtys</li>
<li>ominitay</li>
<li>Jimmi Holst Christensen</li>
<li>Isaac Freund</li>
<li>Evan Haas</li>
<li>viri</li>
<li>Frank Denis</li>
<li>Meghan</li>
<li>Joachim Schmidt</li>
<li>Der Teufel</li>
<li>Guillaume Wenzek</li>
<li>Stephen Gutekanst</li>
<li>Vincent Rischmann</li>
<li>mparadinha</li>
<li>Jacob G-W</li>
<li>Jan Philipp Hafer</li>
<li>Lee Cannon</li>
<li>Marc Tiehuis</li>
<li>riverbl</li>
<li>zooster</li>
<li>Ali Chraghi</li>
<li>Stephen Gregoratto</li>
<li>Jens Goldberg</li>
<li>LordMZTE</li>
<li>Yujiri</li>
<li>Hadrien Dorio</li>
<li>kkHAIKE</li>
<li>r00ster</li>
<li>Erik Arvstedt</li>
<li>Evin Yulo</li>
<li>Hiroaki Nakamura</li>
<li>InKryption</li>
<li>Rabin Gaire</li>
<li>Tau</li>
<li>iddev5</li>
<li>jagt</li>
<li>matu3ba</li>
<li>protty</li>
<li>r00ster</li>
<li>Andreas Reischuck</li>
<li>Bill Nagel</li>
<li>Eric Joldasov</li>
<li>Felix "xq" Queiรner</li>
<li>InKryption</li>
<li>John Schmidt</li>
<li>Kirk Scheibelhut</li>
<li>LeRoyce Pearson</li>
<li>Sage Hane</li>
<li>VรRรSKลI Andrรกs</li>
<li>Yusuf Bham</li>
<li>aiotter</li>
<li>alice</li>
<li>antlilja</li>
<li>frmdstryr</li>
<li>kcbanner</li>
<li>kprotty</li>
<li>riChar</li>
<li>vi</li>
<li>xReveres</li>
<li>Al Hoang</li>
<li>Ali Chraghi</li>
<li>Ali Chraghi</li>
<li>Austin Rude</li>
<li>Ben Fiedler</li>
<li>BratishkaErik</li>
<li>Dan Ellis Echavarria</li>
<li>Daniel Saier</li>
<li>Daniele Cocca</li>
<li>Dante Catalfamo</li>
<li>David Gonzalez Martin</li>
<li>David John</li>
<li>David Martschenko</li>
<li>Erik Hugne</li>
<li>Flandre Scarlet</li>
<li>Francesco Alemanno</li>
<li>GethDW</li>
<li>Helio Machado</li>
<li>Igor Stojkovic</li>
<li>Ikko Ashimine</li>
<li>Jarred Sumner</li>
<li>Jonathan S</li>
<li>Locria Cyber</li>
<li>Mateusz Radomski</li>
<li>Mikhail Popov</li>
<li>Philipp Lรผhmann</li>
<li>Reece Van Atta</li>
<li>Sebsatian Keller</li>
<li>Shane Kennedy</li>
<li>Silver</li>
<li>Sรฉbastien Marie</li>
<li>Techatrix</li>
<li>Techcable</li>
<li>Tom Read Cutting</li>
<li>TwoClocks</li>
<li>Vincenzo Palazzo</li>
<li>Wojtek Mach</li>
<li>Xavier Bouchoux</li>
<li>alichraghi</li>
<li>bfredl</li>
<li>billzez</li>
<li>cod1r</li>
<li>fn โ โฅ</li>
<li>gwenzek</li>
<li>jacobly0</li>
<li>leesongun</li>
<li>m</li>
<li>martinhath</li>
<li>naeu</li>
<li>paulsnar</li>
<li>praschke</li>
<li>r00ster91</li>
<li>sin-ack</li>
<li>xavier</li>
<li>zseri</li>
<li>ABuffSeagull</li>
<li>Alexander Slesarev</li>
<li>Allan Regush</li>
<li>Andrew Lee</li>
<li>Annika L</li>
<li>Anthony Carrico</li>
<li>Anton Lilja</li>
<li>Arnavion</li>
<li>Benjamin San Souci</li>
<li>BlueAlmost</li>
<li>Brian Gold</li>
<li>C-BJ</li>
<li>Carlos Zรบรฑiga</li>
<li>Chris Boesch</li>
<li>Curtis Tate Wilkinson</li>
<li>Curtis Wilkinson</li>
<li>Damien Firmenich</li>
<li>Daniel Hooper</li>
<li>David John</li>
<li>Dominic Tarr</li>
<li>Duncan Holm</li>
<li>Endel Dreyer</li>
<li>Eric Milliken</li>
<li>Eric Shrewsberry</li>
<li>Ersikan</li>
<li>Exonorid</li>
<li>Felix "xq" Queiรner</li>
<li>Felix Queiรner</li>
<li>FlandreScarlet</li>
<li>Gaรซtan</li>
<li>GethDW</li>
<li>GithubPrankster</li>
<li>Gregory Anders</li>
<li>Hanna</li>
<li>Hannes Bredberg</li>
<li>Hashi364</li>
<li>Henrique Dante de Almeida</li>
<li>Igor Anicฬ</li>
<li>Isaac Yonemoto</li>
<li>J87</li>
<li>James Mintram</li>
<li>Jan200101</li>
<li>Jason Ho</li>
<li>Jay Petacat</li>
<li>Jean Dao</li>
<li>Johannes Lรถthberg</li>
<li>John Simon</li>
<li>Jonas Gollenz</li>
<li>Josh Hannaford</li>
<li>Julian</li>
<li>Justas Zabulionis</li>
<li>Justin Whear</li>
<li>Kazuki Sakamoto</li>
<li>Keith Chambers</li>
<li>Ken Micklas</li>
<li>Kenta Iwasaki</li>
<li>Kim SHrier</li>
<li>Kirk Scheibelhut</li>
<li>Lewis Gaul</li>
<li>Maciej 'vesim' Kuliลski</li>
<li>Mahdi Rakhshandehroo</li>
<li>Manlio Perillo</li>
<li>Marian Beermann</li>
<li>Marijn Stollenga</li>
<li>Martin Hafskjold Thoresen</li>
<li>Martin Stuurwold</li>
<li>Martin Wickham</li>
<li>Mateusz Radomski</li>
<li>Matthew Hall</li>
<li>May B</li>
<li>Meredith Oleander</li>
<li>Michael Dusan</li>
<li>Mikael Berthe</li>
<li>Mikko Kaihlavirta</li>
<li>Morritz</li>
<li>N00byEdge</li>
<li>Naoki MATSUMOTO</li>
<li>Natalia Cholewa</li>
<li>OfekShochat</li>
<li>Omar Alhammadi</li>
<li>Pablo Santiago Blum de Aguiar</li>
<li>PhaseMage</li>
<li>Philipp Lรผhmann</li>
<li>Pierre Curto</li>
<li>Rekai Musuka</li>
<li>Rekai Nyangadzayi Musuka</li>
<li>Riccardo Binetti</li>
<li>Robin</li>
<li>Ryotaro "Justin" Kimura</li>
<li>Sebastian Keller</li>
<li>Shupei Fan</li>
<li>Sizhe Zhao</li>
<li>Stephen Lumenta</li>
<li>Steven Fackler</li>
<li>Takeshi Yoneda</li>
<li>Techcable</li>
<li>The Depressed Milkman</li>
<li>Thiago Teodoro Pereira Silva</li>
<li>Thomas Cheng</li>
<li>Tom Maenan Read Cutting</li>
<li>Tom Manner</li>
<li>Travis Staloch</li>
<li>Tw</li>
<li>Vesim</li>
<li>Wei Fu</li>
<li>Will Hawkins</li>
<li>YeonJiKun</li>
<li>Yorhel</li>
<li>Yusuf Bham</li>
<li>Yusuke Tanaka</li>
<li>Yuto Oguchi</li>
<li>Zhora Trush</li>
<li>afranchuk</li>
<li>alex</li>
<li>biexelar</li>
<li>boofexxx</li>
<li>bryfry</li>
<li>chip2n</li>
<li>cryptocode</li>
<li>dan</li>
<li>daurnimator</li>
<li>der-teufel-programming</li>
<li>devins2518</li>
<li>djg</li>
<li>drew</li>
<li>dxps</li>
<li>emma</li>
<li>erikarvstedt</li>
<li>jcalabro</li>
<li>johnLate</li>
<li>jumpnbrownweasel</li>
<li>max</li>
<li>mllken</li>
<li>noiryuh</li>
<li>rohlem</li>
<li>sharpobject</li>
<li>sin-ack</li>
<li>tecanec</li>
<li>vnc5</li>
<li>xEgoist</li>
<li>yujiri8</li>
<li>yyny</li>
<li>zc</li>
<li>ลฝiga ลฝeljko</li>
<li>ใYuh</li>
    </ul>
    

    <h2 id="Thank-You-Sponsors"><a href="#toc-Thank-You-Sponsors">Thank You Sponsors!</a> <a class="hdr" href="#Thank-You-Sponsors">ยง</a></h2>

    <img alt="Ziggy the Ziguana" src="https://ziglang.org/img/Ziggy_6.svg" style="height: 18em">
    <p>
    Special thanks to those who <a href="/zsf/">sponsor Zig</a>.
    Because of you, Zig is driven by the open source community, rather than the goal of making profit.
    In particular, these fine folks sponsor Zig for $50/month or more:
    </p>
    <ul style="columns: 3">
<li><a href="https://pex.com">Pex</a></li>
<li><a href="https://scheibo.com">Kirk Scheibelhut</a></li>
<li><a href="https://github.com/drfuchs">drfuchs</a></li>
<li><a href="https://github.com/tarasbob">tarasbob</a></li>
<li><a href="https://coil.com">CoilHQ</a></li>
<li><a href="https://slimsag.com">Stephen Gutekanst</a></li>
<li><a href="https://www.hryx.net/">Stevie Hryciw</a></li>
<li><a href="https://mitchellh.com">Mitchell Hashimoto</a></li>
<li><a href="https://github.com/phrrngtn">Paul Harrington</a></li>
<li><a href="derekcollison.net">Derek Collison</a></li>
<li><a href="https://github.com/karrick">Karrick McDermott</a></li>
<li><a href="https://github.com/tigerbeetledb/tigerbeetle">Joran Dirk Greef</a></li>
<li><a href="https://github.com/bfredl">bfredl</a></li>
<li><a href="https://github.com/Vulfox">Dustin Taylor</a></li>
<li><a href="https://github.com/tsmanner">Tom Manner</a></li>
<li><a href="www.kapricornmedia.com">Josรฉ M Rico</a></li>
<li><a href="https://wasmer.io">Wasmer</a></li>
<li><a href="https://github.com/tauoverpi">Simon A. Nielsen Knights</a></li>
<li><a href="https://github.com/MikoverseAllar">MikoverseAllar</a></li>
<li><a href="https://github.com/thejoshwolfe">Josh Wolfe</a></li>
<li><a href="https://github.com/ryanworl">ryanworl</a></li>
<li><a href="https://github.com/rui314">Rui Ueyama</a></li>
<li><a href="https://github.com/alunbestor">Alun Bestor</a></li>
<li><a href="https://terinstock.com">Terin Stock</a></li>
<li><a href="https://aras-p.info">Aras Pranckeviฤius</a></li>
<li><a href="https://twitter.com/dcocca88">Daniele Cocca</a></li>
<li><a href="https://github.com/lycus">The Lycus Foundation</a></li>
<li><a href="https://github.com/danbanta">Dan Banta</a></li>
<li><a href="https://jethron.id.au">Jethro Nederhof</a></li>
<li><a href="https://github.com/briangold">Brian Gold</a></li>
<li><a href="https://github.com/david-vanderson">David Vanderson</a></li>
<li><a href="https://mattnite.github.io">Matt Knight</a></li>
<li><a href="https://kalvad.com">Loรฏc Tosser</a></li>
<li><a href="https://goofyfootlabs.com/">GoofyFoot Labs</a></li>
<li>Martin Schwaighofer</li>
<li>Santiago Andaluz</li>
<li>Luke Champine</li>
<li>Yurii Rashkovskii</li>
<li>Rand Fitzpatrick</li>
<li>Jesus Alvarez</li>
<li>Benjamin Ebby</li>
<li>Charlie Cheever</li>
<li>Ralph Brorsen</li>
<li>Brett Slatkin</li>
<li>Wojtek Mach</li>
<li>Max De Marzi</li>
<li>Josh Ashby</li>
<li>Christopher Dolan</li>
<li>Alex Bubnov</li>
<li>Anton Kochkov</li>
<li>Damien Firmenich</li>
<li>Jamie Brandon</li>
<li>Jordan Orelli</li>
<li>Max Bernstein</li>
<li>Timothy Ham</li>
<li>Jay Petacat</li>
<li>Garett Bass</li>
<li>Marco Munizaga</li>
<li>Christian Wesselhoeft</li>
<li>Tyler Gibbons</li>
<li>Keith Devens</li>
<li>Agam Dua</li>
<li>Aaron Olson</li>
<li>Ian Applegate</li>
<li>Daniel Hensley</li>
<li>Charles</li>
<li>Erik Mรฅllberg</li>
<li>Luca Bolognese</li>
<li>Sean Carey</li>
<li>Andrรฉ Rodrigues</li>
<li>Wesley Hill</li>
<li>Peter Dinges</li>
<li>Emily A. Bellows</li>
<li>Lee Cannon</li>
<li>sparrisable</li>
<li>Chris Baldwin</li>
<li>Martin Hochenwarter</li>
<li>็็ฑๅฝ</li>
<li>Ross Rheingans-Yoo</li>
<li>Felix Queiรner</li>
<li>Baptiste Canton</li>
<li>Mario Arias</li>
<li>Luuk de Gram</li>
<li>Mateusz Czarnecki</li>
<li>James McGill</li>
<li>Rafael Batiati</li>
<li>Yaroslav Zhavoronkov</li>
<li>Tom Read Cutting</li>
<li>Mykhailo Tsiuptsiun (miktwon) [Flag of Ukraine]</li>
<li>Curtis Tate Wilkinson</li>
<li>Alex Sergeev</li>
<li>Auguste Rame</li>
<li>Mamadou S Diallo</li>
<li>Dirk de Visser</li>
<li>Joe Gordon</li>
<li>OM PropTech GmbH</li>
    </ul>
    
    </div>
  </body>
</html>
TODO: check with tidy
TODO: run that regex to make the github issues into links
TODO: give the diffs green/red highlighting
